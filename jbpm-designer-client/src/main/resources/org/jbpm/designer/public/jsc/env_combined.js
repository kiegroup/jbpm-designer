XMLNS={ATOM:"http://www.w3.org/2005/Atom",XHTML:"http://www.w3.org/1999/xhtml",ERDF:"http://purl.org/NET/erdf/profile",RDFS:"http://www.w3.org/2000/01/rdf-schema#",RDF:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",RAZIEL:"http://b3mn.org/Raziel",SCHEMA:""};
var Kickstart={started:!1,callbacks:[],alreadyLoaded:[],PATH:"",load:function(){Kickstart.kick()},kick:function(){Kickstart.started||(Kickstart.started=!0,Kickstart.callbacks.each(function(a){window.setTimeout(a,1)}))},register:function(a){with(Kickstart)started?window.setTimeout(a,1):Kickstart.callbacks.push(a)},require:function(a){return Kickstart.alreadyLoaded.member(a)?!1:Kickstart.include(a)},include:function(a){var b=document.getElementsByTagNameNS(XMLNS.XHTML,"head")[0],c=document.createElementNS(XMLNS.XHTML,
"script");c.setAttributeNS(XMLNS.XHTML,"type","text/javascript");c.src=Kickstart.PATH+a;b.appendChild(c);Kickstart.alreadyLoaded.push(a);return!0}};Event.observe(window,"load",Kickstart.load);if(!ORYX)var ORYX={};ORYX.CONFIG||(ORYX.CONFIG={});ORYX.CONFIG.WEB_URL="designer";ORYX.CONFIG.MENU_INDEX={File:1,Edit:2,"Z-Order":3,Undo:4,Docker:5,Help:"ZZZZZZ"};ORYX.CONFIG.UUID_URL=function(a,b){void 0===a&&(a=ORYX.UUID);void 0===b&&(b=ORYX.PROFILE);return ORYX.PATH+"uuidRepository?uuid="+a+"&profile="+b+"&pp="+ORYX.PREPROCESSING};ORYX.CONFIG.TRANSFORMER_URL=function(a,b){void 0===a&&(a=ORYX.UUID);void 0===b&&(b=ORYX.PROFILE);return ORYX.PATH+"transformer?uuid="+a+"&profile="+b};
ORYX.CONFIG.TASKFORMS_URL=function(a,b){void 0===a&&(a=ORYX.UUID);void 0===b&&(b=ORYX.PROFILE);return ORYX.PATH+"taskforms?uuid="+a+"&profile="+b};ORYX.CONFIG.UUID_AUTOSAVE_INTERVAL=12E4;ORYX.CONFIG.UUID_AUTOSAVE_DEFAULT=!1;ORYX.CONFIG.VERSION_URL=ORYX.CONFIG.ROOT_PATH+"VERSION";ORYX.CONFIG.LICENSE_URL=ORYX.CONFIG.ROOT_PATH+"LICENSE";ORYX.CONFIG.SERVER_HANDLER_ROOT="";ORYX.CONFIG.STENCILSET_HANDLER=ORYX.CONFIG.SERVER_HANDLER_ROOT+"";ORYX.CONFIG.MODE_READONLY="readonly";
ORYX.CONFIG.MODE_FULLSCREEN="fullscreen";ORYX.CONFIG.SHOW_GRIDLINE=!0;ORYX.CONFIG.DISABLE_GRADIENT=!1;ORYX.CONFIG.PLUGINS_ENABLED=!0;ORYX.CONFIG.PLUGINS_CONFIG=ORYX.CONFIG.ROOT_PATH+"plugins";ORYX.CONFIG.PROFILE_PATH=ORYX.CONFIG.ROOT_PATH+"profiles/";ORYX.CONFIG.PLUGINS_FOLDER="Plugins/";ORYX.CONFIG.PDF_EXPORT_URL=ORYX.CONFIG.ROOT_PATH+"pdf";ORYX.CONFIG.PNML_EXPORT_URL=ORYX.CONFIG.ROOT_PATH+"pnml";ORYX.CONFIG.SIMPLE_PNML_EXPORT_URL=ORYX.CONFIG.ROOT_PATH+"simplepnmlexporter";
ORYX.CONFIG.DESYNCHRONIZABILITY_URL=ORYX.CONFIG.ROOT_PATH+"desynchronizability";ORYX.CONFIG.IBPMN2BPMN_URL=ORYX.CONFIG.ROOT_PATH+"ibpmn2bpmn";ORYX.CONFIG.BPMN2YAWL_URL=ORYX.CONFIG.ROOT_PATH+"bpmn2yawl";ORYX.CONFIG.QUERYEVAL_URL=ORYX.CONFIG.ROOT_PATH+"query";ORYX.CONFIG.SYNTAXCHECKER_URL=ORYX.CONFIG.ROOT_PATH+"syntaxchecker";ORYX.CONFIG.VALIDATOR_URL=ORYX.CONFIG.ROOT_PATH+"validator";ORYX.CONFIG.AUTO_LAYOUTER_URL=ORYX.CONFIG.ROOT_PATH+"layouter";
ORYX.CONFIG.SS_EXTENSIONS_FOLDER=ORYX.CONFIG.ROOT_PATH+"stencilsets/extensions/";ORYX.CONFIG.SS_EXTENSIONS_CONFIG=ORYX.CONFIG.ROOT_PATH+"stencilsets/extensions/extensions.json";ORYX.CONFIG.ORYX_NEW_URL="/new";ORYX.CONFIG.STEP_THROUGH=ORYX.CONFIG.ROOT_PATH+"stepthrough";ORYX.CONFIG.STEP_THROUGH_CHECKER=ORYX.CONFIG.ROOT_PATH+"stepthroughchecker";ORYX.CONFIG.XFORMS_EXPORT_URL=ORYX.CONFIG.ROOT_PATH+"xformsexport";ORYX.CONFIG.XFORMS_EXPORT_ORBEON_URL=ORYX.CONFIG.ROOT_PATH+"xformsexport-orbeon";
ORYX.CONFIG.XFORMS_IMPORT_URL=ORYX.CONFIG.ROOT_PATH+"xformsimport";ORYX.CONFIG.BPEL_EXPORT_URL=ORYX.CONFIG.ROOT_PATH+"bpelexporter";ORYX.CONFIG.BPEL4CHOR_EXPORT_URL=ORYX.CONFIG.ROOT_PATH+"bpel4chorexporter";ORYX.CONFIG.BPEL4CHOR2BPEL_EXPORT_URL=ORYX.CONFIG.ROOT_PATH+"bpel4chor2bpelexporter";ORYX.CONFIG.TREEGRAPH_SUPPORT=ORYX.CONFIG.ROOT_PATH+"treegraphsupport";ORYX.CONFIG.XPDL4CHOR2BPEL4CHOR_TRANSFORMATION_URL=ORYX.CONFIG.ROOT_PATH+"xpdl4chor2bpel4chor";
ORYX.CONFIG.RESOURCE_LIST=ORYX.CONFIG.ROOT_PATH+"resourceList";ORYX.CONFIG.BPMN_LAYOUTER=ORYX.CONFIG.ROOT_PATH+"bpmnlayouter";ORYX.CONFIG.EPC_LAYOUTER=ORYX.CONFIG.ROOT_PATH+"epclayouter";ORYX.CONFIG.BPMN2MIGRATION=ORYX.CONFIG.ROOT_PATH+"bpmn2migration";ORYX.CONFIG.BPMN20_SCHEMA_VALIDATION_ON=!0;ORYX.CONFIG.JPDLIMPORTURL=ORYX.CONFIG.ROOT_PATH+"jpdlimporter";ORYX.CONFIG.JPDLEXPORTURL=ORYX.CONFIG.ROOT_PATH+"jpdlexporter";ORYX.CONFIG.CPNTOOLSEXPORTER=ORYX.CONFIG.ROOT_PATH+"cpntoolsexporter";
ORYX.CONFIG.CPNTOOLSIMPORTER=ORYX.CONFIG.ROOT_PATH+"cpntoolsimporter";ORYX.CONFIG.BPMN2XPDLPATH=ORYX.CONFIG.ROOT_PATH+"bpmn2xpdl";ORYX.CONFIG.TBPMIMPORT=ORYX.CONFIG.ROOT_PATH+"tbpmimport";ORYX.CONFIG.NAMESPACE_ORYX="http://www.b3mn.org/oryx";ORYX.CONFIG.NAMESPACE_SVG="http://www.w3.org/2000/svg";ORYX.CONFIG.CANVAS_WIDTH=3E3;ORYX.CONFIG.CANVAS_HEIGHT=2E3;ORYX.CONFIG.CANVAS_RESIZE_INTERVAL=300;ORYX.CONFIG.SELECTED_AREA_PADDING=4;ORYX.CONFIG.CANVAS_BACKGROUND_COLOR="none";ORYX.CONFIG.GRID_DISTANCE=30;
ORYX.CONFIG.GRID_ENABLED=!0;ORYX.CONFIG.ZOOM_OFFSET=0.1;ORYX.CONFIG.DEFAULT_SHAPE_MARGIN=60;ORYX.CONFIG.SCALERS_SIZE=7;ORYX.CONFIG.MINIMUM_SIZE=20;ORYX.CONFIG.MAXIMUM_SIZE=1E4;ORYX.CONFIG.OFFSET_MAGNET=15;ORYX.CONFIG.OFFSET_EDGE_LABEL_TOP=14;ORYX.CONFIG.OFFSET_EDGE_LABEL_BOTTOM=12;ORYX.CONFIG.OFFSET_EDGE_BOUNDS=5;ORYX.CONFIG.COPY_MOVE_OFFSET=30;ORYX.CONFIG.SHOW_GRIDLINE=!0;ORYX.CONFIG.BORDER_OFFSET=14;ORYX.CONFIG.MAX_NUM_SHAPES_NO_GROUP=14;ORYX.CONFIG.SHAPEMENU_CREATE_OFFSET_CORNER=30;
ORYX.CONFIG.SHAPEMENU_CREATE_OFFSET=45;ORYX.CONFIG.SHAPEMENU_RIGHT="Oryx_Right";ORYX.CONFIG.SHAPEMENU_BOTTOM="Oryx_Bottom";ORYX.CONFIG.SHAPEMENU_LEFT="Oryx_Left";ORYX.CONFIG.SHAPEMENU_TOP="Oryx_Top";ORYX.CONFIG.MORPHITEM_DISABLED="Oryx_MorphItem_disabled";ORYX.CONFIG.TYPE_STRING="string";ORYX.CONFIG.TYPE_BOOLEAN="boolean";ORYX.CONFIG.TYPE_INTEGER="integer";ORYX.CONFIG.TYPE_FLOAT="float";ORYX.CONFIG.TYPE_COLOR="color";ORYX.CONFIG.TYPE_DATE="date";ORYX.CONFIG.TYPE_CHOICE="choice";
ORYX.CONFIG.TYPE_URL="url";ORYX.CONFIG.TYPE_DIAGRAM_LINK="diagramlink";ORYX.CONFIG.TYPE_COMPLEX="complex";ORYX.CONFIG.TYPE_TEXT="text";ORYX.CONFIG.TYPE_VARDEF="vardef";ORYX.CONFIG.TYPE_EXPRESSION="expression";ORYX.CONFIG.TYPE_ACTION="action";ORYX.CONFIG.TYPE_GLOBAL="global";ORYX.CONFIG.TYPE_IMPORT="import";ORYX.CONFIG.TYPE_DATAINPUT="datainput";ORYX.CONFIG.TYPE_DATAOUTPUT="dataoutput";ORYX.CONFIG.TYPE_DATAINPUT_SINGLE="datainputsingle";ORYX.CONFIG.TYPE_DATAOUTPUT_SINGLE="dataoutputsingle";
ORYX.CONFIG.TYPE_DATAASSIGNMENT="dataassignment";ORYX.CONFIG.TYPE_CALLEDELEMENT="calledelement";ORYX.CONFIG.TYPE_CUSTOM="custom";ORYX.CONFIG.TYPE_REASSIGNMENT="reassignment";ORYX.CONFIG.TYPE_NOTIFICATIONS="notifications";ORYX.CONFIG.LABEL_LINE_DISTANCE=2;ORYX.CONFIG.LABEL_DEFAULT_LINE_HEIGHT=12;ORYX.CONFIG.ENABLE_MORPHMENU_BY_HOVER=!0;ORYX.CONFIG.EDITOR_ALIGN_BOTTOM=1;ORYX.CONFIG.EDITOR_ALIGN_MIDDLE=2;ORYX.CONFIG.EDITOR_ALIGN_TOP=4;ORYX.CONFIG.EDITOR_ALIGN_LEFT=8;ORYX.CONFIG.EDITOR_ALIGN_CENTER=16;
ORYX.CONFIG.EDITOR_ALIGN_RIGHT=32;ORYX.CONFIG.EDITOR_ALIGN_SIZE=48;ORYX.CONFIG.EVENT_MOUSEDOWN="mousedown";ORYX.CONFIG.EVENT_MOUSEUP="mouseup";ORYX.CONFIG.EVENT_MOUSEOVER="mouseover";ORYX.CONFIG.EVENT_MOUSEOUT="mouseout";ORYX.CONFIG.EVENT_MOUSEMOVE="mousemove";ORYX.CONFIG.EVENT_DBLCLICK="dblclick";ORYX.CONFIG.EVENT_CLICK="click";ORYX.CONFIG.EVENT_KEYDOWN="keydown";ORYX.CONFIG.EVENT_KEYUP="keyup";ORYX.CONFIG.EVENT_LOADED="editorloaded";ORYX.CONFIG.EVENT_EXECUTE_COMMANDS="executeCommands";
ORYX.CONFIG.EVENT_STENCIL_SET_LOADED="stencilSetLoaded";ORYX.CONFIG.EVENT_SELECTION_CHANGED="selectionchanged";ORYX.CONFIG.EVENT_SHAPEADDED="shapeadded";ORYX.CONFIG.EVENT_PROPERTY_CHANGED="propertyChanged";ORYX.CONFIG.EVENT_DRAGDROP_START="dragdrop.start";ORYX.CONFIG.EVENT_SHAPE_MENU_CLOSE="shape.menu.close";ORYX.CONFIG.EVENT_DRAGDROP_END="dragdrop.end";ORYX.CONFIG.EVENT_RESIZE_START="resize.start";ORYX.CONFIG.EVENT_RESIZE_END="resize.end";ORYX.CONFIG.EVENT_DRAGDOCKER_DOCKED="dragDocker.docked";
ORYX.CONFIG.EVENT_HIGHLIGHT_SHOW="highlight.showHighlight";ORYX.CONFIG.EVENT_HIGHLIGHT_HIDE="highlight.hideHighlight";ORYX.CONFIG.EVENT_LOADING_ENABLE="loading.enable";ORYX.CONFIG.EVENT_LOADING_DISABLE="loading.disable";ORYX.CONFIG.EVENT_LOADING_STATUS="loading.status";ORYX.CONFIG.EVENT_OVERLAY_SHOW="overlay.show";ORYX.CONFIG.EVENT_OVERLAY_HIDE="overlay.hide";ORYX.CONFIG.EVENT_DICTIONARY_ADD="dictionary.add";ORYX.CONFIG.EVENT_TASKFORM_EDIT="taskform.edit";ORYX.CONFIG.EVENT_ARRANGEMENT_TOP="arrangement.setToTop";
ORYX.CONFIG.EVENT_ARRANGEMENT_BACK="arrangement.setToBack";ORYX.CONFIG.EVENT_ARRANGEMENT_FORWARD="arrangement.setForward";ORYX.CONFIG.EVENT_ARRANGEMENT_BACKWARD="arrangement.setBackward";ORYX.CONFIG.EVENT_PROPWINDOW_PROP_CHANGED="propertyWindow.propertyChanged";ORYX.CONFIG.EVENT_LAYOUT_ROWS="layout.rows";ORYX.CONFIG.EVENT_LAYOUT_BPEL="layout.BPEL";ORYX.CONFIG.EVENT_LAYOUT_BPEL_VERTICAL="layout.BPEL.vertical";ORYX.CONFIG.EVENT_LAYOUT_BPEL_HORIZONTAL="layout.BPEL.horizontal";
ORYX.CONFIG.EVENT_LAYOUT_BPEL_SINGLECHILD="layout.BPEL.singlechild";ORYX.CONFIG.EVENT_LAYOUT_BPEL_AUTORESIZE="layout.BPEL.autoresize";ORYX.CONFIG.EVENT_AUTOLAYOUT_LAYOUT="autolayout.layout";ORYX.CONFIG.EVENT_UNDO_EXECUTE="undo.execute";ORYX.CONFIG.EVENT_UNDO_ROLLBACK="undo.rollback";ORYX.CONFIG.EVENT_BUTTON_UPDATE="toolbar.button.update";ORYX.CONFIG.EVENT_LAYOUT="layout.dolayout";ORYX.CONFIG.EVENT_COLOR_CHANGE="color.change";ORYX.CONFIG.EVENT_DOCKERDRAG="dragTheDocker";
ORYX.CONFIG.EVENT_SHOW_PROPERTYWINDOW="propertywindow.show";ORYX.CONFIG.EVENT_DRAG_TRACKER_DRAG="dragTracker.drag";ORYX.CONFIG.EVENT_DRAG_TRACKER_RESIZE="dragTracker.resize";ORYX.CONFIG.EVENT_DROP_SHAPE="drop.shape";ORYX.CONFIG.EVENT_SHAPE_DELETED="shape.deleted";ORYX.CONFIG.EVENT_FACADE_SELECTION_DELETION_REQUEST="facade_selection.deletion.request";ORYX.CONFIG.EVENT_NODEXML_SHOW="nodexml.show";ORYX.CONFIG.EVENT_VOICE_COMMAND="voice.command";ORYX.CONFIG.EVENT_SIMULATION_SHOW_RESULTS="simulation.showresults";
ORYX.CONFIG.EVENT_SIMULATION_DISPLAY_GRAPH="simulation.displaygraph";ORYX.CONFIG.EVENT_SIMULATION_BUILD_PATH_SVG="simulation.buildpathsvg";ORYX.CONFIG.EVENT_SIMULATION_CLEAR_PATH_SVG="simulation.clearpathsvg";ORYX.CONFIG.EVENT_SIMULATION_PATH_SVG_GENERATED="simulation.pathsvggenerated";ORYX.CONFIG.EVENT_SIMULATION_ANNOTATE_PROCESS="simulation.annotateprocess";ORYX.CONFIG.EVENT_SIMULATION_SHOW_ANNOTATED_PROCESS="simulation.showannotatedprocess";ORYX.CONFIG.EVENT_NOTIFICATION_SHOW="notification.show";
ORYX.CONFIG.VOICE_COMMAND_GENERATE_FORMS="voice.command.generate.forms";ORYX.CONFIG.VOICE_COMMAND_VALIDATE="voice.command.validate";ORYX.CONFIG.VOICE_COMMAND_GENERATE_IMAGE="voice.command.generate.image";ORYX.CONFIG.VOICE_COMMAND_VIEW_SOURCE="voice.command.view.source";ORYX.CONFIG.VOICE_COMMAND_ADD_TASK="voice.command.add.task";ORYX.CONFIG.VOICE_COMMAND_ADD_GATEWAY="voice.command.add.gateway";ORYX.CONFIG.VOICE_COMMAND_ADD_START_EVENT="voice.command.add.start.event";
ORYX.CONFIG.VOICE_COMMAND_ADD_END_EVENT="voice.command.add.end.event";ORYX.CONFIG.VOICE_COMMAND_TASK_TYPE_USER="voice.command.task.type.user";ORYX.CONFIG.VOICE_COMMAND_TASK_TYPE_SCRIPT="voice.command.task.type.script";ORYX.CONFIG.VOICE_COMMAND_GATEWAY_TYPE_PARALLEL="voice.command.gateway.type.parallel";ORYX.CONFIG.VOICE_ENTRY_GENERATE_FORMS="create forms";ORYX.CONFIG.VOICE_ENTRY_VALIDATE="validate";ORYX.CONFIG.VOICE_ENTRY_GENERATE_IMAGE="create image";ORYX.CONFIG.VOICE_ENTRY_VIEW_SOURCE="show bpmn";
ORYX.CONFIG.VOICE_ENTRY_ADD_TASK="task,test,text,that,map,10,chat,pet";ORYX.CONFIG.VOICE_ENTRY_ADD_GATEWAY="gateway";ORYX.CONFIG.VOICE_ENTRY_ADD_START_EVENT="start,bart,dark";ORYX.CONFIG.VOICE_ENTRY_ADD_END_EVENT="end,and";ORYX.CONFIG.VOICE_ENTRY_TASK_TYPE_USER="user,used";ORYX.CONFIG.VOICE_ENTRY_TASK_TYPE_SCRIPT="script,strip,red";ORYX.CONFIG.VOICE_ENTRY_GATEWAY_TYPE_PARALLEL="parallel";ORYX.CONFIG.CREATE_PATTERN="create.pattern";ORYX.CONFIG.SELECTION_HIGHLIGHT_SIZE=5;
ORYX.CONFIG.SELECTION_HIGHLIGHT_COLOR="#4444FF";ORYX.CONFIG.SELECTION_HIGHLIGHT_COLOR2="#9999FF";ORYX.CONFIG.SELECTION_HIGHLIGHT_STYLE_CORNER="corner";ORYX.CONFIG.SELECTION_HIGHLIGHT_STYLE_RECTANGLE="rectangle";ORYX.CONFIG.SELECTION_VALID_COLOR="#00FF00";ORYX.CONFIG.SELECTION_INVALID_COLOR="#FF0000";ORYX.CONFIG.DOCKER_DOCKED_COLOR="#00FF00";ORYX.CONFIG.DOCKER_UNDOCKED_COLOR="#FF0000";ORYX.CONFIG.DOCKER_SNAP_OFFSET=10;ORYX.CONFIG.EDIT_OFFSET_PASTE=10;ORYX.CONFIG.KEY_CODE_X=88;
ORYX.CONFIG.KEY_CODE_C=67;ORYX.CONFIG.KEY_CODE_V=86;ORYX.CONFIG.KEY_CODE_DELETE=46;ORYX.CONFIG.KEY_CODE_META=224;ORYX.CONFIG.KEY_CODE_BACKSPACE=8;ORYX.CONFIG.KEY_CODE_LEFT=37;ORYX.CONFIG.KEY_CODE_RIGHT=39;ORYX.CONFIG.KEY_CODE_UP=38;ORYX.CONFIG.KEY_CODE_DOWN=40;ORYX.CONFIG.KEY_Code_enter=12;ORYX.CONFIG.KEY_Code_left=37;ORYX.CONFIG.KEY_Code_right=39;ORYX.CONFIG.KEY_Code_top=38;ORYX.CONFIG.KEY_Code_bottom=40;ORYX.CONFIG.META_KEY_META_CTRL="metactrl";ORYX.CONFIG.META_KEY_ALT="alt";
ORYX.CONFIG.META_KEY_SHIFT="shift";ORYX.CONFIG.KEY_ACTION_DOWN="down";ORYX.CONFIG.KEY_ACTION_UP="up";ORYX.CONFIG.PANEL_RIGHT_COLLAPSED=!0;ORYX.CONFIG.PANEL_LEFT_COLLAPSED=!0;ORYX.CONFIG.STENCIL_MAX_ORDER=999;
ORYX.CONFIG.STENCIL_GROUP_ORDER=function(){var a={"http://b3mn.org/stencilset/bpmn2.0#":{}};a["http://b3mn.org/stencilset/bpmn2.0#"].Activities={};a["http://b3mn.org/stencilset/bpmn2.0#"].Artifacts={};a["http://b3mn.org/stencilset/bpmn2.0#"]["Catching Intermediate Events"]={};a["http://b3mn.org/stencilset/bpmn2.0#"]["Connecting Objects"]={};a["http://b3mn.org/stencilset/bpmn2.0#"]["Data Objects"]={};a["http://b3mn.org/stencilset/bpmn2.0#"]["End Events"]={};a["http://b3mn.org/stencilset/bpmn2.0#"].Gateways=
{};a["http://b3mn.org/stencilset/bpmn2.0#"]["Service Tasks"]={};a["http://b3mn.org/stencilset/bpmn2.0#"]["Start Events"]={};a["http://b3mn.org/stencilset/bpmn2.0#"].Swimlanes={};a["http://b3mn.org/stencilset/bpmn2.0#"]["Throwing Intermediate Events"]={};a["http://b3mn.org/stencilset/bpmn2.0#"]["Start Events"]=1;a["http://b3mn.org/stencilset/bpmn2.0#"]["Catching Intermediate Events"]=2;a["http://b3mn.org/stencilset/bpmn2.0#"]["Throwing Intermediate Events"]=3;a["http://b3mn.org/stencilset/bpmn2.0#"]["End Events"]=
4;a["http://b3mn.org/stencilset/bpmn2.0#"].Gateways=5;a["http://b3mn.org/stencilset/bpmn2.0#"].Activities=6;a["http://b3mn.org/stencilset/bpmn2.0#"]["Service Tasks"]=7;a["http://b3mn.org/stencilset/bpmn2.0#"]["Connecting Objects"]=8;a["http://b3mn.org/stencilset/bpmn2.0#"]["Data Objects"]=9;a["http://b3mn.org/stencilset/bpmn2.0#"].Swimlanes=10;a["http://b3mn.org/stencilset/bpmn2.0#"].Artifacts=11;a["http://b3mn.org/stencilset/bpmn2.0#"].Task={};a["http://b3mn.org/stencilset/bpmn2.0#"]["Reusable Subprocess"]=
{};a["http://b3mn.org/stencilset/bpmn2.0#"]["Multiple instances"]={};a["http://b3mn.org/stencilset/bpmn2.0#"]["Embedded Subprocess"]={};a["http://b3mn.org/stencilset/bpmn2.0#"]["Data-based Exclusive (XOR) Gateway"]={};a["http://b3mn.org/stencilset/bpmn2.0#"]["Start Event"]={};a["http://b3mn.org/stencilset/bpmn2.0#"]["Timer Intermediate Event"]={};a["http://b3mn.org/stencilset/bpmn2.0#"]["Signal Intermediate Event"]={};a["http://b3mn.org/stencilset/bpmn2.0#"]["End Event"]={};a["http://b3mn.org/stencilset/bpmn2.0#"]["Error End Event"]=
{};a["http://b3mn.org/stencilset/bpmn2.0#"]["Sequence Flow"]={};a["http://b3mn.org/stencilset/bpmn2.0#"].Task=7;a["http://b3mn.org/stencilset/bpmn2.0#"]["Reusable Subprocess"]=8;a["http://b3mn.org/stencilset/bpmn2.0#"]["Multiple instances"]=9;a["http://b3mn.org/stencilset/bpmn2.0#"]["Embedded Subprocess"]=10;a["http://b3mn.org/stencilset/bpmn2.0#"]["Data-based Exclusive (XOR) Gateway"]=6;a["http://b3mn.org/stencilset/bpmn2.0#"]["Start Event"]=1;a["http://b3mn.org/stencilset/bpmn2.0#"]["Timer Intermediate Event"]=
2;a["http://b3mn.org/stencilset/bpmn2.0#"]["Signal Intermediate Event"]=3;a["http://b3mn.org/stencilset/bpmn2.0#"]["End Event"]=4;a["http://b3mn.org/stencilset/bpmn2.0#"]["Error End Event"]=5;a["http://b3mn.org/stencilset/bpmn2.0#"]["Sequence Flow"]=11;return a};function printf(){for(var a=arguments[0],b=1;b<arguments.length;b++)a=a.replace("%"+(b-1),arguments[b]);return a}var ORYX_LOGLEVEL_TRACE=5,ORYX_LOGLEVEL_DEBUG=4,ORYX_LOGLEVEL_INFO=3,ORYX_LOGLEVEL_WARN=2,ORYX_LOGLEVEL_ERROR=1,ORYX_LOGLEVEL_FATAL=0;if(!ORYX_LOGLEVEL)var ORYX_LOGLEVEL=1;var ORYX_CONFIGURATION_DELAY=100,ORYX_CONFIGURATION_WAIT_ATTEMPTS=10;ORYX||(ORYX={});
ORYX=Object.extend(ORYX,{PATH:ORYX.CONFIG.ROOT_PATH,alreadyLoaded:[],configrationRetries:0,availablePlugins:[],Log:{__appenders:[{append:function(a){"undefined"!==typeof console&&console.log(a)}}],trace:function(){ORYX_LOGLEVEL>=ORYX_LOGLEVEL_TRACE&&ORYX.Log.__log("TRACE",arguments)},debug:function(){ORYX_LOGLEVEL>=ORYX_LOGLEVEL_DEBUG&&ORYX.Log.__log("DEBUG",arguments)},info:function(){ORYX_LOGLEVEL>=ORYX_LOGLEVEL_INFO&&ORYX.Log.__log("INFO",arguments)},warn:function(){ORYX_LOGLEVEL>=ORYX_LOGLEVEL_WARN&&
ORYX.Log.__log("WARN",arguments)},error:function(){ORYX_LOGLEVEL>=ORYX_LOGLEVEL_ERROR&&ORYX.Log.__log("ERROR",arguments)},fatal:function(){ORYX_LOGLEVEL>=ORYX_LOGLEVEL_FATAL&&ORYX.Log.__log("FATAL",arguments)},__log:function(a,b){b[0]=(new Date).getTime()+" "+a+" "+b[0];var c=printf.apply(null,b);ORYX.Log.__appenders.each(function(a){a.append(c)})},addAppender:function(a){ORYX.Log.__appenders.push(a)}},load:function(){(new Ext.Window({renderTo:Ext.getBody(),id:"oryx-loading-panel",bodyStyle:"padding: 8px;background:white",
title:ORYX.I18N.Oryx.title,width:"auto",height:"auto",modal:!0,resizable:!1,closable:!1,html:'<span style="font-size:11px;">'+ORYX.I18N.Oryx.pleaseWait+"</span>"})).show();ORYX.Log.debug("Oryx begins loading procedure.");if("undefined"==typeof Prototype||"undefined"==typeof Element||"undefined"==typeof Element.Methods||1.5>parseFloat(Prototype.Version.split(".")[0]+"."+Prototype.Version.split(".")[1]))throw"Application requires the Prototype JavaScript framework >= 1.5.3";ORYX.Log.debug("Prototype > 1.5 found.");
init()}});ORYX.Log.debug("Registering Oryx with Kickstart");Kickstart.register(ORYX.load);var Clazz=function(){};Clazz.prototype.construct=function(){};Clazz.extend=function(a){var b=function(){arguments[0]!==Clazz&&this.construct.apply(this,arguments)},c=new this(Clazz),d=this.prototype,e;for(e in a){var f=a[e];f instanceof Function&&(f.$=d);c[e]=f}b.prototype=c;b.extend=this.extend;return b};var idCounter=0,ID_PREFIX="resource";function init(){Ext.BLANK_IMAGE_URL=ORYX.PATH+"lib/ext-2.0.2/resources/images/default/s.gif";ORYX.Log.debug("Querying editor instances");ORYX.Editor.setMissingClasses();window.onOryxResourcesLoaded()}ORYX||(ORYX={});
ORYX.Editor={DOMEventListeners:new Hash,selection:[],zoomLevel:1,construct:function(a){this._eventsQueue=[];this.loadedPlugins=[];this.pluginsData=[];this.imagePreviewSVG=this.localStorageSVG=this.simulationPathSVG=this.simulationPathId=this.simulationPathData=this.simulationChartNodeName=this.simulationChartId=this.simulationChartTitle=this.simulationInstancesData=this.simulationEventAggregationData=this.simulationEventData=this.simulationChartData="";var b=this.modelMetaData=a;a.model&&(b=a.model);
this.id=b.resourceId;this.id||(this.id=b.id,this.id||(this.id=ORYX.Editor.provideId()));this.fullscreen=b.fullscreen||!0;this._initEventListener();ORYX.CONFIG.BACKEND_SWITCH?(a=(b.stencilset.namespace||b.stencilset.url).replace("#","%23"),ORYX.Core.StencilSet.loadStencilSet(ORYX.CONFIG.STENCILSET_HANDLER+a,this.id)):(a=b.stencilset.url,ORYX.Core.StencilSet.loadStencilSet(a,this.id));ORYX.CONFIG.SSEXTS&&ORYX.CONFIG.SSEXTS.each(function(a){this.loadSSExtension(a)}.bind(this));this._createCanvas(b.stencil?
b.stencil.id:null,b.properties);this._generateGUI();var c=!1,d=!1,e=function(){c&&d&&this._finishedLoading()}.bind(this);ORYX.Editor.makeExtModalWindowKeysave(this._getPluginFacade());window.setTimeout(function(){this.loadPlugins();c=!0;e()}.bind(this),100);window.setTimeout(function(){this.loadSerialized(b);this.getCanvas().update();d=!0;e()}.bind(this),200)},_finishedLoading:function(){Ext.getCmp("oryx-loading-panel")&&Ext.getCmp("oryx-loading-panel").hide();this.layout.doLayout();new Ext.dd.DropTarget(this.getCanvas().rootNode.parentNode);
!0===ORYX.CONFIG.PANEL_RIGHT_COLLAPSED&&this.layout_regions.east.collapse();!0===ORYX.CONFIG.PANEL_LEFT_COLLAPSED&&this.layout_regions.west.collapse();this.handleEvents({type:ORYX.CONFIG.EVENT_LOADED})},_initEventListener:function(){document.documentElement.addEventListener(ORYX.CONFIG.EVENT_KEYDOWN,this.catchKeyDownEvents.bind(this),!0);document.documentElement.addEventListener(ORYX.CONFIG.EVENT_KEYUP,this.catchKeyUpEvents.bind(this),!0);this._keyupEnabled=this._keydownEnabled=!0;this.DOMEventListeners[ORYX.CONFIG.EVENT_MOUSEDOWN]=
[];this.DOMEventListeners[ORYX.CONFIG.EVENT_MOUSEUP]=[];this.DOMEventListeners[ORYX.CONFIG.EVENT_MOUSEOVER]=[];this.DOMEventListeners[ORYX.CONFIG.EVENT_MOUSEOUT]=[];this.DOMEventListeners[ORYX.CONFIG.EVENT_SELECTION_CHANGED]=[];this.DOMEventListeners[ORYX.CONFIG.EVENT_MOUSEMOVE]=[]},_chartSelected:function(a){this._getPluginFacade().raiseEvent({type:ORYX.CONFIG.EVENT_SIMULATION_DISPLAY_GRAPH,value:a})},_generateGUI:function(){var a=this.getCanvas().rootNode.parentNode;this.centerContentPanel=new Ext.Panel({autoScroll:!0,
cmargins:{left:0,right:0},border:!1,items:{layout:"fit",autoHeight:!0,el:a}});this.resultsChartPanel=new Ext.Panel({border:!1,id:"simchart",html:"<svg></svg>"});this.simResultsContentPanel=new Ext.Panel({id:"simresultscontent",autoScroll:!0,autoheight:!0,border:!1,items:[{xtype:"component",id:"simchartframe",anchor:"100%",autoScroll:!0,autoEl:{tag:"iframe",src:ORYX.PATH+"simulation/default.html",width:"100%",height:"500",frameborder:"0",scrolling:"auto"}}]});this.simInfoPanel=new Ext.Panel({bodyStyle:"background:#ffff;font-size:9px;font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;padding-left:5px;",
id:"siminfopanel",title:"Simulation Info",autoScroll:!0,autoheight:!0,border:!1,html:""});this.simResultsTree=new Ext.tree.TreePanel({id:"simresultscharts",title:"Simulation Graphs",autoheight:!0,animate:!0,loader:new Ext.tree.TreeLoader,rootVisible:!1,autoScroll:!1,lines:!0,listeners:{click:{fn:this._chartSelected.bind(this)}}});this.simResultsTree.setRootNode(new Ext.tree.TreeNode({draggable:!1,id:"simcharts"}));this.simResultsContentPanelLayout=new Ext.Panel({width:"100%",height:1E3,layout:"border",
items:[{xtype:"panel",region:"east",margins:"5 0 0 5",layout:"anchor",anchor:"100%",width:300,border:!1,collapsible:!0,autoscroll:!0,split:!0,minSize:100,maxSize:500,autoheight:!0,cmargins:"5 5 0 5",items:[this.simInfoPanel,this.simResultsTree]},{xtype:"panel",region:"center",layout:"anchor",anchor:"100%",border:!1,autoscroll:!0,autoheight:!0,margins:"5 5 0 0",items:[this.simResultsContentPanel]}]});var b={id:"maintabs",region:"center",cls:"x-panel-editor-center",autoScroll:!1,cmargins:{left:0,right:0},
activeTab:0,border:!1,tabPosition:"top",anchor:"100%",deferredRender:!1,listeners:{tabchange:function(a){this.centerContentTabPannel.doLayout();this.simResultsContentPanelLayout.doLayout();a.doLayout()}.bind(this)},items:[{layout:"fit",title:"Process Modelling",items:[this.centerContentPanel]},{layout:"fit",title:"Simulation Results",autoScroll:!1,items:[this.simResultsContentPanelLayout]}]};this.centerContentTabPannel=new Ext.TabPanel(b);this.layout_regions={north:new Ext.Panel({region:"north",cls:"x-panel-editor-north",
autoEl:"div",border:!1}),east:new Ext.Panel({region:"east",layout:"anchor",autoEl:"div",border:!1,cls:"x-panel-editor-east",width:ORYX.CONFIG.PANEL_LEFT_WIDTH||400,autoScroll:!0,split:!0,animate:!0,collapsible:!0,titleCollapse:!0,title:"Properties",plugins:new Ext.ux.PanelCollapsedTitlePlugin}),south:new Ext.Panel({region:"south",cls:"x-panel-editor-south",autoEl:"div",border:!1}),west:new Ext.Panel({region:"west",layout:"anchor",autoEl:"div",border:!1,cls:"x-panel-editor-west",width:ORYX.CONFIG.PANEL_LEFT_WIDTH||
200,autoScroll:!0,split:!0,animate:!0,collapsible:!0,titleCollapse:!0,title:"Shape Repository",plugins:new Ext.ux.PanelCollapsedTitlePlugin}),center:this.centerContentTabPannel};for(region in this.layout_regions);b={layout:"border",items:[this.layout_regions.north,this.layout_regions.east,this.layout_regions.south,this.layout_regions.west,this.layout_regions.center]};this.contentviewport=new Ext.Viewport(b);this.fullscreen?this.layout=new Ext.Viewport(b):(b.renderTo=this.id,b.height=400,this.layout=
new Ext.Panel(b));this._generateHeader();a.parentNode.setAttributeNS(null,"align","center");a.setAttributeNS(null,"align","left");this.getCanvas().setSize({width:ORYX.CONFIG.CANVAS_WIDTH,height:ORYX.CONFIG.CANVAS_HEIGHT})},_generateHeader:function(){var a=new Ext.Panel({height:0,autoHeight:!1,border:!1,html:""}),b=ORYX.MashupAPI&&ORYX.MashupAPI.isUsed,c=b?ORYX.MashupAPI.canRun:!1,d=(b?ORYX.MashupAPI.isModelRemote:1)?"<img src='"+ORYX.PATH+"images/page_white_put.png'/>":"",e=b?"<span class='mashupinfo'><img src='"+
ORYX.PATH+"images/"+(c?"plugin_error":"plugin")+".png'/>"+d+"</span>":"",b=function(b){var c=ORYX.I18N.Oryx.notLoggedOn,b=b&&b.identifier&&"public"!=b.identifier?decodeURI(b.identifier.gsub('"',"")).replace(/\+/g," "):"";0>=b.length&&(b=c);c="<div id='oryx_editor_header'><a href=\""+ORYX.CONFIG.WEB_URL+'" target="_blank"><img src=\''+ORYX.PATH+"images/oryx.small.gif' border=\"0\" /></a><span class='openid "+(c==b?"not":"")+"'>"+b+e+"</span><div style='clear: both;'/></div>";a.body?a.body.dom.innerHTML=
c:a.html=c};ORYX.Editor.Cookie.onChange(b);b(ORYX.Editor.Cookie.getParams());this.addToRegion("north",a)},addToRegion:function(a,b,c){if(a.toLowerCase&&this.layout_regions[a.toLowerCase()]){a=this.layout_regions[a.toLowerCase()];a.add(b);ORYX.Log.debug("original dimensions of region %0: %1 x %2",a.region,a.width,a.height);!a.width&&b.initialConfig&&b.initialConfig.width&&(ORYX.Log.debug("resizing width of region %0: %1",a.region,b.initialConfig.width),a.setWidth(b.initialConfig.width));if(b.initialConfig&&
b.initialConfig.height){ORYX.Log.debug("resizing height of region %0: %1",a.region,b.initialConfig.height);var d=a.height||0;a.height=b.initialConfig.height+d;a.setHeight(b.initialConfig.height+d)}"string"==typeof c&&a.setTitle(c);a.ownerCt.doLayout();a.show();Ext.isMac&&ORYX.Editor.resizeFix();return a}return null},getAvailablePlugins:function(){var a=ORYX.availablePlugins.clone();a.each(function(a){a.engaged=this.loadedPlugins.find(function(a){return a.type==this.name}.bind(a))?!0:!1}.bind(this));
return a},loadScript:function(a,b){var c=document.createElement("script");c.type="text/javascript";c.readyState?c.onreadystatechange=function(){if("loaded"==c.readyState||"complete"==c.readyState)c.onreadystatechange=null,b()}:c.onload=function(){b()};c.src=a;document.getElementsByTagName("head")[0].appendChild(c)},activatePluginByName:function(a,b,c){var d=this.getAvailablePlugins().find(function(b){return b.name==a});if(d&&(!d.engaged||"false"===d.engaged)){var e=this.getStencilSets().keys(),f=
this._getPluginFacade(),g;ORYX.Log.debug("Initializing plugin '%0'",d.name);if(!d.requires||!d.requires.namespaces||d.requires.namespaces.any(function(a){return 0<=e.indexOf(a)}))if(!d.notUsesIn||!d.notUsesIn.namespaces||!d.notUsesIn.namespaces.any(function(a){return 0<=e.indexOf(a)}))try{g=new (eval(d.name))(f,d),g.type=d.name,g.registryChanged&&g.registryChanged(this.pluginsData),g.onSelectionChanged&&this.registerOnEvent(ORYX.CONFIG.EVENT_SELECTION_CHANGED,g.onSelectionChanged.bind(g)),this.loadedPlugins.push(g),
this.loadedPlugins.each(function(a){a.registryChanged&&a.registryChanged(this.pluginsData)}.bind(this)),b(!0)}catch(h){ORYX.Log.warn("Plugin %0 is not available",d.name),c?b(!1,"INITFAILED"):this.loadScript("plugins/scripts/"+d.source,this.activatePluginByName.bind(this,d.name,b,!0))}else b(!1,"NOTUSEINSTENCILSET"),ORYX.Log.info("Plugin need a stencilset which is not loaded'",d.name);else b(!1,"REQUIRESTENCILSET"),ORYX.Log.info("Plugin need a stencilset which is not loaded'",d.name)}else b(!1,d?"NOTFOUND":
"YETACTIVATED")},loadPlugins:function(){var a=this,b=[],c=this.getStencilSets().keys(),d=this._getPluginFacade();ORYX.MashupAPI&&ORYX.MashupAPI.loadablePlugins&&ORYX.MashupAPI.loadablePlugins instanceof Array&&(ORYX.availablePlugins=$A(ORYX.availablePlugins).findAll(function(a){return ORYX.MashupAPI.loadablePlugins.include(a.name)}),ORYX.MashupAPI.loadablePlugins.each(function(a){ORYX.availablePlugins.find(function(b){return b.name==a})||ORYX.availablePlugins.push({name:a})}));ORYX.availablePlugins.each(function(a){ORYX.Log.debug("Initializing plugin '%0'",
a.name);if((!a.requires||!a.requires.namespaces||a.requires.namespaces.any(function(a){return 0<=c.indexOf(a)}))&&(!a.notUsesIn||!a.notUsesIn.namespaces||!a.notUsesIn.namespaces.any(function(a){return 0<=c.indexOf(a)}))&&(a.engaged||void 0===a.engaged))try{var f=eval(a.name);if(f){var g=new f(d,a);g.type=a.name;b.push(g);g.engaged=!0}}catch(h){ORYX.Log.warn("Plugin %0 is not available",a.name)}else ORYX.Log.info("Plugin need a stencilset which is not loaded'",a.name)});b.each(function(b){b.registryChanged&&
b.registryChanged(a.pluginsData);b.onSelectionChanged&&a.registerOnEvent(ORYX.CONFIG.EVENT_SELECTION_CHANGED,b.onSelectionChanged.bind(b))});this.loadedPlugins=b;Ext.isMac&&ORYX.Editor.resizeFix();this.registerPluginsOnKeyEvents();this.setSelection()},_createCanvas:function(a,b){a?-1===a.search(/^http/)&&(a=this.getStencilSets().values()[0].namespace()+a):a=this.getStencilSets().values()[0].findRootStencilName();var c=ORYX.Core.StencilSet.stencil(a);c||ORYX.Log.fatal("Initialisation failed, because the stencil with the type %0 is not part of one of the loaded stencil sets.",
a);var d=ORYX.Editor.graft("http://www.w3.org/1999/xhtml",null,["div"]);d.addClassName("ORYX_Editor");this._canvas=new ORYX.Core.Canvas({width:ORYX.CONFIG.CANVAS_WIDTH,height:ORYX.CONFIG.CANVAS_HEIGHT,eventHandlerCallback:this.handleEvents.bind(this),id:this.id,parentNode:d},c);if(b){c=[];for(field in b)c.push({prefix:"oryx",name:field,value:b[field]});this._canvas.deserialize(c)}},_getPluginFacade:function(){this._pluginFacade||(this._pluginFacade={activatePluginByName:this.activatePluginByName.bind(this),
getAvailablePlugins:this.getAvailablePlugins.bind(this),offer:this.offer.bind(this),getStencilSets:this.getStencilSets.bind(this),getRules:this.getRules.bind(this),loadStencilSet:this.loadStencilSet.bind(this),createShape:this.createShape.bind(this),deleteShape:this.deleteShape.bind(this),getSelection:this.getSelection.bind(this),setSelection:this.setSelection.bind(this),updateSelection:this.updateSelection.bind(this),getCanvas:this.getCanvas.bind(this),importJSON:this.importJSON.bind(this),importERDF:this.importERDF.bind(this),
getERDF:this.getERDF.bind(this),getJSON:this.getJSON.bind(this),getSerializedJSON:this.getSerializedJSON.bind(this),checkParsingErrors:this.checkParsingErrors.bind(this),showParsingErrors:this.showParsingErrors.bind(this),executeCommands:this.executeCommands.bind(this),registerOnEvent:this.registerOnEvent.bind(this),unregisterOnEvent:this.unregisterOnEvent.bind(this),raiseEvent:this.handleEvents.bind(this),enableEvent:this.enableEvent.bind(this),disableEvent:this.disableEvent.bind(this),eventCoordinates:this.eventCoordinates.bind(this),
addToRegion:this.addToRegion.bind(this),getModelMetaData:this.getModelMetaData.bind(this)});return this._pluginFacade},executeCommands:function(a){if(a instanceof Array&&0<a.length&&a.all(function(a){return a instanceof ORYX.Core.Command})){this.handleEvents({type:ORYX.CONFIG.EVENT_EXECUTE_COMMANDS,commands:a});var b;a.each(function(a){b=a.execute()});return b}},getJSON:function(){var a=this.getCanvas().toJSON();a.ssextensions=this.getStencilSets().values()[0].extensions().keys();return a},getSerializedJSON:function(){return Ext.encode(this.getJSON())},
checkParsingErrors:function(){var a=ORYX.EDITOR.getSerializedJSON(),b=new XMLHttpRequest,c=ORYX.PATH+"uuidRepository",a="action=checkErrors&pp="+ORYX.PREPROCESSING+"&profile="+ORYX.PROFILE+"&data="+encodeURIComponent(a);b.open("POST",c,!1);b.setRequestHeader("Content-type","application/x-www-form-urlencoded");b.send(a);if(200==b.status){if("true"==b.responseText)return"true";b=DataManager.serialize(ORYX.EDITOR.getCanvas().getSVGRepresentation(!1));c=DataManager.serialize(ORYX.EDITOR.getCanvas().getRootNode().cloneNode(!0));
a=ORYX.EDITOR.getSerializedJSON();a=jsonPath(a.evalJSON(),"$.properties.id");Ext.Ajax.request({url:ORYX.PATH+"transformer",method:"POST",success:function(){},failure:function(){Ext.Msg.minWidth=400;Ext.Msg.alert("Failed to save process SVG.")},params:{fsvg:b,rsvg:c,uuid:ORYX.UUID,profile:ORYX.PROFILE,transformto:"svg",processid:a}});return"false"}return"true"},showParsingErrors:function(){Ext.Msg.minWidth=360;Ext.MessageBox.alert("Unable to perform action","Unable to perform user action due to error(s).<br/>Validate your process before saving, and view server logs to see error details.")},
getERDF:function(){var a=DataManager.serializeDOM(this._getPluginFacade());return a='<?xml version="1.0" encoding="utf-8"?><html xmlns="http://www.w3.org/1999/xhtml" xmlns:b3mn="http://b3mn.org/2007/b3mn" xmlns:ext="http://b3mn.org/2007/ext" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:atom="http://b3mn.org/2007/atom+xhtml"><head profile="http://purl.org/NET/erdf/profile"><link rel="schema.dc" href="http://purl.org/dc/elements/1.1/" /><link rel="schema.dcTerms" href="http://purl.org/dc/terms/ " /><link rel="schema.b3mn" href="http://b3mn.org" /><link rel="schema.oryx" href="http://oryx-editor.org/" /><link rel="schema.raziel" href="http://raziel.org/" /><base href="'+
location.href.split("?")[0]+'" /></head><body>'+a+"</body></html>"},importJSON:function(a,b){try{a=this.renewResourceIds(a)}catch(c){throw c;}if(!a.stencilset)return Ext.Msg.alert(ORYX.I18N.JSONImport.title,ORYX.I18N.JSONImport.invalidJSON),null;if(a.stencilset.namespace&&a.stencilset.namespace!==this.getCanvas().getStencil().stencilSet().namespace())return Ext.Msg.alert(ORYX.I18N.JSONImport.title,String.format(ORYX.I18N.JSONImport.wrongSS,a.stencilset.namespace,this.getCanvas().getStencil().stencilSet().namespace())),
null;var d=new (ORYX.Core.Command.extend({construct:function(a,b,c,d){this.jsonObject=a;this.noSelection=c;this.facade=d;this.shapes;this.connections=[];this.parents=new Hash;this.selection=this.facade.getSelection();this.loadSerialized=b},execute:function(){this.shapes?(this.shapes.each(function(a){this.parents[a.id].add(a)}.bind(this)),this.connections.each(function(a){a[0].setDockedShape(a[1]);a[0].setReferencePoint(a[2])})):(this.shapes=this.loadSerialized(this.jsonObject),this.shapes.each(function(a){if(a.getDockers){var b=
a.getDockers();b&&(0<b.length&&this.connections.push([b.first(),b.first().getDockedShape(),b.first().referencePoint]),1<b.length&&this.connections.push([b.last(),b.last().getDockedShape(),b.last().referencePoint]))}this.parents[a.id]=a.parent}.bind(this)));this.facade.getCanvas().update();this.noSelection?this.facade.updateSelection():this.facade.setSelection(this.shapes)},rollback:function(){var a=this.facade.getSelection();this.shapes.each(function(b){a=a.without(b);this.facade.deleteShape(b)}.bind(this));
this.facade.getCanvas().update();this.facade.setSelection(a)}}))(a,this.loadSerialized.bind(this),b,this._getPluginFacade());this.executeCommands([d]);return d.shapes.clone()},renewResourceIds:function(a){if("string"===Ext.type(a))try{var b=a,a=Ext.decode(a)}catch(c){throw new SyntaxError(c.message);}else b=Ext.encode(a);var d=function(a){return!a?[]:a.map(function(a){return d(a.childShapes).concat(a.resourceId)}).flatten()};d(a.childShapes).each(function(a){var c=ORYX.Editor.provideId();b=b.gsub('"'+
a+'"','"'+c+'"')});return Ext.decode(b)},importERDF:function(a){if(a=this.parseToSerializeObjects(a))return this.importJSON(a,!0)},parseToSerializeObjects:function(a){a.normalize&&a.normalize();try{var b="";new Ajax.Request(ORYX.PATH+"lib/extract-rdf.xsl",{asynchronous:!1,method:"get",onSuccess:function(a){b=a.responseText}.bind(this),onFailure:function(a){ORYX.Log.error("XSL load failed"+a)}.bind(this)});var c=(new DOMParser).parseFromString(b,"text/xml"),d=new XSLTProcessor;document.implementation.createDocument("",
"",null);d.importStylesheet(c);var e=d.transformToFragment(a,document),f=(new XMLSerializer).serializeToString(e)}catch(g){Ext.Msg.alert("Oryx",error),f=""}f=!f.startsWith("<?xml")?'<?xml version="1.0" encoding="UTF-8"?>'+f:f;a=new Ajax.Request(ORYX.CONFIG.ROOT_PATH+"rdf2json",{method:"POST",asynchronous:!1,onSuccess:function(a){Ext.decode(a.responseText)},parameters:{rdf:f}});return Ext.decode(a.transport.responseText)},loadSerialized:function(a){this.getCanvas();this.loadSSExtensions(a.ssextensions);
var b=this.getCanvas().addShapeObjects(a.childShapes,this.handleEvents.bind(this));if(a.properties)for(key in a.properties){var c=a.properties[key];"string"!==typeof c&&(c=Ext.encode(c));this.getCanvas().setProperty("oryx-"+key,c)}this.getCanvas().updateSize();return b},loadSSExtensions:function(a){a&&a.each(function(a){this.loadSSExtension(a)}.bind(this))},loadSSExtension:function(a){if(a){var b=this.getStencilSets()[a["extends"]];b&&(b.addExtension(a),this.getRules().initializeRules(b),this._getPluginFacade().raiseEvent({type:ORYX.CONFIG.EVENT_STENCIL_SET_LOADED}))}},
disableEvent:function(a){a==ORYX.CONFIG.EVENT_KEYDOWN&&(this._keydownEnabled=!1);a==ORYX.CONFIG.EVENT_KEYUP&&(this._keyupEnabled=!1);if(this.DOMEventListeners.keys().member(a)){var b=this.DOMEventListeners.remove(a);this.DOMEventListeners["disable_"+a]=b}},enableEvent:function(a){a==ORYX.CONFIG.EVENT_KEYDOWN&&(this._keydownEnabled=!0);a==ORYX.CONFIG.EVENT_KEYUP&&(this._keyupEnabled=!0);if(this.DOMEventListeners.keys().member("disable_"+a)){var b=this.DOMEventListeners.remove("disable_"+a);this.DOMEventListeners[a]=
b}},registerOnEvent:function(a,b){this.DOMEventListeners.keys().member(a)||(this.DOMEventListeners[a]=[]);this.DOMEventListeners[a].push(b)},unregisterOnEvent:function(a,b){this.DOMEventListeners.keys().member(a)&&(this.DOMEventListeners[a]=this.DOMEventListeners[a].without(b))},getSelection:function(){return this.selection},getStencilSets:function(){return ORYX.Core.StencilSet.stencilSets(this.id)},getRules:function(){return ORYX.Core.StencilSet.rules(this.id)},loadStencilSet:function(a){try{ORYX.Core.StencilSet.loadStencilSet(a,
this.id),this.handleEvents({type:ORYX.CONFIG.EVENT_STENCIL_SET_LOADED})}catch(b){ORYX.Log.warn("Requesting stencil set file failed. ("+b+")")}},offer:function(a){this.pluginsData.member(a)||this.pluginsData.push(a)},registerPluginsOnKeyEvents:function(){this.pluginsData.each(function(a){a.keyCodes&&a.keyCodes.each(function(b){var c;c="key.event."+b.keyAction;b.metaKeys&&(-1<b.metaKeys.indexOf(ORYX.CONFIG.META_KEY_META_CTRL)&&(c+="."+ORYX.CONFIG.META_KEY_META_CTRL),-1<b.metaKeys.indexOf(ORYX.CONFIG.META_KEY_ALT)&&
(c+="."+ORYX.CONFIG.META_KEY_ALT),-1<b.metaKeys.indexOf(ORYX.CONFIG.META_KEY_SHIFT)&&(c+="."+ORYX.CONFIG.META_KEY_SHIFT));b.keyCode&&(c+="."+b.keyCode);ORYX.Log.debug("Register Plugin on Key Event: %0",c);this.registerOnEvent(c,a.functionality)}.bind(this))}.bind(this))},setSelection:function(a,b,c){a||(a=[]);a=a.compact().findAll(function(a){return a instanceof ORYX.Core.Shape});a.first()instanceof ORYX.Core.Canvas&&(a=[]);if(c||!(a.length===this.selection.length&&this.selection.all(function(b){return a.include(b)})))this.selection=
a,this._subSelection=b,this.handleEvents({type:ORYX.CONFIG.EVENT_SELECTION_CHANGED,elements:a,subSelection:b})},updateSelection:function(){this.setSelection(this.selection,this._subSelection,!0)},getCanvas:function(){return this._canvas},createShape:function(a){if(a&&a.serialize&&a.serialize instanceof Array){var b=a.serialize.find(function(a){return"oryx-type"==a.prefix+"-"+a.name}),b=ORYX.Core.StencilSet.stencil(b.value),c="node"==b.type()?new ORYX.Core.Node({eventHandlerCallback:this.handleEvents.bind(this)},
b):new ORYX.Core.Edge({eventHandlerCallback:this.handleEvents.bind(this)},b);this.getCanvas().add(c);c.deserialize(a.serialize);return c}if(!a||!a.type||!a.namespace)throw"To create a new shape you have to give an argument with type and namespace";var b=this.getCanvas(),c=a.type,d=ORYX.Core.StencilSet.stencilSet(a.namespace),c="node"==d.stencil(c).type()?new ORYX.Core.Node({eventHandlerCallback:this.handleEvents.bind(this)},d.stencil(c)):new ORYX.Core.Edge({eventHandlerCallback:this.handleEvents.bind(this)},
d.stencil(c));a.template&&(c._jsonStencil.properties=a.template._jsonStencil.properties,c.postProcessProperties());a.parent&&c instanceof ORYX.Core.Node?a.parent.add(c):b.add(c);var e=a.position?a.position:{x:100,y:200},f;a.connectingType&&a.connectedShape&&!(c instanceof ORYX.Core.Edge)&&(f=new ORYX.Core.Edge({eventHandlerCallback:this.handleEvents.bind(this)},d.stencil(a.connectingType)),f.dockers.first().setDockedShape(a.connectedShape),d=(d=a.connectedShape.getDefaultMagnet())?d.bounds.center():
a.connectedShape.bounds.midPoint(),f.dockers.first().setReferencePoint(d),f.dockers.last().setDockedShape(c),f.dockers.last().setReferencePoint(c.getDefaultMagnet().bounds.center()),b.add(f));c instanceof ORYX.Core.Edge&&a.connectedShape?(c.dockers.first().setDockedShape(a.connectedShape),a.connectedShape instanceof ORYX.Core.Node?(c.dockers.first().setReferencePoint(a.connectedShape.getDefaultMagnet().bounds.center()),c.dockers.last().bounds.centerMoveTo(e)):c.dockers.first().setReferencePoint(a.connectedShape.bounds.midPoint())):
(a=c.bounds,c instanceof ORYX.Core.Node&&1==c.dockers.length&&(a=c.dockers.first().bounds),a.centerMoveTo(e),e=a.upperLeft(),a.moveBy(-Math.min(e.x,0),-Math.min(e.y,0)),e=a.lowerRight(),a.moveBy(-Math.max(e.x-b.bounds.width(),0),-Math.max(e.y-b.bounds.height(),0)));c instanceof ORYX.Core.Edge&&c._update(!1);c instanceof ORYX.Core.Edge||this.setSelection([c]);f&&f.alignDockers&&f.alignDockers();c.alignDockers&&c.alignDockers();return c},deleteShape:function(a){a&&a.parent&&(a.parent.remove(a),a.getOutgoingShapes().each(function(b){(b=
b.getDockers().first())&&b.getDockedShape()==a&&b.setDockedShape(void 0)}.bind(this)),a.getIncomingShapes().each(function(b){(b=b.getDockers().last())&&b.getDockedShape()==a&&b.setDockedShape(void 0)}.bind(this)),a.getDockers().each(function(a){a.setDockedShape(void 0)}),this._getPluginFacade().raiseEvent({type:ORYX.CONFIG.EVENT_SHAPE_DELETED,value:a}))},getModelMetaData:function(){return this.modelMetaData},_executeEventImmediately:function(a){this.DOMEventListeners.keys().member(a.event.type)&&
this.DOMEventListeners[a.event.type].each(function(b){b(a.event,a.arg)}.bind(this))},_executeEvents:function(){for(this._queueRunning=!0;0<this._eventsQueue.length;)this._executeEventImmediately(this._eventsQueue.shift());this._queueRunning=!1},handleEvents:function(a,b){ORYX.Log.trace("Dispatching event type %0 on %1",a.type,b);switch(a.type){case ORYX.CONFIG.EVENT_MOUSEDOWN:this._handleMouseDown(a,b);break;case ORYX.CONFIG.EVENT_MOUSEMOVE:this._handleMouseMove(a,b);break;case ORYX.CONFIG.EVENT_MOUSEUP:this._handleMouseUp(a,
b);break;case ORYX.CONFIG.EVENT_MOUSEOVER:this._handleMouseHover(a,b);break;case ORYX.CONFIG.EVENT_MOUSEOUT:this._handleMouseOut(a,b)}a.forceExecution?this._executeEventImmediately({event:a,arg:b}):this._eventsQueue.push({event:a,arg:b});this._queueRunning||this._executeEvents();return!1},catchKeyUpEvents:function(a){if(this._keyupEnabled&&(a||(a=window.event),!["INPUT","TEXTAREA"].include(a.target.tagName.toUpperCase()))){var b=this.createKeyCombEvent(a,ORYX.CONFIG.KEY_ACTION_UP);ORYX.Log.debug("Key Event to handle: %0",
b);this.handleEvents({type:b,event:a})}},catchKeyDownEvents:function(a){if(this._keydownEnabled&&(a||(a=window.event),!["INPUT","TEXTAREA"].include(a.target.tagName.toUpperCase()))){var b=this.createKeyCombEvent(a,ORYX.CONFIG.KEY_ACTION_DOWN);ORYX.Log.debug("Key Event to handle: %0",b);this.handleEvents({type:b,event:a})}},createKeyCombEvent:function(a,b){var c=a.which||a.keyCode,d="key.event";b&&(d+="."+b);if(a.ctrlKey||a.metaKey)d+="."+ORYX.CONFIG.META_KEY_META_CTRL;a.altKey&&(d+="."+ORYX.CONFIG.META_KEY_ALT);
a.shiftKey&&(d+="."+ORYX.CONFIG.META_KEY_SHIFT);return d+"."+c},_handleMouseDown:function(a,b){this.getCanvas().focus();var c=a.currentTarget,d=null!==b&&void 0!==b&&b.isSelectable,e=null!==b&&void 0!==b&&b.isMovable,f=a.shiftKey||a.ctrlKey,g=0===this.selection.length,h=this.selection.member(b);d&&g?(this.setSelection([b]),ORYX.Log.trace("Rule #1 applied for mouse down on %0",c.id)):d&&!g&&!f&&!h?(this.setSelection([b]),ORYX.Log.trace("Rule #3 applied for mouse down on %0",c.id)):d&&f&&!h?(d=this.selection.clone(),
d.push(b),this.setSelection(d),ORYX.Log.trace("Rule #4 applied for mouse down on %0",c.id)):d&&h&&f?(d=this.selection.clone(),this.setSelection(d.without(b)),ORYX.Log.trace("Rule #6 applied for mouse down on %0",b.id)):!d&&!e?(this.setSelection([]),ORYX.Log.trace("Rule #2 applied for mouse down on %0",c.id)):!d&&e&&!(b instanceof ORYX.Core.Controls.Docker)?ORYX.Log.trace("Rule #7 applied for mouse down on %0",c.id):d&&h&&!f&&(this._subSelection=this._subSelection!=b?b:void 0,this.setSelection(this.selection,
this._subSelection),ORYX.Log.trace("Rule #8 applied for mouse down on %0",c.id))},_handleMouseMove:function(){},_handleMouseUp:function(a){this.getCanvas();this.eventCoordinates(a)},_handleMouseHover:function(){},_handleMouseOut:function(){},eventCoordinates:function(a){var b=this.getCanvas(),c=b.node.ownerSVGElement.createSVGPoint();c.x=a.clientX;c.y=a.clientY;a=b.node.getScreenCTM();return c.matrixTransform(a.inverse())}};ORYX.Editor=Clazz.extend(ORYX.Editor);
ORYX.Editor.createByUrl=function(a,b){b||(b={});new Ajax.Request(a,{method:"GET",onSuccess:function(a){var d=Ext.decode(a.responseText),d=Ext.applyIf(d,b);new ORYX.Editor(d);if("function"==typeof b.onSuccess)b.onSuccess(a)}.bind(this),onFailure:function(a){if("function"==typeof b.onFailure)b.onFailure(a)}.bind(this)})};
ORYX.Editor.graft=function(a,b,c,d){var d=d||b&&b.ownerDocument||document,e;if(void 0===c)throw"Can't graft an undefined value";if(c.constructor==String)e=d.createTextNode(c);else for(var f=0;f<c.length;f++){if(0===f&&c[f].constructor==String){var g;if(g=c[f].match(/^([a-z][a-z0-9]*)\.([^\s\.]+)$/i)){e=d.createElementNS(a,g[1]);e.setAttributeNS(null,"class",g[2]);continue}if(g=c[f].match(/^([a-z][a-z0-9]*)$/i)){e=d.createElementNS(a,g[1]);continue}e=d.createElementNS(a,"span");e.setAttribute(null,
"class","namelessFromLOL")}if(void 0===c[f])throw"Can't graft an undefined value in a list!";if(c[f].constructor==String||c[f].constructor==Array)this.graft(a,e,c[f],d);else if(c[f].constructor==Number)this.graft(a,e,c[f].toString(),d);else if(c[f].constructor==Object)for(var h in c[f])e.setAttributeNS(null,h,c[f][h])}b&&b.appendChild(e);return e};
ORYX.Editor.provideId=function(){for(var a=[],b=0;36>b;b++)a[b]=Math.floor(16*Math.random());a[14]=4;a[19]=a[19]&3|8;for(b=0;36>b;b++)a[b]="0123456789ABCDEF"[a[b]];a[8]=a[13]=a[18]=a[23]="-";return"_"+a.join("")};ORYX.Editor.resizeFix=function(){ORYX.Editor._resizeFixTimeout||(ORYX.Editor._resizeFixTimeout=window.setTimeout(function(){window.resizeBy(1,1);window.resizeBy(-1,-1);ORYX.Editor._resizefixTimeout=null},100))};
ORYX.Editor.Cookie={callbacks:[],onChange:function(a,b){this.callbacks.push(a);this.start(b)},start:function(a){if(!this.pe){var b=document.cookie;this.pe=new PeriodicalExecuter(function(){b!=document.cookie&&(b=document.cookie,this.callbacks.each(function(a){a(this.getParams())}.bind(this)))}.bind(this),(a||1E4)/1E3)}},stop:function(){this.pe&&(this.pe.stop(),this.pe=null)},getParams:function(){var a={};document.cookie.split("; ").each(function(b){a[b.split("=")[0]]=b.split("=")[1]});return a},toString:function(){return document.cookie}};
ORYX.Editor.SVGClassElementsAreAvailable=!0;
ORYX.Editor.setMissingClasses=function(){try{SVGElement}catch(a){ORYX.Editor.SVGClassElementsAreAvailable=!1,SVGSVGElement=document.createElementNS("http://www.w3.org/2000/svg","svg").toString(),SVGGElement=document.createElementNS("http://www.w3.org/2000/svg","g").toString(),SVGPathElement=document.createElementNS("http://www.w3.org/2000/svg","path").toString(),SVGTextElement=document.createElementNS("http://www.w3.org/2000/svg","text").toString(),SVGRectElement=document.createElementNS("http://www.w3.org/2000/svg",
"rect").toString(),SVGImageElement=document.createElementNS("http://www.w3.org/2000/svg","image").toString(),SVGCircleElement=document.createElementNS("http://www.w3.org/2000/svg","circle").toString(),SVGEllipseElement=document.createElementNS("http://www.w3.org/2000/svg","ellipse").toString(),SVGLineElement=document.createElementNS("http://www.w3.org/2000/svg","line").toString(),SVGPolylineElement=document.createElementNS("http://www.w3.org/2000/svg","polyline").toString(),SVGPolygonElement=document.createElementNS("http://www.w3.org/2000/svg",
"polygon").toString()}};ORYX.Editor.checkClassType=function(a,b){return ORYX.Editor.SVGClassElementsAreAvailable?a instanceof b:a==b};
ORYX.Editor.makeExtModalWindowKeysave=function(a){Ext.override(Ext.Window,{beforeShow:function(){delete this.el.lastXY;delete this.el.lastLT;if(void 0===this.x||void 0===this.y){var b=this.el.getAlignToXY(this.container,"c-c"),b=this.el.translatePoints(b[0],b[1]);this.x=void 0===this.x?b.left:this.x;this.y=void 0===this.y?b.top:this.y}this.el.setLeftTop(this.x,this.y);this.expandOnShow&&this.expand(!1);this.modal&&(a.disableEvent(ORYX.CONFIG.EVENT_KEYDOWN),Ext.getBody().addClass("x-body-masked"),
this.mask.setSize(Ext.lib.Dom.getViewWidth(!0),Ext.lib.Dom.getViewHeight(!0)),this.mask.show())},afterHide:function(){this.proxy.hide();(this.monitorResize||this.modal||this.constrain||this.constrainHeader)&&Ext.EventManager.removeResizeListener(this.onWindowResize,this);this.modal&&(this.mask.hide(),a.enableEvent(ORYX.CONFIG.EVENT_KEYDOWN),Ext.getBody().removeClass("x-body-masked"));this.keyMap&&this.keyMap.disable();this.fireEvent("hide",this)},beforeDestroy:function(){this.modal&&a.enableEvent(ORYX.CONFIG.EVENT_KEYDOWN);
Ext.destroy(this.resizer,this.dd,this.proxy,this.mask);Ext.Window.superclass.beforeDestroy.call(this)}})};ORYX.Utils={getParamFromUrl:function(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");a=RegExp("[\\?&]"+a+"=([^&#]*)").exec(window.location.href);return null==a?null:a[1]},adjustGradient:function(a,b){if(ORYX.CONFIG.DISABLE_GRADIENT&&a){var c=b.getAttributeNS(null,"stop-color")||"#ffffff";$A(a.getElementsByTagName("stop")).each(function(a){a!=b&&a.setAttributeNS(null,"stop-color",c)})}}};var ERDF={LITERAL:1,RESOURCE:2,DELIMITERS:[".","-"],HASH:"#",HYPHEN:"-",schemas:[],callback:void 0,log:void 0,init:function(a){ERDF.callback=a;ERDF.registerSchema("schema",XMLNS.SCHEMA);ERDF.registerSchema("rdfs",XMLNS.RDFS)},run:function(){return ERDF._checkProfile()&&ERDF.parse()},parse:function(){ERDF.__startTime=new Date;var a=document.getElementsByTagNameNS(XMLNS.XHTML,"body"),b={type:ERDF.RESOURCE,value:""},a=ERDF._parseDocumentMetadata()&&ERDF._parseFromTag(a[0],b);ERDF.__stopTime=new Date;
return a},_parseDocumentMetadata:function(){var a=document.getElementsByTagNameNS(XMLNS.XHTML,"head"),b=a[0].getElementsByTagNameNS(XMLNS.XHTML,"link"),a=a[0].getElementsByTagNameNS(XMLNS.XHTML,"meta");$A(b).each(function(a){var b=a.getAttribute("rel"),e=a.getAttribute("rev"),a=a.getAttribute("href");ERDF._parseTriplesFrom(ERDF.RESOURCE,"",b,ERDF.RESOURCE,a);ERDF._parseTriplesFrom(ERDF.RESOURCE,a,e,ERDF.RESOURCE,"")});$A(a).each(function(a){var b=a.getAttribute("name"),a=a.getAttribute("content");
ERDF._parseTriplesFrom(ERDF.RESOURCE,"",b,ERDF.LITERAL,a)});return!0},_parseFromTag:function(a,b,c){if(a.namespaceURI==XMLNS.XHTML){c||(c=0);var d=a.getAttribute("id");if(a.nodeName.endsWith(":a")||"a"==a.nodeName){var e=a.getAttribute("rel"),f=a.getAttribute("rev"),g=a.getAttribute("href"),h=a.getAttribute("title"),j=a.textContent;ERDF._parseTriplesFrom(b.type,b.value,e,ERDF.RESOURCE,g,function(a){ERDF._parseTriplesFrom(a.object.type,a.object.value,"rdfs.label",ERDF.LITERAL,h?h:j)});ERDF._parseTriplesFrom(b.type,
b.value,f,ERDF.RESOURCE,"");ERDF._parseTypeTriplesFrom(b.type,b.value,e)}else if(a.nodeName.endsWith(":img")||"img"==a.nodeName){var e=a.getAttribute("class"),g=a.getAttribute("src"),k=a.getAttribute("alt");ERDF._parseTriplesFrom(b.type,b.value,e,ERDF.RESOURCE,g,function(a){ERDF._parseTriplesFrom(a.object.type,a.object.value,"rdfs.label",ERDF.LITERAL,k)})}e=a.getAttribute("class");h=a.getAttribute("title");j=a.textContent;ERDF._parseTriplesFrom(b.type,b.value,e,ERDF.LITERAL,h?h:j);d&&(b={type:ERDF.RESOURCE,
value:ERDF.HASH+d});ERDF._parseTypeTriplesFrom(b.type,b.value,e);(a=a.childNodes)&&$A(a).each(function(a){a.nodeType==a.ELEMENT_NODE&&ERDF._parseFromTag(a,b,c+1)})}},_parseTriplesFrom:function(a,b,c,d,e,f){c&&c.toLowerCase().split(" ").each(function(a){var c=ERDF.schemas.find(function(b){return ERDF.DELIMITERS.find(function(c){return a.startsWith(b.prefix+c)})});c&&e&&(a=a.substring(c.prefix.length+1,a.length),c=ERDF.registerTriple(new ERDF.Resource(b),{prefix:c.prefix,name:a},d==ERDF.RESOURCE?new ERDF.Resource(e):
new ERDF.Literal(e)),f&&f(c))})},_parseTypeTriplesFrom:function(a,b,c,d){c&&c.toLowerCase().split(" ").each(function(c){var f=ERDF.schemas.find(function(a){return ERDF.DELIMITERS.find(function(b){return c.startsWith(ERDF.HYPHEN+a.prefix+b)})});f&&b&&(c=c.substring(f.prefix.length+2,c.length),f=ERDF.registerTriple(a==ERDF.RESOURCE?new ERDF.Resource(b):new ERDF.Literal(b),{prefix:"rdf",name:"type"},new ERDF.Resource(f.namespace+c)),d&&d(f))})},_checkProfile:function(){var a=document.getElementsByTagNameNS(XMLNS.XHTML,
"head")[0].getAttribute("profile");return a&&a.split(" ").member(XMLNS.ERDF)?!0:!1},__stripHashes:function(a){return a&&"#"==a.substring(0,1)?a.substring(1,a.length):a},registerSchema:function(a,b){ERDF.schemas.push({prefix:a,namespace:b})},registerTriple:function(a,b,c){"schema"==b.prefix.toLowerCase()&&this.registerSchema(b.name,c.value);a=new ERDF.Triple(a,b,c);ERDF.callback(a);return a},__enhanceObject:function(){this.isResource=function(){return this.type==ERDF.RESOURCE};this.isLocal=function(){return this.isResource()&&
this.value.startsWith("#")};this.isCurrentDocument=function(){return this.isResource()&&""==this.value};this.getId=function(){return this.isLocal()?ERDF.__stripHashes(this.value):!1};this.isLiteral=function(){return this.type==ERDF.LIITERAL}},serialize:function(a){return a?a.constructor==String?a:a.constructor==Boolean?a?"true":"false":a.toString():""},Triple:function(a,b,c){this.subject=a;this.predicate=b;this.object=c;this.toString=function(){return"[ERDF.Triple] "+this.subject.toString()+" "+this.predicate.prefix+
":"+this.predicate.name+" "+this.object.toString()}}};ERDF.Resource=function(a){this.type=ERDF.RESOURCE;this.value=a;ERDF.__enhanceObject.apply(this);this.toString=function(){return"&lt;"+this.value+"&gt;"}};ERDF.Literal=function(a){this.type=ERDF.LITERAL;this.value=ERDF.serialize(a);ERDF.__enhanceObject.apply(this);this.toString=function(){return'"'+this.value+'"'}};var USE_ASYNCHRONOUS_REQUESTS=!0,DISCARD_UNUSED_TRIPLES=!0,PREFER_SPANS_OVER_DIVS=!0,PREFER_TITLE_OVER_TEXTNODE=!1,RESOURCE_ID_PREFIX="resource",SHOW_DEBUG_ALERTS_WHEN_SAVING=!1,SHOW_EXTENDED_DEBUG_INFORMATION=!1,USE_ARESS_WORKAROUNDS=!0,RESOURCE_CREATED=1,RESOURCE_REMOVED=2,RESOURCE_SAVED=4,RESOURCE_RELOADED=8,RESOURCE_SYNCHRONIZED=16,TRIPLE_REMOVE=1,TRIPLE_ADD=2,TRIPLE_RELOAD=4,TRIPLE_SAVE=8,PROCESSDATA_REF="processdata",DataManager={init:function(){ERDF.init(DataManager._registerTriple);DataManager.__synclocal()},
_triples:[],_registerTriple:function(a){DataManager._triples.push(a)},__synclocal:function(){DataManager._triples=[];ERDF.run()},__synchronizeShape:function(a){var b=ResourceManager.getResource(a.resourceId);a.serialize().each(function(b){var d="resource"==b.type,b=new ERDF.Triple(new ERDF.Resource(a.resourceId),{prefix:b.prefix,name:b.name},d?new ERDF.Resource(b.value):new ERDF.Literal(b.value));DataManager.setObject(b)});return b},__storeShape:function(a){DataManager.__synchronizeShape(a).save()},
__forceExistance:function(a){if($(a.resourceId)){var b=$(a.resourceId);$A(b.childNodes).each(function(a){b.removeChild(a)})}else $$("."+PROCESSDATA_REF)[0]||DataManager.graft(XMLNS.XHTML,document.getElementsByTagNameNS(XMLNS.XHTML,"body").item(0),["div",{"class":PROCESSDATA_REF,style:"display:none;"}]),DataManager.graft(XMLNS.XHTML,$$("."+PROCESSDATA_REF)[0],["div",{id:a.resourceId,"class":a instanceof ORYX.Core.Canvas?"-oryx-canvas":void 0}])},__persistShape:function(a){var b=a.serialize(),c=new ERDF.Resource(a.resourceId);
DataManager.removeTriples(DataManager.query(c,void 0,void 0));b.each(function(a){var b="resource"==a.type?new ERDF.Resource(a.value):new ERDF.Literal(a.value);DataManager.addTriple(new ERDF.Triple(c,{prefix:a.prefix,name:a.name},b))})},__persistDOM:function(a){var b=a.getCanvas().getChildShapes(!0),c="";b.each(function(a){DataManager.__forceExistance(a)});DataManager.__renderCanvas(a);c+=DataManager.serialize($(ERDF.__stripHashes(a.getCanvas().resourceId)),!0);b.each(function(a){DataManager.__persistShape(a);
c+=DataManager.serialize($(ERDF.__stripHashes(a.resourceId)),!0)});return c},__renderCanvas:function(a){var b=a.getCanvas(),a=a.getStencilSets(),c=b.getChildShapes(!0);DataManager.__forceExistance(b);DataManager.__persistShape(b);var d=new ERDF.Resource(b.resourceId);DataManager.removeTriples(DataManager.query(d,void 0,void 0));DataManager.addTriple(new ERDF.Triple(d,{prefix:"oryx",name:"mode"},new ERDF.Literal("writable")));DataManager.addTriple(new ERDF.Triple(d,{prefix:"oryx",name:"mode"},new ERDF.Literal("fullscreen")));
a.values().each(function(a){DataManager.addTriple(new ERDF.Triple(d,{prefix:"oryx",name:"stencilset"},new ERDF.Resource(a.source().replace(/&/g,"%26"))));DataManager.addTriple(new ERDF.Triple(d,{prefix:"oryx",name:"ssnamespace"},new ERDF.Resource(a.namespace())));a.extensions().keys().each(function(a){DataManager.addTriple(new ERDF.Triple(d,{prefix:"oryx",name:"ssextension"},new ERDF.Literal(a)))})});c.each(function(a){DataManager.addTriple(new ERDF.Triple(d,{prefix:"oryx",name:"render"},new ERDF.Resource("#"+
a.resourceId)))})},__counter:0,__provideId:function(){for(;$(RESOURCE_ID_PREFIX+DataManager.__counter);)DataManager.__counter++;return RESOURCE_ID_PREFIX+DataManager.__counter},serializeDOM:function(a){return DataManager.__persistDOM(a)},syncGlobal:function(a){return DataManager.__syncglobal(a)},__syncglobal:function(a){a=a.getCanvas().getChildShapes(!0);a.select(function(a){return!$(a.resourceId)}).each(function(a){var c=USE_ARESS_WORKAROUNDS?ResourceManager.__createResource('<div xmlns="http://www.w3.org/1999/xhtml"><span class="raziel-type">'+
a.properties["raziel-type"]+"</span></div>"):ResourceManager.__createResource();a.resourceId=c.id()});a.each(function(a){DataManager.__storeShape(a)})},serialize:function(a,b){if(a.nodeType==a.ELEMENT_NODE){var c=$A(a.childNodes),d=$A(a.attributes);if((new String(a.getAttribute("class"))).split(" ").member("transient"))return"";var e="<"+a.nodeName;b||(e+=' xmlns="'+(a.namespaceURI?a.namespaceURI:XMLNS.XHTML)+'" xmlns:oryx="http://oryx-editor.org"');d.each(function(a){e+=" "+a.nodeName+'="'+a.nodeValue+
'"'});0==c.length?e+="/>":(e+=">",c.each(function(a){e+=DataManager.serialize(a,!0)}),e+="</"+a.nodeName+">");return e}if(a.nodeType==a.TEXT_NODE)return a.nodeValue},addTriple:function(a){if(!a.subject.type==ERDF.LITERAL)throw"Cannot add the triple "+a.toString()+" because the subject is not a resource.";var b=ERDF.__stripHashes(a.subject.value),c=$(b);if(!c)throw"Cannot add the triple "+a.toString()+' because the subject "'+b+'" is not in the document.';a.object.type==ERDF.LITERAL?DataManager.graft(XMLNS.XHTML,
c,["span",{"class":a.predicate.prefix+"-"+a.predicate.name},a.object.value.escapeHTML()]):DataManager.graft(XMLNS.XHTML,c,["a",{rel:a.predicate.prefix+"-"+a.predicate.name,href:a.object.value}]);return!0},removeTriples:function(a){return a.select(function(a){return DataManager.__removeTriple(a)})},removeTriple:function(a){return DataManager.__removeTriple(a)},__removeTriple:function(a){if(!a.subject.type==ERDF.LITERAL)throw"Cannot remove the triple "+a.toString()+" because the subject is not a resource.";
var b=ERDF.__stripHashes(a.subject.value),b=$(b);if(!b)throw"Cannot remove the triple "+a.toString()+" because the subject is not in the document.";if(a.object.type==ERDF.LITERAL)return DataManager.__removeTripleRecursively(a,b)},__removeTripleRecursively:function(a,b){if(b.nodeType!=b.ELEMENT_NODE)return!1;var c=new String(b.getAttribute("class")),d=$A(b.childNodes);if(c.include(a.predicate.prefix+"-"+a.predicate.name))return c=b.textContent,a.object.type==ERDF.LITERAL&&a.object.value==c&&b.parentNode.removeChild(b),
!0;d.each(function(b){DataManager.__removeTripleRecursively(a,b)});return!1},graft:function(a,b,c,d){var d=d||b&&b.ownerDocument||document,e;if(void 0===c)echo("Can't graft an undefined value");else if(c.constructor==String)e=d.createTextNode(c);else for(var f=0;f<c.length;f++){if(0===f&&c[f].constructor==String){var g=c[f].match(/^([a-z][a-z0-9]*)\.([^\s\.]+)$/i);if(g){e=d.createElementNS(a,g[1]);e.setAttributeNS(null,"class",g[2]);continue}if(g=c[f].match(/^([a-z][a-z0-9]*)$/i)){e=d.createElementNS(a,
g[1]);continue}e=d.createElementNS(a,"span");e.setAttribute(null,"class","namelessFromLOL")}if(void 0===c[f])echo("Can't graft an undefined value in a list!");else if(c[f].constructor==String||c[f].constructor==Array)this.graft(a,e,c[f],d);else if(c[f].constructor==Number)this.graft(a,e,c[f].toString(),d);else if(c[f].constructor==Object)for(var h in c[f])e.setAttributeNS(null,h,c[f][h]);else if(c[f].constructor==Boolean)this.graft(a,e,c[f]?"true":"false",d);else throw"Object "+c[f]+" is inscrutable as an graft arglet.";
}b&&b.appendChild(e);return Element.extend(e)},setObject:function(a){var b=DataManager.query(a.subject,a.predicate,void 0);DataManager.removeTriples(b);DataManager.addTriple(a);return!0},query:function(a,b,c){return DataManager._triples.select(function(d){var e=a?d.subject.type==a.type&&d.subject.value==a.value:!0;b&&(e=(e=e&&(b.prefix?d.predicate.prefix==b.prefix:!0))&&(b.name?d.predicate.name==b.name:!0));return e=e&&(c?d.object.type==c.type&&d.object.value==c.value:!0)})}};Kickstart.register(DataManager.init);
function assert(a,b){if(!a)throw b;}function DMCommand(a,b){this.action=a;this.triple=b;this.toString=function(){return"Command("+a+", "+b+")"}}function DMCommandHandler(a){this.__setNext=function(){var b=this.__next;this.__next=a;return b?b:!0};this.__setNext(a);this.__invokeNext=function(a){return this.__next?this.__next.handle(a):!1};this.handle=function(a){return this.process(a)?!0:this.__invokeNext(a)};this.process=function(){return!1}}
function MetaTagHandler(a){DMCommandHandler.apply(this,[a]);this.process=function(a){with(a.triple)if(!(subject instanceof ERDF.Resource&&subject.isCurrentDocument()&&object instanceof ERDF.Literal))return!1}}var chain=new MetaTagHandler,command=new DMCommand(TRIPLE_ADD,new ERDF.Triple(new ERDF.Resource(""),"rdf:tool",new ERDF.Literal("")));
ResourceManager={__corrupt:!1,__latelyCreatedResource:void 0,__listeners:$H(),__token:1,addListener:function(a,b){if(!(a instanceof Function))throw"Resource event listener is not a function!";if(!b)throw"Invalid mask for resource event listener registration.";var c={listener:a,mask:b},d=ResourceManager.__token++;ResourceManager.__listeners[d]=c;return d},removeListener:function(a){return ResourceManager.__listners.remove(a)},__Event:function(a,b){this.action=a;this.resourceId=b},__dispatchEvent:function(a){ResourceManager.__listeners.values().each(function(b){if(a.action&
b.mask)return b.listener(a)})},getResource:function(a){var a=ERDF.__stripHashes(a),b=DataManager.query(new ERDF.Resource("#"+a),{prefix:"raziel",name:"entry"},void 0);if(1==b.length&&b[0].object.isResource())return new ResourceManager.__Resource(a,b[0].object.value);throw"Resource with id "+a+" not recognized as such. "+(1<b.length?" There is more than one raziel:entry URL.":" There is no raziel:entry URL.");},__createResource:function(a){var b=DataManager.query(new ERDF.Resource(""),{prefix:"raziel",
name:"collection"},void 0);if(1==b.length&&b[0].object.isResource()){var c=void 0;ResourceManager.__request("POST",b[0].object.value,a?a:'<div xmlns="http://www.w3.org/1999/xhtml"></div>',function(){var a=this.responseXML.childNodes[0],b=a.getAttribute("id");$$("."+PROCESSDATA_REF)[0]||DataManager.graft(XMLNS.XHTML,document.getElementsByTagNameNS(XMLNS.XHTML,"body").item(0),["div",{"class":PROCESSDATA_REF,style:"display:none;"}]);$$("."+PROCESSDATA_REF)[0].appendChild(a.cloneNode(!0));DataManager.__synclocal();
c=new ResourceManager.getResource(b);ResourceManager.__resourceActionSucceeded(this,RESOURCE_CREATED,void 0)},function(){ResourceManager.__resourceActionFailed(this,RESOURCE_CREATED,void 0)},!1);return c}throw"Could not create resource! raziel:collection URL is missing!";},__Resource:function(a,b){this.__id=a;this.__url=b;this.id=function(){return this.__id};this.url=function(){return this.__url};this.reload=function(){var a=this.__id;ResourceManager.__request("GET",this.__url,null,function(){ResourceManager.__resourceActionSucceeded(this,
RESOURCE_RELOADED,a)},function(){ResourceManager.__resourceActionFailed(this,RESURCE_RELOADED,a)},USE_ASYNCHRONOUS_REQUESTS)};this.save=function(a){var b=this.__url,e=this.__id;data=DataManager.serialize($(e));ResourceManager.__request("PUT",b,data,function(){ResourceManager.__resourceActionSucceeded(this,a?RESOURCE_SAVED|RESOURCE_SYNCHRONIZED:RESOURCE_SAVED,e)},function(){ResourceManager.__resourceActionFailed(this,a?RESOURCE_SAVED|RESOURCE_SYNCHRONIZED:RESOURCE.SAVED,e)},USE_ASYNCHRONOUS_REQUESTS)};
this.remove=function(){var a=this.__id;ResourceManager.__request("DELETE",this.__url,null,function(){ResourceManager.__resourceActionSucceeded(this,RESOURCE_REMOVED,a)},function(){ResourceManager.__resourceActionFailed(this,RESOURCE_REMOVED,a)},USE_ASYNCHRONOUS_REQUESTS)}},request:function(a,b){var c={method:"get",asynchronous:!0,parameters:{}};Object.extend(c,b||{});var d=Hash.toQueryString(c.parameters);d&&(a+=(a.include("?")?"&":"?")+d);return ResourceManager.__request(c.method,a,c.data,c.onSuccess instanceof
Function?function(){c.onSuccess(this)}:void 0,c.onFailure instanceof Function?function(){c.onFailure(this)}:void 0,c.asynchronous&&USE_ASYNCHRONOUS_REQUESTS,c.headers)},__request:function(a,b,c,d,e,f,g){var h=Try.these(function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")});if(!h){if(!this.__corrupt)throw"This browser does not provide any AJAX functionality. You will not be able to use the software provided with the page you are viewing. Please consider installing appropriate extensions.";
this.__corrupt=!0;return!1}d instanceof Function&&(h.onload=d);e instanceof Function&&(h.onerror=e);var j=$H(g);j.keys().each(function(a){h.setRequestHeader(a,j[a])});try{SHOW_DEBUG_ALERTS_WHEN_SAVING&&alert(a+" "+b+"\n"+SHOW_EXTENDED_DEBUG_INFORMATION?c:""),h.open(a,b,!f?!1:!0),h.send(c)}catch(k){return!1}return!0},__resourceActionSucceeded:function(a,b,c){var d=a.status,e=a.responseText;SHOW_DEBUG_ALERTS_WHEN_SAVING&&alert(d+" "+url+"\n"+SHOW_EXTENDED_DEBUG_INFORMATION?data:"");if(300<=d)throw"The server responded with an error: "+
d+"\n"+(SHOW_EXTENDED_DEBUG_INFORMATION?+data:"If you need additional information here, including the data sent by the server, consider setting SHOW_EXTENDED_DEBUG_INFORMATION to true.");switch(b){case RESOURCE_REMOVED:e=a.responseXML;a=e.childNodes[0];c=a.getAttribute("id");d=document.getElementById(c);d.parentNode.removeChild(d);break;case RESOURCE_CREATED:break;case RESOURCE_SAVED|RESOURCE_SYNCHRONIZED:DataManager.__synclocal();case RESOURCE_SAVED:break;case RESOURCE_RELOADED:e=a.responseXML;a=
e.childNodes[0];c=a.getAttribute("id");d=document.getElementById(c);d.parentNode.removeChild(d);$$(PROCESSDATA_REF)[0]||DataManager.graft(XMLNS.XHTML,document.getElementsByTagNameNS(XMLNS.XHTML,"body").item(0),["div",{"class":PROCESSDATA_REF,style:"display:none;"}]);$$(PROCESSDATA_REF)[0].appendChild(a.cloneNode(!0));DataManager.__synclocal();break;default:DataManager.__synclocal()}ResourceManager.__dispatchEvent(new ResourceManager.__Event(b,c))},__resourceActionFailed:function(){throw"Fatal: Resource action failed. There is something horribly wrong with either the server, the transport protocol or your online status. Sure you're online?";
}};ORYX||(ORYX={});ORYX.Core||(ORYX.Core={});ORYX.Core.SVG||(ORYX.Core.SVG={});
ORYX.Core.SVG.EditPathHandler=Clazz.extend({construct:function(){arguments.callee.$.construct.apply(this,arguments);this.oldY=this.oldX=this.y=this.x=0;this.deltaHeight=this.deltaWidth=1;this.d=""},init:function(a,b,c,d,e,f){this.x=a;this.y=b;this.oldX=c;this.oldY=d;this.deltaWidth=e;this.deltaHeight=f;this.d=""},editPointsAbs:function(a){if(a instanceof Array){for(var b=[],c,d,e=0;e<a.length;e++)c=(parseFloat(a[e])-this.oldX)*this.deltaWidth+this.x,e++,d=(parseFloat(a[e])-this.oldY)*this.deltaHeight+
this.y,b.push(c),b.push(d);return b}},editPointsRel:function(a){if(a instanceof Array){for(var b=[],c,d,e=0;e<a.length;e++)c=parseFloat(a[e])*this.deltaWidth,e++,d=parseFloat(a[e])*this.deltaHeight,b.push(c),b.push(d);return b}},arcAbs:function(a,b,c,d,e,f,g){f=this.editPointsAbs([f,g]);a=this.editPointsRel([a,b]);this.d=this.d.concat(" A"+a[0]+" "+a[1]+" "+c+" "+d+" "+e+" "+f[0]+" "+f[1]+" ")},arcRel:function(a,b,c,d,e,f,g){a=this.editPointsRel([a,b,f,g]);this.d=this.d.concat(" a"+a[0]+" "+a[1]+
" "+c+" "+d+" "+e+" "+a[2]+" "+a[3]+" ")},curvetoCubicAbs:function(a,b,c,d,e,f){a=this.editPointsAbs([a,b,c,d,e,f]);this.d=this.d.concat(" C"+a[0]+" "+a[1]+" "+a[2]+" "+a[3]+" "+a[4]+" "+a[5]+" ")},curvetoCubicRel:function(a,b,c,d,e,f){a=this.editPointsRel([a,b,c,d,e,f]);this.d=this.d.concat(" c"+a[0]+" "+a[1]+" "+a[2]+" "+a[3]+" "+a[4]+" "+a[5]+" ")},linetoHorizontalAbs:function(a){this.d=this.d.concat(" H"+this.editPointsAbs([a,0])[0]+" ")},linetoHorizontalRel:function(a){this.d=this.d.concat(" h"+
this.editPointsRel([a,0])[0]+" ")},linetoAbs:function(a,b){var c=this.editPointsAbs([a,b]);this.d=this.d.concat(" L"+c[0]+" "+c[1]+" ")},linetoRel:function(a,b){var c=this.editPointsRel([a,b]);this.d=this.d.concat(" l"+c[0]+" "+c[1]+" ")},movetoAbs:function(a,b){var c=this.editPointsAbs([a,b]);this.d=this.d.concat(" M"+c[0]+" "+c[1]+" ")},movetoRel:function(a,b){var c;c=""===this.d?this.editPointsAbs([a,b]):this.editPointsRel([a,b]);this.d=this.d.concat(" m"+c[0]+" "+c[1]+" ")},curvetoQuadraticAbs:function(a,
b,c,d){a=this.editPointsAbs([a,b,c,d]);this.d=this.d.concat(" Q"+a[0]+" "+a[1]+" "+a[2]+" "+a[3]+" ")},curvetoQuadraticRel:function(a,b,c,d){a=this.editPointsRel([a,b,c,d]);this.d=this.d.concat(" q"+a[0]+" "+a[1]+" "+a[2]+" "+a[3]+" ")},curvetoCubicSmoothAbs:function(a,b,c,d){a=this.editPointsAbs([a,b,c,d]);this.d=this.d.concat(" S"+a[0]+" "+a[1]+" "+a[2]+" "+a[3]+" ")},curvetoCubicSmoothRel:function(a,b,c,d){a=this.editPointsRel([a,b,c,d]);this.d=this.d.concat(" s"+a[0]+" "+a[1]+" "+a[2]+" "+a[3]+
" ")},curvetoQuadraticSmoothAbs:function(a,b){var c=this.editPointsAbs([a,b]);this.d=this.d.concat(" T"+c[0]+" "+c[1]+" ")},curvetoQuadraticSmoothRel:function(a,b){var c=this.editPointsRel([a,b]);this.d=this.d.concat(" t"+c[0]+" "+c[1]+" ")},linetoVerticalAbs:function(a){this.d=this.d.concat(" V"+this.editPointsAbs([0,a])[1]+" ")},linetoVerticalRel:function(a){this.d=this.d.concat(" v"+this.editPointsRel([0,a])[1]+" ")},closePath:function(){this.d=this.d.concat(" z")}});ORYX||(ORYX={});ORYX.Core||(ORYX.Core={});ORYX.Core.SVG||(ORYX.Core.SVG={});
ORYX.Core.SVG.MinMaxPathHandler=Clazz.extend({construct:function(){arguments.callee.$.construct.apply(this,arguments);this._lastAbsY=this._lastAbsX=this.maxY=this.maxX=this.minY=this.minX=void 0},calculateMinMax:function(a){if(a instanceof Array)for(var b,c,d=0;d<a.length;d++)b=parseFloat(a[d]),d++,c=parseFloat(a[d]),this.minX=void 0!==this.minX?Math.min(this.minX,b):b,this.maxX=void 0!==this.maxX?Math.max(this.maxX,b):b,this.minY=void 0!==this.minY?Math.min(this.minY,c):c,this.maxY=void 0!==this.maxY?
Math.max(this.maxY,c):c,this._lastAbsX=b,this._lastAbsY=c},arcAbs:function(a,b,c,d,e,f,g){this.calculateMinMax([f,g])},arcRel:function(a,b,c,d,e,f,g){this.calculateMinMax([this._lastAbsX+f,this._lastAbsY+g])},curvetoCubicAbs:function(a,b,c,d,e,f){this.calculateMinMax([a,b,c,d,e,f])},curvetoCubicRel:function(a,b,c,d,e,f){this.calculateMinMax([this._lastAbsX+a,this._lastAbsY+b,this._lastAbsX+c,this._lastAbsY+d,this._lastAbsX+e,this._lastAbsY+f])},linetoHorizontalAbs:function(a){this.calculateMinMax([a,
this._lastAbsY])},linetoHorizontalRel:function(a){this.calculateMinMax([this._lastAbsX+a,this._lastAbsY])},linetoAbs:function(a,b){this.calculateMinMax([a,b])},linetoRel:function(a,b){this.calculateMinMax([this._lastAbsX+a,this._lastAbsY+b])},movetoAbs:function(a,b){this.calculateMinMax([a,b])},movetoRel:function(a,b){this._lastAbsX&&this._lastAbsY?this.calculateMinMax([this._lastAbsX+a,this._lastAbsY+b]):this.calculateMinMax([a,b])},curvetoQuadraticAbs:function(a,b,c,d){this.calculateMinMax([a,b,
c,d])},curvetoQuadraticRel:function(a,b,c,d){this.calculateMinMax([this._lastAbsX+a,this._lastAbsY+b,this._lastAbsX+c,this._lastAbsY+d])},curvetoCubicSmoothAbs:function(a,b,c,d){this.calculateMinMax([a,b,c,d])},curvetoCubicSmoothRel:function(a,b,c,d){this.calculateMinMax([this._lastAbsX+a,this._lastAbsY+b,this._lastAbsX+c,this._lastAbsY+d])},curvetoQuadraticSmoothAbs:function(a,b){this.calculateMinMax([a,b])},curvetoQuadraticSmoothRel:function(a,b){this.calculateMinMax([this._lastAbsX+a,this._lastAbsY+
b])},linetoVerticalAbs:function(a){this.calculateMinMax([this._lastAbsX,a])},linetoVerticalRel:function(a){this.calculateMinMax([this._lastAbsX,this._lastAbsY+a])},closePath:function(){}});ORYX||(ORYX={});ORYX.Core||(ORYX.Core={});ORYX.Core.SVG||(ORYX.Core.SVG={});
ORYX.Core.SVG.PointsPathHandler=Clazz.extend({construct:function(){arguments.callee.$.construct.apply(this,arguments);this.points=[];this._lastAbsY=this._lastAbsX=void 0},addPoints:function(a){if(a instanceof Array)for(var b,c,d=0;d<a.length;d++)b=parseFloat(a[d]),d++,c=parseFloat(a[d]),this.points.push(b),this.points.push(c),this._lastAbsX=b,this._lastAbsY=c},arcAbs:function(a,b,c,d,e,f,g){this.addPoints([f,g])},arcRel:function(a,b,c,d,e,f,g){this.addPoints([this._lastAbsX+f,this._lastAbsY+g])},
curvetoCubicAbs:function(a,b,c,d,e,f){this.addPoints([e,f])},curvetoCubicRel:function(a,b,c,d,e,f){this.addPoints([this._lastAbsX+e,this._lastAbsY+f])},linetoHorizontalAbs:function(a){this.addPoints([a,this._lastAbsY])},linetoHorizontalRel:function(a){this.addPoints([this._lastAbsX+a,this._lastAbsY])},linetoAbs:function(a,b){this.addPoints([a,b])},linetoRel:function(a,b){this.addPoints([this._lastAbsX+a,this._lastAbsY+b])},movetoAbs:function(a,b){this.addPoints([a,b])},movetoRel:function(a,b){this._lastAbsX&&
this._lastAbsY?this.addPoints([this._lastAbsX+a,this._lastAbsY+b]):this.addPoints([a,b])},curvetoQuadraticAbs:function(a,b,c,d){this.addPoints([c,d])},curvetoQuadraticRel:function(a,b,c,d){this.addPoints([this._lastAbsX+c,this._lastAbsY+d])},curvetoCubicSmoothAbs:function(a,b,c,d){this.addPoints([c,d])},curvetoCubicSmoothRel:function(a,b,c,d){this.addPoints([this._lastAbsX+c,this._lastAbsY+d])},curvetoQuadraticSmoothAbs:function(a,b){this.addPoints([a,b])},curvetoQuadraticSmoothRel:function(a,b){this.addPoints([this._lastAbsX+
a,this._lastAbsY+b])},linetoVerticalAbs:function(a){this.addPoints([this._lastAbsX,a])},linetoVerticalRel:function(a){this.addPoints([this._lastAbsX,this._lastAbsY+a])},closePath:function(){}});NAMESPACE_ORYX="http://www.b3mn.org/oryx";NAMESPACE_SVG="http://www.w3.org/2000/svg/";ORYX||(ORYX={});ORYX.Core||(ORYX.Core={});ORYX.Core.SVG||(ORYX.Core.SVG={});
ORYX.Core.SVG.SVGMarker=Clazz.extend({construct:function(a){arguments.callee.$.construct.apply(this,arguments);this.id=void 0;this.element=a;this.oldMarkerHeight=this.oldMarkerWidth=this.oldRefY=this.oldRefX=this.markerHeight=this.markerWidth=this.refY=this.refX=void 0;this.optional=!1;this.enabled=!0;this.minimumLength=void 0;this.resize=!1;this.svgShapes=[];this._init()},_init:function(){if("[object SVGMarkerElement]"!=this.element)throw"SVGMarker: Argument is not an instance of SVGMarkerElement.";
this.id=this.element.getAttributeNS(null,"id");var a=this.element.getAttributeNS(null,"refX");this.refX=a?parseFloat(a):0;this.refY=(a=this.element.getAttributeNS(null,"refY"))?parseFloat(a):0;this.markerWidth=(a=this.element.getAttributeNS(null,"markerWidth"))?parseFloat(a):3;this.markerHeight=(a=this.element.getAttributeNS(null,"markerHeight"))?parseFloat(a):3;this.oldRefX=this.refX;this.oldRefY=this.refY;this.oldMarkerWidth=this.markerWidth;this.oldMarkerHeight=this.markerHeight;(a=this.element.getAttributeNS(NAMESPACE_ORYX,
"optional"))?(a=a.strip(),this.optional="yes"===a.toLowerCase()):this.optional=!1;(a=this.element.getAttributeNS(NAMESPACE_ORYX,"enabled"))?(a=a.strip(),this.enabled="no"!==a.toLowerCase()):this.enabled=!0;if(a=this.element.getAttributeNS(NAMESPACE_ORYX,"minimumLength"))this.minimumLength=parseFloat(a);(a=this.element.getAttributeNS(NAMESPACE_ORYX,"resize"))?(a=a.strip(),this.resize="yes"===a.toLowerCase()):this.resize=!1},_getSVGShapes:function(a){if(a.hasChildNodes){var b=[],c=this;$A(a.childNodes).each(function(a){try{var e=
new ORYX.Core.SVG.SVGShape(a);b.push(e)}catch(f){b=b.concat(c._getSVGShapes(a))}});return b}},update:function(){this.oldRefX=this.refX;this.oldRefY=this.refY;this.oldMarkerWidth=this.markerWidth;this.oldMarkerHeight=this.markerHeight},toString:function(){return this.element?"SVGMarker "+this.element.id:"SVGMarker "+this.element}});NAMESPACE_ORYX="http://www.b3mn.org/oryx";NAMESPACE_SVG="http://www.w3.org/2000/svg/";ORYX||(ORYX={});ORYX.Core||(ORYX.Core={});ORYX.Core.SVG||(ORYX.Core.SVG={});
ORYX.Core.SVG.SVGShape=Clazz.extend({construct:function(a){arguments.callee.$.construct.apply(this,arguments);this.type;this.element=a;this.radiusY=this.radiusX=this.oldHeight=this.oldWidth=this.oldY=this.oldX=this.height=this.width=this.y=this.x=void 0;this.anchorBottom=this.anchorTop=this.anchorRight=this.anchorLeft=this.isVerticallyResizable=this.isHorizontallyResizable=!1;this.allowDockers=!0;this.resizeMarkerMid=!1;this.editPathParser;this.editPathHandler;this.init()},init:function(){if(ORYX.Editor.checkClassType(this.element,
SVGRectElement)||ORYX.Editor.checkClassType(this.element,SVGImageElement)){this.type="Rect";var a=this.element.getAttributeNS(null,"x");if(a)this.oldX=parseFloat(a);else throw"Missing attribute in element "+this.element;if(a=this.element.getAttributeNS(null,"y"))this.oldY=parseFloat(a);else throw"Missing attribute in element "+this.element;if(a=this.element.getAttributeNS(null,"width"))this.oldWidth=parseFloat(a);else throw"Missing attribute in element "+this.element;if(a=this.element.getAttributeNS(null,
"height"))this.oldHeight=parseFloat(a);else throw"Missing attribute in element "+this.element;}else if(ORYX.Editor.checkClassType(this.element,SVGCircleElement)){this.type="Circle";var b=a=void 0;if(a=this.element.getAttributeNS(null,"cx"))a=parseFloat(a);else throw"Missing attribute in element "+this.element;if(b=this.element.getAttributeNS(null,"cy"))b=parseFloat(b);else throw"Missing attribute in element "+this.element;var c=this.element.getAttributeNS(null,"r");if(c)this.radiusX=parseFloat(c);
else throw"Missing attribute in element "+this.element;this.oldX=a-this.radiusX;this.oldY=b-this.radiusX;this.oldWidth=2*this.radiusX;this.oldHeight=2*this.radiusX}else if(ORYX.Editor.checkClassType(this.element,SVGEllipseElement)){this.type="Ellipse";if(a=this.element.getAttributeNS(null,"cx"))a=parseFloat(a);else throw"Missing attribute in element "+this.element;if(b=this.element.getAttributeNS(null,"cy"))b=parseFloat(b);else throw"Missing attribute in element "+this.element;if(c=this.element.getAttributeNS(null,
"rx"))this.radiusX=parseFloat(c);else throw"Missing attribute in element "+this.element;if(c=this.element.getAttributeNS(null,"ry"))this.radiusY=parseFloat(c);else throw"Missing attribute in element "+this.element;this.oldX=a-this.radiusX;this.oldY=b-this.radiusY;this.oldWidth=2*this.radiusX;this.oldHeight=2*this.radiusY}else if(ORYX.Editor.checkClassType(this.element,SVGLineElement)){this.type="Line";var d=c=b=a=void 0;if(a=this.element.getAttributeNS(null,"x1"))a=parseFloat(a);else throw"Missing attribute in element "+
this.element;if(b=this.element.getAttributeNS(null,"y1"))b=parseFloat(b);else throw"Missing attribute in element "+this.element;if(c=this.element.getAttributeNS(null,"x2"))c=parseFloat(c);else throw"Missing attribute in element "+this.element;if(d=this.element.getAttributeNS(null,"y2"))d=parseFloat(d);else throw"Missing attribute in element "+this.element;this.oldX=Math.min(a,c);this.oldY=Math.min(b,d);this.oldWidth=Math.abs(a-c);this.oldHeight=Math.abs(b-d)}else if(ORYX.Editor.checkClassType(this.element,
SVGPolylineElement)||ORYX.Editor.checkClassType(this.element,SVGPolygonElement))if(this.type="Polyline",a=this.element.getAttributeNS(null,"points"))if(a=a.replace(/,/g," "),b=a.split(" "),(b=b.without(""))&&b.length&&1<b.length){for(var c=parseFloat(b[0]),d=parseFloat(b[1]),e=parseFloat(b[0]),f=parseFloat(b[1]),a=0;a<b.length;a++)c=Math.min(c,parseFloat(b[a])),e=Math.max(e,parseFloat(b[a])),a++,d=Math.min(d,parseFloat(b[a])),f=Math.max(f,parseFloat(b[a]));this.oldX=c;this.oldY=d;this.oldWidth=e-
c;this.oldHeight=f-d}else throw"Missing attribute in element "+this.element;else throw"Missing attribute in element "+this.element;else if(ORYX.Editor.checkClassType(this.element,SVGPathElement))this.type="Path",this.editPathParser=new PathParser,this.editPathHandler=new ORYX.Core.SVG.EditPathHandler,this.editPathParser.setHandler(this.editPathHandler),a=new PathParser,b=new ORYX.Core.SVG.MinMaxPathHandler,a.setHandler(b),a.parsePath(this.element),this.oldX=b.minX,this.oldY=b.minY,this.oldWidth=b.maxX-
b.minX,this.oldHeight=b.maxY-b.minY,delete a,delete b;else throw"Element is not a shape.";(a=this.element.getAttributeNS(NAMESPACE_ORYX,"resize"))?(a=a.toLowerCase(),this.isHorizontallyResizable=a.match(/horizontal/)?!0:!1,this.isVerticallyResizable=a.match(/vertical/)?!0:!1):this.isVerticallyResizable=this.isHorizontallyResizable=!1;if(a=this.element.getAttributeNS(NAMESPACE_ORYX,"anchors")){a=a.replace("/,/g"," ");b=a.split(" ").without("");for(a=0;a<b.length;a++)switch(b[a].toLowerCase()){case "left":this.anchorLeft=
!0;break;case "right":this.anchorRight=!0;break;case "top":this.anchorTop=!0;break;case "bottom":this.anchorBottom=!0}}if(ORYX.Editor.checkClassType(this.element,SVGPathElement)){if(a=this.element.getAttributeNS(NAMESPACE_ORYX,"allowDockers"))this.allowDockers="no"===a.toLowerCase()?!1:!0;if(a=this.element.getAttributeNS(NAMESPACE_ORYX,"resizeMarker-mid"))this.resizeMarkerMid="yes"===a.toLowerCase()?!0:!1}this.x=this.oldX;this.y=this.oldY;this.width=this.oldWidth;this.height=this.oldHeight},update:function(){if(this.x!==
this.oldX||this.y!==this.oldY||this.width!==this.oldWidth||this.height!==this.oldHeight){switch(this.type){case "Rect":this.x!==this.oldX&&this.element.setAttributeNS(null,"x",this.x);this.y!==this.oldY&&this.element.setAttributeNS(null,"y",this.y);this.width!==this.oldWidth&&this.element.setAttributeNS(null,"width",this.width);this.height!==this.oldHeight&&this.element.setAttributeNS(null,"height",this.height);break;case "Circle":this.radiusX=(this.width<this.height?this.width:this.height)/2;this.element.setAttributeNS(null,
"cx",this.x+this.width/2);this.element.setAttributeNS(null,"cy",this.y+this.height/2);this.element.setAttributeNS(null,"r",this.radiusX);break;case "Ellipse":this.radiusX=this.width/2;this.radiusY=this.height/2;this.element.setAttributeNS(null,"cx",this.x+this.radiusX);this.element.setAttributeNS(null,"cy",this.y+this.radiusY);this.element.setAttributeNS(null,"rx",this.radiusX);this.element.setAttributeNS(null,"ry",this.radiusY);break;case "Line":this.x!==this.oldX&&this.element.setAttributeNS(null,
"x1",this.x);this.y!==this.oldY&&this.element.setAttributeNS(null,"y1",this.y);(this.x!==this.oldX||this.width!==this.oldWidth)&&this.element.setAttributeNS(null,"x2",this.x+this.width);(this.y!==this.oldY||this.height!==this.oldHeight)&&this.element.setAttributeNS(null,"y2",this.y+this.height);break;case "Polyline":var a=this.element.getAttributeNS(null,"points");if(a&&(a=a.replace(/,/g," ").split(" ").without(""))&&a.length&&1<a.length){for(var b=0===this.oldWidth?0:this.width/this.oldWidth,c=0===
this.oldHeight?0:this.height/this.oldHeight,d="",e=0;e<a.length;e++){var f=(parseFloat(a[e])-this.oldX)*b+this.x;e++;var g=(parseFloat(a[e])-this.oldY)*c+this.y,d=d+(f+" "+g+" ")}this.element.setAttributeNS(null,"points",d)}break;case "Path":b=0===this.oldWidth?0:this.width/this.oldWidth,c=0===this.oldHeight?0:this.height/this.oldHeight,this.editPathHandler.init(this.x,this.y,this.oldX,this.oldY,b,c),this.editPathParser.parsePath(this.element),this.element.setAttributeNS(null,"d",this.editPathHandler.d)}this.oldX=
this.x;this.oldY=this.y;this.oldWidth=this.width;this.oldHeight=this.height}},isPointIncluded:function(a,b){if(!a||!b||!this.isVisible())return!1;switch(this.type){case "Rect":return a>=this.x&&a<=this.x+this.width&&b>=this.y&&b<=this.y+this.height;case "Circle":return ORYX.Core.Math.isPointInEllipse(a,b,this.x+this.width/2,this.y+this.height/2,this.radiusX,this.radiusX);case "Ellipse":return ORYX.Core.Math.isPointInEllipse(a,b,this.x+this.radiusX,this.y+this.radiusY,this.radiusX,this.radiusY);case "Line":return ORYX.Core.Math.isPointInLine(a,
b,this.x,this.y,this.x+this.width,this.y+this.height);case "Polyline":var c=this.element.getAttributeNS(null,"points");return c?(c=c.replace(/,/g," ").split(" ").without(""),c=c.collect(function(a){return parseFloat(a)}),ORYX.Core.Math.isPointInPolygone(a,b,c)):!1;case "Path":var c=new PathParser,d=new ORYX.Core.SVG.PointsPathHandler;c.setHandler(d);c.parsePath(this.element);return ORYX.Core.Math.isPointInPolygone(a,b,d.points);default:return!1}},isVisible:function(a){a||(a=this.element);var b=!1;
try{b=!!a.ownerSVGElement}catch(c){}if(b){if(ORYX.Editor.checkClassType(a,SVGGElement)&&a.className&&"me"==a.className.baseVal)return!0;var b=a.getAttributeNS(null,"fill"),d=a.getAttributeNS(null,"stroke");if(b&&"none"==b&&d&&"none"==d)return!1;if(b=a.getAttributeNS(null,"display")){if("none"==b)return!1}else return this.isVisible(a.parentNode)}return!0},toString:function(){return this.element?"SVGShape "+this.element.id:"SVGShape "+this.element}});ORYX||(ORYX={});ORYX.Core||(ORYX.Core={});ORYX.Core.SVG||(ORYX.Core.SVG={});
ORYX.Core.SVG.Label=Clazz.extend({_characterSets:["%W","@","m","wDGMOQ\u00d6#+=<>~^","ABCHKNRSUVXZ\u00dc\u00c4&","bdghnopqux\u00f6\u00fcETY1234567890\u00df_\u00a7${}*\u00b4`\u00b5\u20ac","aeksvyz\u00e4FLP?\u00b0\u00b2\u00b3","c-",'rtJ"/()[]:;!|\\',"fjI., ","'","il"],_characterSetValues:[15,14,13,11,10,9,8,7,6,5,4,3],construct:function(a){arguments.callee.$.construct.apply(this,arguments);if(a.textElement){if(!ORYX.Editor.checkClassType(a.textElement,SVGTextElement))throw"Label: Parameter textElement is not an SVGTextElement.";
}else throw"Label: No parameter textElement.";this.invisibleRenderPoint=-5E3;this.node=a.textElement;this.node.setAttributeNS(null,"stroke-width","0pt");this.node.setAttributeNS(null,"letter-spacing","-0.01px");this.shapeId=a.shapeId;this.id;this.fitToElemId;this.edgePosition;this.x;this.y;this.oldX;this.oldY;this.isVisible=!0;this._text;this._verticalAlign;this._horizontalAlign;this._rotate;this._rotationPoint;this.anchorLeft;this.anchorRight;this.anchorTop;this.anchorBottom;this._isChanged=!0;var b=
this.node.getAttributeNS(null,"id");b&&(this.id=b);if(this.fitToElemId=this.node.getAttributeNS(ORYX.CONFIG.NAMESPACE_ORYX,"fittoelem"))this.fitToElemId=this.shapeId+this.fitToElemId;if(b=this.node.getAttributeNS(ORYX.CONFIG.NAMESPACE_ORYX,"align"))b=b.replace(/,/g," "),b=b.split(" "),b=b.without(""),b.each(function(a){switch(a){case "top":case "middle":case "bottom":this._verticalAlign||(this._verticalAlign=a);break;case "left":case "center":case "right":this._horizontalAlign||(this._horizontalAlign=
a)}}.bind(this));if(this.edgePosition=this.node.getAttributeNS(ORYX.CONFIG.NAMESPACE_ORYX,"edgePosition"))this.edgePosition=this.edgePosition.toLowerCase();if(this.offsetTop=this.node.getAttributeNS(ORYX.CONFIG.NAMESPACE_ORYX,"offsetTop")||ORYX.CONFIG.OFFSET_EDGE_LABEL_TOP)this.offsetTop=parseInt(this.offsetTop);if(this.offsetBottom=this.node.getAttributeNS(ORYX.CONFIG.NAMESPACE_ORYX,"offsetBottom")||ORYX.CONFIG.OFFSET_EDGE_LABEL_BOTTOM)this.offsetBottom=parseInt(this.offsetBottom);if(b=this.node.getAttributeNS(ORYX.CONFIG.NAMESPACE_ORYX,
"rotate"))try{this._rotate=parseFloat(b)}catch(c){this._rotate=0}else this._rotate=0;if(b=this.node.getAttributeNS(ORYX.CONFIG.NAMESPACE_ORYX,"anchors"))for(var b=b.replace("/,/g"," "),b=b.split(" ").without(""),d=0;d<b.length;d++)switch(b[d].toLowerCase()){case "left":this.anchorLeft=!0;break;case "right":this.anchorRight=!0;break;case "top":this.anchorTop=!0;break;case "bottom":this.anchorBottom=!0}this._verticalAlign||(this._verticalAlign="bottom");this._horizontalAlign||(this._horizontalAlign=
"left");if(b=this.node.getAttributeNS(null,"x"))this.oldX=this.x=parseFloat(b);if(b=this.node.getAttributeNS(null,"y"))this.oldY=this.y=parseFloat(b);this.text(this.node.textContent)},changed:function(){this._isChanged=!0},update:function(){if(this._isChanged||this.x!==this.oldX||this.y!==this.oldY)if(this.isVisible){this._isChanged=!1;this.node.setAttributeNS(null,"x",this.x);this.node.setAttributeNS(null,"y",this.y);this._fontSize&&this.node.setAttributeNS(null,"font-size",this._fontSize);switch(this._horizontalAlign){case "left":this.node.setAttributeNS(null,
"text-anchor","start");break;case "center":this.node.setAttributeNS(null,"text-anchor","middle");break;case "right":this.node.setAttributeNS(null,"text-anchor","end")}this.oldX=this.x;this.oldY=this.y;void 0!==this._rotate&&(this._rotationPoint?this.node.setAttributeNS(null,"transform","rotate("+this._rotate+" "+this._rotationPoint.x+" "+this._rotationPoint.y+")"):this.node.setAttributeNS(null,"transform","rotate("+this._rotate+" "+this.x+" "+this.y+")"));for(var a=this._text.split("\n");""==a.last();)a.pop();
this.node.textContent="";this.node.ownerDocument&&(a.each(function(a){var c=this.node.ownerDocument.createElementNS(ORYX.CONFIG.NAMESPACE_SVG,"tspan");c.textContent=a;c.setAttributeNS(null,"x",this.invisibleRenderPoint);c.setAttributeNS(null,"y",this.invisibleRenderPoint);""===c.textContent&&(c.textContent=" ");this.node.appendChild(c)}.bind(this)),this.isVisible&&this.node.setAttributeNS(null,"visibility","hidden"),this.fitToElemId?window.setTimeout(this._checkFittingToReferencedElem.bind(this),
0):window.setTimeout(this._positionText.bind(this),0))}else this.node.textContent=""},_checkFittingToReferencedElem:function(){try{var a=$A(this.node.getElementsByTagNameNS(ORYX.CONFIG.NAMESPACE_SVG,"tspan")),b=[],c=this.node.ownerDocument.getElementById(this.fitToElemId);if(c){for(var d=c.getBBox(),e=this.getFontSize(),c=0;c<a.length;c++){var f=a[c],g=this._getRenderedTextLength(f,void 0,void 0,e),h=0!=this._rotate&&0!=this._rotate%180&&0==this._rotate%90?d.height:d.width;if(g>h){for(var j=0,k=0,
l=this.getTrimmedTextLength(f.textContent),m=0;m<l;m++)if(this._getRenderedTextLength(f,j,m-j,e)>h-3){var n=this.node.ownerDocument.createElementNS(ORYX.CONFIG.NAMESPACE_SVG,"tspan");k<=j?(k=0==m?m:m-1,n.textContent=f.textContent.slice(j,k)):n.textContent=f.textContent.slice(j,++k);n.setAttributeNS(null,"x",this.invisibleRenderPoint);n.setAttributeNS(null,"y",this.invisibleRenderPoint);b.push(n);j=k}else{var u=f.textContent.charAt(m);if(" "==u||"-"==u||"."==u||","==u||";"==u||":"==u)k=m}f.textContent=
f.textContent.slice(j)}b.push(f)}for(;this.node.hasChildNodes();)this.node.removeChild(this.node.childNodes[0]);for(;0<b.length;)this.node.appendChild(b.shift())}}catch(v){}window.setTimeout(this._positionText.bind(this),0)},_positionText:function(){try{var a=this.node.getElementsByTagNameNS(ORYX.CONFIG.NAMESPACE_SVG,"tspan"),b=this.getFontSize(this.node),c=[];$A(a).each(function(d,f){if(""===d.textContent.trim())c.push(d);else{var g=0;switch(this._verticalAlign){case "bottom":g=-(a.length-f-1)*b;
break;case "middle":g=-(a.length/2-f-1)*b;g-=ORYX.CONFIG.LABEL_LINE_DISTANCE/2;break;case "top":g=f*b,g+=b}d.setAttributeNS(null,"dy",g);d.setAttributeNS(null,"x",this.x);d.setAttributeNS(null,"y",this.y)}}.bind(this));c.each(function(a){this.node.removeChild(a)}.bind(this))}catch(d){this._isChanged=!0}this.isVisible&&this.node.setAttributeNS(null,"visibility","inherit")},_getRenderedTextLength:function(a,b,c,d){return/Firefox[\/\s](\d+\.\d+)/.test(navigator.userAgent)&&3<=new Number(RegExp.$1)?void 0===
b?a.getComputedTextLength():a.getSubStringLength(b,c):void 0===b?this._estimateTextWidth(a.textContent,d):this._estimateTextWidth(a.textContent.substr(b,c).trim(),d)},_estimateTextWidth:function(a,b){for(var c=0,d=0;d<a.length;d++)c+=this._estimateCharacterWidth(a.charAt(d));return c*(b/14)},_estimateCharacterWidth:function(a){for(var b=0;b<this._characterSets.length;b++)if(0<=this._characterSets[b].indexOf(a))return this._characterSetValues[b];return 9},getReferencedElementWidth:function(){var a=
this.node.ownerDocument.getElementById(this.fitToElemId);if(a&&(a=a.getBBox()))return a.width},text:function(){switch(arguments.length){case 0:return this._text;case 1:var a=this._text;this._text=arguments[0]?arguments[0].toString():"";a!==this._text&&(this._isChanged=!0)}},fontSize:function(){switch(arguments.length){case 0:return this._fontSize;case 1:var a=this._fontSize;this._fontSize=arguments[0]?arguments[0].toString():12;a!==this._fontSize&&(this._isChanged=!0)}},verticalAlign:function(){switch(arguments.length){case 0:return this._verticalAlign;
case 1:if(["top","middle","bottom"].member(arguments[0])){var a=this._verticalAlign;this._verticalAlign=arguments[0];this._verticalAlign!==a&&(this._isChanged=!0)}}},horizontalAlign:function(){switch(arguments.length){case 0:return this._horizontalAlign;case 1:if(["left","center","right"].member(arguments[0])){var a=this._horizontalAlign;this._horizontalAlign=arguments[0];this._horizontalAlign!==a&&(this._isChanged=!0)}}},rotate:function(){switch(arguments.length){case 0:return this._rotate;case 1:this._rotate!=
arguments[0]&&(this._rotate=arguments[0],this._rotationPoint=void 0,this._isChanged=!0);case 2:if(this._rotate!=arguments[0]||!this._rotationPoint||this._rotationPoint.x!=arguments[1].x||this._rotationPoint.y!=arguments[1].y)this._rotate=arguments[0],this._rotationPoint=arguments[1],this._isChanged=!0}},hide:function(){this.isVisible&&(this.isVisible=!1,this._isChanged=!0)},show:function(){this.isVisible||(this._isChanged=this.isVisible=!0)},getInheritedFontSize:function(a){if(a&&a.getAttributeNS){var b=
a.getAttributeNS(null,"font-size");if(b)return parseFloat(b);if(!ORYX.Editor.checkClassType(a,SVGSVGElement))return this.getInheritedFontSize(a.parentNode)}},getFontSize:function(){var a=this.node.getElementsByTagNameNS(ORYX.CONFIG.NAMESPACE_SVG,"tspan"),b=this.getInheritedFontSize(this.node);b||(b=a[0]&&/Firefox[\/\s](\d+\.\d+)/.test(navigator.userAgent)&&3<=new Number(RegExp.$1)?a[0].getExtentOfChar(0).height:ORYX.CONFIG.LABEL_DEFAULT_LINE_HEIGHT,0>=b&&(b=ORYX.CONFIG.LABEL_DEFAULT_LINE_HEIGHT));
b&&this.node.setAttribute("oryx:fontSize",b);return b},getTrimmedTextLength:function(a){var a=a.strip().gsub("  "," "),b;do b=a.length,a=a.gsub("  "," ");while(b>a.length);return a.length},getOffsetBottom:function(){return this.offsetBottom},getOffsetTop:function(){return this.offsetTop},toString:function(){return"Label "+this.id}});ORYX||(ORYX={});ORYX.Core||(ORYX.Core={});ORYX.Core.Math||(ORYX.Core.Math={});ORYX.Core.Math.midPoint=function(a,b){return{x:(a.x+b.x)/2,y:(a.y+b.y)/2}};
ORYX.Core.Math.isPointInLine=function(a,b,c,d,e,f,g){g=g?Math.abs(g):1;if(Math.abs(c-e)<=g&&Math.abs(a-c)<=g&&b-Math.max(d,f)<=g&&Math.min(d,f)-b<=g||Math.abs(d-f)<=g&&Math.abs(b-d)<=g&&a-Math.max(c,e)<=g&&Math.min(c,e)-a<=g)return!0;if(a>Math.max(c,e)||a<Math.min(c,e)||b>Math.max(d,f)||b<Math.min(d,f))return!1;e=(d-f)/(c-e);return Math.abs(b-(e*a+d-e*c))<g};
ORYX.Core.Math.isPointInEllipse=function(a,b,c,d,e,f){if(void 0===c||void 0===d||void 0===e||void 0===f)throw"ORYX.Core.Math.isPointInEllipse needs a ellipse with these properties: x, y, radiusX, radiusY";a=(a-c)/e;b=(b-d)/f;return 1>a*a+b*b};
ORYX.Core.Math.isPointInPolygone=function(a,b,c){if(3>arguments.length)throw"ORYX.Core.Math.isPointInPolygone needs two arguments";var d=c.length-1;if(c[0]!==c[d-1]||c[1]!==c[d])c.push(c[0]),c.push(c[1]);for(var d=0,e,f,g,h,j,k=0;k<c.length-3;)if(e=c[k],f=c[++k],g=c[++k],h=c[k+1],j=(b-f)*(g-e)-(a-e)*(h-f),f>=b!=h>=b&&(d+=0<=h-f?0<=j:0>=j),!j&&Math.min(e,g)<=a&&a<=Math.max(e,g)&&Math.min(f,h)<=b&&b<=Math.max(f,h))return!0;return d%2?!0:!1};
ORYX.Core.Math.distancePointLinie=function(a,b,c,d){a=ORYX.Core.Math.getPointOfIntersectionPointLine(a,b,c,d);return!a?null:ORYX.Core.Math.getDistancePointToPoint(c,a)};ORYX.Core.Math.getDistancePointToPoint=function(a,b){return Math.sqrt(Math.pow(a.x-b.x,2)+Math.pow(a.y-b.y,2))};
ORYX.Core.Math.getPointOfIntersectionPointLine=function(a,b,c,d){var e=Math.pow(b.x-a.x,2)+Math.pow(b.y-a.y,2);if(0!=e&&(c=((c.x-a.x)*(b.x-a.x)+(c.y-a.y)*(b.y-a.y))/e,!d||0<=c&&1>=c))return pointOfIntersection={},pointOfIntersection.x=a.x+c*(b.x-a.x),pointOfIntersection.y=a.y+c*(b.y-a.y),pointOfIntersection};ORYX||(ORYX={});ORYX.Core||(ORYX.Core={});ORYX.Core.StencilSet||(ORYX.Core.StencilSet={});
ORYX.Core.StencilSet.Stencil={construct:function(a,b,c,d,e,f){arguments.callee.$.construct.apply(this,arguments);if(!a)throw"Stencilset seems corrupt.";if(!b)throw"Stencil does not provide namespace.";if(!c)throw"Stencil does not provide SVG source.";if(!d)throw"Fatal internal error loading stencilset.";this._source=c;this._jsonStencil=a;this._stencilSet=d;this._namespace=b;this._propertyPackages=e;f&&!this._jsonStencil.position&&(this._jsonStencil.position=f);this._view;this._properties=new Hash;
if(!this._jsonStencil.type||!("edge"===this._jsonStencil.type||"node"===this._jsonStencil.type))throw"ORYX.Core.StencilSet.Stencil(construct): Type is not defined.";if(!this._jsonStencil.id||""===this._jsonStencil.id)throw"ORYX.Core.StencilSet.Stencil(construct): Id is not defined.";if(!this._jsonStencil.title||""===this._jsonStencil.title)throw"ORYX.Core.StencilSet.Stencil(construct): Title is not defined.";this._jsonStencil.description||(this._jsonStencil.description="");this._jsonStencil.groups||
(this._jsonStencil.groups=[]);this._jsonStencil.roles||(this._jsonStencil.roles=[]);this._jsonStencil.roles.push(this._jsonStencil.id);this._jsonStencil.roles.each(function(a,c){this._jsonStencil.roles[c]=b+a}.bind(this));this._jsonStencil.roles=this._jsonStencil.roles.uniq();this._jsonStencil.id=b+this._jsonStencil.id;this.postProcessProperties();this._jsonStencil.serialize||(this._jsonStencil.serialize={});this._jsonStencil.deserialize||(this._jsonStencil.deserialize={});this._jsonStencil.layout||
(this._jsonStencil.layout=[]);if(void 0!==a.view)var g="/"==a.view.charAt(0)?a.view:c+"view/"+a.view;if(this._jsonStencil.view)if(this._jsonStencil.view.trim().match(/</))if(g=(new DOMParser).parseFromString(this._jsonStencil.view,"text/xml"),ORYX.Editor.checkClassType(g.documentElement,SVGSVGElement))this._view=g.documentElement,g=this._view.getElementsByTagNameNS("http://www.w3.org/2000/svg","image"),$A(g).each(function(a){if((a=a.getAttributeNodeNS("http://www.w3.org/1999/xlink","href"))&&-1==
a.value.indexOf("://")&&-1==a.value.indexOf("base64"))a.textContent=this._source+"view/"+a.value}.bind(this));else throw"ORYX.Core.StencilSet.Stencil(_loadSVGOnSuccess): The response is not a SVG document.";else new Ajax.Request(g,{asynchronous:!1,method:"get",onSuccess:this._loadSVGOnSuccess.bind(this),onFailure:this._loadSVGOnFailure.bind(this)})},postProcessProperties:function(){this._jsonStencil.icon?"/"!==this._jsonStencil.icon.charAt(0)&&-1===this._jsonStencil.icon.indexOf("://")&&-1===this._jsonStencil.icon.indexOf("base64")&&
(this._jsonStencil.icon=this._source+"icons/"+this._jsonStencil.icon):this._jsonStencil.icon="";this._jsonStencil.propertyPackages&&this._jsonStencil.propertyPackages instanceof Array&&this._jsonStencil.propertyPackages.each(function(a){(a=this._propertyPackages[a])&&a.each(function(a){a=new ORYX.Core.StencilSet.Property(a,this._namespace,this);this._properties[a.prefix()+"-"+a.id()]=a}.bind(this))}.bind(this));this._jsonStencil.properties&&this._jsonStencil.properties instanceof Array&&this._jsonStencil.properties.each(function(a){a=
new ORYX.Core.StencilSet.Property(a,this._namespace,this);this._properties[a.prefix()+"-"+a.id()]=a}.bind(this))},equals:function(a){return this.id()===a.id()},stencilSet:function(){return this._stencilSet},type:function(){return this._jsonStencil.type},namespace:function(){return this._namespace},id:function(){return this._jsonStencil.id},idWithoutNs:function(){return this.id().replace(this.namespace(),"")},title:function(){return ORYX.Core.StencilSet.getTranslation(this._jsonStencil,"title")},description:function(){return ORYX.Core.StencilSet.getTranslation(this._jsonStencil,
"description")},groups:function(){return ORYX.Core.StencilSet.getTranslation(this._jsonStencil,"groups")},position:function(){return isNaN(this._jsonStencil.position)?0:this._jsonStencil.position},view:function(){return this._view.cloneNode(!0)||this._view},hidden:function(){return this._jsonStencil.hide},icon:function(){return this._jsonStencil.icon},fixedAspectRatio:function(){return!0===this._jsonStencil.fixedAspectRatio},hasMultipleRepositoryEntries:function(){return 0<this.getRepositoryEntries().length},
getRepositoryEntries:function(){return this._jsonStencil.repositoryEntries?$A(this._jsonStencil.repositoryEntries):$A([])},properties:function(){return this._properties.values()},property:function(a){return this._properties[a]},roles:function(){return this._jsonStencil.roles},defaultAlign:function(){return!this._jsonStencil.defaultAlign?"east":this._jsonStencil.defaultAlign},serialize:function(){return this._jsonStencil.serialize},deserialize:function(){return this._jsonStencil.deserialize},layout:function(){return this._jsonStencil.layout},
addProperty:function(a,b){if(a&&b){var c=new ORYX.Core.StencilSet.Property(a,b,this);this._properties[c.prefix()+"-"+c.id()]=c}},removeProperty:function(a){if(a){var b=this._properties.values().find(function(b){return a==b.id()});b&&delete this._properties[b.prefix()+"-"+b.id()]}},_loadSVGOnSuccess:function(a){var b=null,b=a.responseXML;if(ORYX.Editor.checkClassType(b.documentElement,SVGSVGElement))this._view=b.documentElement,a=this._view.getElementsByTagNameNS("http://www.w3.org/2000/svg","image"),
$A(a).each(function(a){if((a=a.getAttributeNodeNS("http://www.w3.org/1999/xlink","href"))&&-1==a.value.indexOf("://")&&-1==a.value.indexOf("base64"))a.textContent=this._source+"view/"+a.value}.bind(this));else throw"ORYX.Core.StencilSet.Stencil(_loadSVGOnSuccess): The response is not a SVG document.";},_loadSVGOnFailure:function(){throw"ORYX.Core.StencilSet.Stencil(_loadSVGOnFailure): Loading SVG document failed.";},toString:function(){return"Stencil "+this.title()+" ("+this.id()+")"}};
ORYX.Core.StencilSet.Stencil=Clazz.extend(ORYX.Core.StencilSet.Stencil);function _evenMoreEvilHack(a,b){if(window.ActiveXObject){var c=new ActiveXObject("MSXML.DomDocument");c.loadXML(a);return c}if(window.XMLHttpRequest)return c=new XMLHttpRequest,c.open("GET","data:"+(b||"application/xml")+";charset=utf-8,"+encodeURIComponent(a),!1),c.overrideMimeType&&c.overrideMimeType(b),c.send(null),c.responseXML}
function _evilSafariHack(a){var a="data:text/xml;charset=utf-8,"+encodeURIComponent(a),b=null,c=new XMLHttpRequest;c.open("GET",a);c.onload=function(){b=c.responseXML};c.send(null);return b};ORYX||(ORYX={});ORYX.Core||(ORYX.Core={});ORYX.Core.StencilSet||(ORYX.Core.StencilSet={});
ORYX.Core.StencilSet.Property=Clazz.extend({construct:function(a,b,c){arguments.callee.$.construct.apply(this,arguments);this._jsonProp=a||ORYX.Log.error("Parameter jsonProp is not defined.");this._namespace=b||ORYX.Log.error("Parameter namespace is not defined.");this._stencil=c||ORYX.Log.error("Parameter stencil is not defined.");this._items=new Hash;this._complexItems=new Hash;a.id=a.id||ORYX.Log.error("ORYX.Core.StencilSet.Property(construct): Id is not defined.");a.id=a.id.toLowerCase();a.type?
a.type=a.type.toLowerCase():(ORYX.Log.info("Type is not defined for stencil '%0', id '%1'. Falling back to 'String'.",c,a.id),a.type="string");a.prefix=a.prefix||"oryx";a.title=a.title||"";a.value=a.value||"";a.description=a.description||"";a.readonly=a.readonly||!1;!1!=a.optional&&(a.optional=!0);this._jsonProp.refToView?this._jsonProp.refToView instanceof Array||(this._jsonProp.refToView=[this._jsonProp.refToView]):this._jsonProp.refToView=[];if(void 0===a.min||null===a.min)a.min=Number.MIN_VALUE;
if(void 0===a.max||null===a.max)a.max=Number.MAX_VALUE;a.fillOpacity||(a.fillOpacity=!1);a.strokeOpacity||(a.strokeOpacity=!1);if(void 0===a.length||null===a.length)a.length=Number.MAX_VALUE;a.wrapLines||(a.wrapLines=!1);a.dateFormat||(a.dataFormat="m/d/y");a.fill||(a.fill=!1);a.stroke||(a.stroke=!1);a.inverseBoolean||(a.inverseBoolean=!1);!a.directlyEditable&&!1!=a.directlyEditable&&(a.directlyEditable=!0);a.visible||(a.visible=!0);a.fortasktypes||(a.fortasktypes="");a.fordistribution||(a.fordistribution=
"");a.popular||(a.popular=!1);a.simulation||(a.simulation=!1);a.complexItems&&a.complexItems instanceof Array&&a.complexItems.each(function(c){try{this._complexItems[c.id]=new ORYX.Core.StencilSet.ComplexPropertyItem(c,b,this)}catch(e){ORYX.Log.error("error while initializing complex items for "+a.title),ORYX.Log.error(e)}}.bind(this));if(a.type===ORYX.CONFIG.TYPE_CHOICE)if(a.items&&a.items instanceof Array)a.items.each(function(a){this._items[a.value]=new ORYX.Core.StencilSet.PropertyItem(a,b,this)}.bind(this));
else throw"ORYX.Core.StencilSet.Property(construct): No property items defined.";if(a.type===ORYX.CONFIG.TYPE_COMPLEX&&void 0===a.complexItems)throw"ORYX.Core.StencilSet.Property(construct): No complex property items defined.";a.labelProvider&&(this._labelProvider=a.labelProvider.transform)},equals:function(a){return this._namespace===a.namespace()&&this.id()===a.id()?!0:!1},namespace:function(){return this._namespace},stencil:function(){return this._stencil},id:function(){return this._jsonProp.id},
prefix:function(){return this._jsonProp.prefix},type:function(){return this._jsonProp.type},inverseBoolean:function(){return this._jsonProp.inverseBoolean},popular:function(){return this._jsonProp.popular},simulation:function(){return this._jsonProp.simulation},setPopular:function(){this._jsonProp.popular=!0},setSimulation:function(){this._jsonProp.simulation=!0},directlyEditable:function(){return this._jsonProp.directlyEditable},visible:function(){return this._jsonProp.visible},fortasktypes:function(){return this._jsonProp.fortasktypes},
fordistribution:function(){return this._jsonProp.fordistribution},title:function(){return ORYX.Core.StencilSet.getTranslation(this._jsonProp,"title")},value:function(){return this._jsonProp.value},readonly:function(){return this._jsonProp.readonly},optional:function(){return this._jsonProp.optional},description:function(){return ORYX.Core.StencilSet.getTranslation(this._jsonProp,"description")},refToView:function(){return this._jsonProp.refToView},min:function(){return this._jsonProp.min},max:function(){return this._jsonProp.max},
fillOpacity:function(){return this._jsonProp.fillOpacity},strokeOpacity:function(){return this._jsonProp.strokeOpacity},length:function(){return this._jsonProp.length?this._jsonProp.length:Number.MAX_VALUE},wrapLines:function(){return this._jsonProp.wrapLines},dateFormat:function(){return this._jsonProp.dateFormat},fill:function(){return this._jsonProp.fill},stroke:function(){return this._jsonProp.stroke},items:function(){return this._items.values()},item:function(a){return this._items[a]},toString:function(){return"Property "+
this.title()+" ("+this.id()+")"},complexItems:function(){return this._complexItems.values()},complexItem:function(a){return this._complexItems[a]},complexAttributeToView:function(){return this._jsonProp.complexAttributeToView||""},labelProvider:function(){return this._labelProvider}});ORYX||(ORYX={});ORYX.Core||(ORYX.Core={});ORYX.Core.StencilSet||(ORYX.Core.StencilSet={});
ORYX.Core.StencilSet.PropertyItem=Clazz.extend({construct:function(a,b,c){arguments.callee.$.construct.apply(this,arguments);if(!a)throw"ORYX.Core.StencilSet.PropertyItem(construct): Parameter jsonItem is not defined.";if(!b)throw"ORYX.Core.StencilSet.PropertyItem(construct): Parameter namespace is not defined.";if(!c)throw"ORYX.Core.StencilSet.PropertyItem(construct): Parameter property is not defined.";this._jsonItem=a;this._namespace=b;this._property=c;if(!a.value)throw"ORYX.Core.StencilSet.PropertyItem(construct): Value is not defined.";
this._jsonItem.refToView?this._jsonItem.refToView instanceof Array||(this._jsonItem.refToView=[this._jsonItem.refToView]):this._jsonItem.refToView=[]},equals:function(a){return this.property().equals(a.property())&&this.value()===a.value()},namespace:function(){return this._namespace},property:function(){return this._property},value:function(){return this._jsonItem.value},title:function(){return ORYX.Core.StencilSet.getTranslation(this._jsonItem,"title")},refToView:function(){return this._jsonItem.refToView},
icon:function(){return this._jsonItem.icon?this.property().stencil()._source+"icons/"+this._jsonItem.icon:""},toString:function(){return"PropertyItem "+this.property()+" ("+this.value()+")"}});ORYX||(ORYX={});ORYX.Core||(ORYX.Core={});ORYX.Core.StencilSet||(ORYX.Core.StencilSet={});
ORYX.Core.StencilSet.ComplexPropertyItem=Clazz.extend({construct:function(a,b,c){arguments.callee.$.construct.apply(this,arguments);if(!a)throw"ORYX.Core.StencilSet.ComplexPropertyItem(construct): Parameter jsonItem is not defined.";if(!b)throw"ORYX.Core.StencilSet.ComplexPropertyItem(construct): Parameter namespace is not defined.";if(!c)throw"ORYX.Core.StencilSet.ComplexPropertyItem(construct): Parameter property is not defined.";this._jsonItem=a;this._namespace=b;this._property=c;this._items=new Hash;
if(!a.name)throw"ORYX.Core.StencilSet.ComplexPropertyItem(construct): Name is not defined.";if(a.type)a.type=a.type.toLowerCase();else throw"ORYX.Core.StencilSet.ComplexPropertyItem(construct): Type is not defined.";if(a.type===ORYX.CONFIG.TYPE_CHOICE)if(a.items&&a.items instanceof Array)a.items.each(function(a){this._items[a.value]=new ORYX.Core.StencilSet.PropertyItem(a,b,this)}.bind(this));else throw"ORYX.Core.StencilSet.Property(construct): No property items defined.";},equals:function(a){return this.property().equals(a.property())&&
this.name()===a.name()},namespace:function(){return this._namespace},property:function(){return this._property},name:function(){return ORYX.Core.StencilSet.getTranslation(this._jsonItem,"name")},id:function(){return this._jsonItem.id},type:function(){return this._jsonItem.type},optional:function(){return this._jsonItem.optional},width:function(){return this._jsonItem.width},value:function(){return this._jsonItem.value},items:function(){return this._items.values()},disable:function(){return this._jsonItem.disable}});ORYX||(ORYX={});ORYX.Core||(ORYX.Core={});ORYX.Core.StencilSet||(ORYX.Core.StencilSet={});
ORYX.Core.StencilSet.Rules={construct:function(){arguments.callee.$.construct.apply(this,arguments);this._stencilSets=[];this._stencils=[];this._cachedConnectSET=new Hash;this._cachedConnectSE=new Hash;this._cachedConnectTE=new Hash;this._cachedCardSE=new Hash;this._cachedCardTE=new Hash;this._cachedContainPC=new Hash;this._cachedMorphRS=new Hash;this._connectionRules=new Hash;this._cardinalityRules=new Hash;this._containmentRules=new Hash;this._morphingRules=new Hash;this._layoutRules=new Hash},
initializeRules:function(a){var b=this._stencilSets.find(function(b){return b.namespace()==a.namespace()});if(b){var c=this._stencilSets.clone(),c=c.without(b);c.push(a);this._stencilSets=[];this._stencils=[];this._cachedConnectSET=new Hash;this._cachedConnectSE=new Hash;this._cachedConnectTE=new Hash;this._cachedCardSE=new Hash;this._cachedCardTE=new Hash;this._cachedContainPC=new Hash;this._cachedMorphRS=new Hash;this._connectionRules=new Hash;this._cardinalityRules=new Hash;this._containmentRules=
new Hash;this._morphingRules=new Hash;this._layoutRules=new Hash;c.each(function(a){this.initializeRules(a)}.bind(this))}else{this._stencilSets.push(a);var d=new Hash(a.jsonRules()),e=a.namespace(),f=a.stencils();a.extensions().values().each(function(a){a.rules&&(a.rules.connectionRules&&(d.connectionRules=d.connectionRules.concat(a.rules.connectionRules)),a.rules.cardinalityRules&&(d.cardinalityRules=d.cardinalityRules.concat(a.rules.cardinalityRules)),a.rules.containmentRules&&(d.containmentRules=
d.containmentRules.concat(a.rules.containmentRules)),a.rules.morphingRules&&(d.morphingRules=d.morphingRules.concat(a.rules.morphingRules)));a.stencils&&(f=f.concat(a.stencils))});this._stencils=this._stencils.concat(a.stencils());var g=this._connectionRules;d.connectionRules&&d.connectionRules.each(function(a){this._isRoleOfOtherNamespace(a.role)?g[a.role]||(g[a.role]=new Hash):g[e+a.role]||(g[e+a.role]=new Hash);a.connects.each(function(b){var c=[];b.to&&(b.to instanceof Array||(b.to=[b.to]),b.to.each(function(a){this._isRoleOfOtherNamespace(a)?
c.push(a):c.push(e+a)}.bind(this)));var d;d=this._isRoleOfOtherNamespace(a.role)?a.role:e+a.role;b=this._isRoleOfOtherNamespace(b.from)?b.from:e+b.from;g[d][b]=g[d][b]?g[d][b].concat(c):c}.bind(this))}.bind(this));var h=this._cardinalityRules;d.cardinalityRules&&d.cardinalityRules.each(function(a){var b;b=this._isRoleOfOtherNamespace(a.role)?a.role:e+a.role;if(!h[b])for(i in h[b]={},a)h[b][i]=a[i];var c=new Hash;a.outgoingEdges&&a.outgoingEdges.each(function(a){this._isRoleOfOtherNamespace(a.role)?
c[a.role]=a:c[e+a.role]=a}.bind(this));h[b].outgoingEdges=c;var d=new Hash;a.incomingEdges&&a.incomingEdges.each(function(a){this._isRoleOfOtherNamespace(a.role)?d[a.role]=a:d[e+a.role]=a}.bind(this));h[b].incomingEdges=d}.bind(this));var j=this._containmentRules;d.containmentRules&&d.containmentRules.each(function(a){var b;b=this._isRoleOfOtherNamespace(a.role)?a.role:e+a.role;j[b]||(j[b]=[]);a.contains.each(function(a){this._isRoleOfOtherNamespace(a)?j[b].push(a):j[b].push(e+a)}.bind(this))}.bind(this));
var k=this._morphingRules;d.morphingRules&&d.morphingRules.each(function(a){var b;b=this._isRoleOfOtherNamespace(a.role)?a.role:e+a.role;k[b]||(k[b]=[]);a.preserveBounds||(a.preserveBounds=!1);a.baseMorphs.each(function(a){k[b].push(this._getStencilById(e+a))}.bind(this))}.bind(this));var l=this._layoutRules;if(d.layoutRules){var m=function(a){return{edgeRole:a.edgeRole||void 0,t:a.t||1,r:a.r||1,b:a.b||1,l:a.l||1}};d.layoutRules.each(function(a){var b;b=this._isRoleOfOtherNamespace(a.role)?a.role:
e+a.role;l[b]||(l[b]={});a["in"]&&(l[b]["in"]=m(a["in"]));a.ins&&(l[b].ins=(a.ins||[]).map(function(a){return m(a)}));a.out&&(l[b].out=m(a.out));a.outs&&(l[b].outs=(a.outs||[]).map(function(a){return m(a)}))}.bind(this))}}},_getStencilById:function(a){return this._stencils.find(function(b){return b.id()==a})},_cacheConnect:function(a){result=this._canConnect(a);if(a.sourceStencil&&a.targetStencil){var b=this._cachedConnectSET[a.sourceStencil.id()];b||(b=new Hash,this._cachedConnectSET[a.sourceStencil.id()]=
b);var c=b[a.edgeStencil.id()];c||(c=new Hash,b[a.edgeStencil.id()]=c);c[a.targetStencil.id()]=result}else a.sourceStencil?(b=this._cachedConnectSE[a.sourceStencil.id()],b||(b=new Hash,this._cachedConnectSE[a.sourceStencil.id()]=b)):(b=this._cachedConnectTE[a.targetStencil.id()],b||(b=new Hash,this._cachedConnectTE[a.targetStencil.id()]=b)),b[a.edgeStencil.id()]=result;return result},_cacheCard:function(a){if(a.sourceStencil){var b=this._cachedCardSE[a.sourceStencil.id()];b||(b=new Hash,this._cachedCardSE[a.sourceStencil.id()]=
b);var c=this._getMaximumNumberOfOutgoingEdge(a);void 0==c&&(c=-1);b[a.edgeStencil.id()]=c}a.targetStencil&&(b=this._cachedCardTE[a.targetStencil.id()],b||(b=new Hash,this._cachedCardTE[a.targetStencil.id()]=b),c=this._getMaximumNumberOfIncomingEdge(a),void 0==c&&(c=-1),b[a.edgeStencil.id()]=c)},_cacheContain:function(a){var b=[this._canContain(a),this._getMaximumOccurrence(a.containingStencil,a.containedStencil)];void 0==b[1]&&(b[1]=-1);var c=this._cachedContainPC[a.containingStencil.id()];c||(c=
new Hash,this._cachedContainPC[a.containingStencil.id()]=c);return c[a.containedStencil.id()]=b},_cacheMorph:function(a){var b=this._cachedMorphRS[a];b||(b=[],this._morphingRules.keys().include(a)&&(b=this._stencils.select(function(b){return b.roles().include(a)})),this._cachedMorphRS[a]=b);return b},outgoingEdgeStencils:function(a){if(!a.sourceShape&&!a.sourceStencil)return[];a.sourceShape&&(a.sourceStencil=a.sourceShape.getStencil());var b=[];this._stencils.each(function(c){if("edge"===c.type()){var d=
Object.clone(a);d.edgeStencil=c;this.canConnect(d)&&b.push(c)}}.bind(this));return b},incomingEdgeStencils:function(a){if(!a.targetShape&&!a.targetStencil)return[];a.targetShape&&(a.targetStencil=a.targetShape.getStencil());var b=[];this._stencils.each(function(c){if("edge"===c.type()){var d=Object.clone(a);d.edgeStencil=c;this.canConnect(d)&&b.push(c)}}.bind(this));return b},sourceStencils:function(a){if(!a||!a.edgeShape&&!a.edgeStencil)return[];a.targetShape&&(a.targetStencil=a.targetShape.getStencil());
a.edgeShape&&(a.edgeStencil=a.edgeShape.getStencil());var b=[];this._stencils.each(function(c){var d=Object.clone(a);d.sourceStencil=c;this.canConnect(d)&&b.push(c)}.bind(this));return b},targetStencils:function(a){if(!a||!a.edgeShape&&!a.edgeStencil)return[];a.sourceShape&&(a.sourceStencil=a.sourceShape.getStencil());a.edgeShape&&(a.edgeStencil=a.edgeShape.getStencil());var b=[];this._stencils.each(function(c){var d=Object.clone(a);d.targetStencil=c;this.canConnect(d)&&b.push(c)}.bind(this));return b},
canConnect:function(a){if(!a||!a.sourceShape&&!a.sourceStencil&&!a.targetShape&&!a.targetStencil||!a.edgeShape&&!a.edgeStencil)return!1;a.sourceShape&&(a.sourceStencil=a.sourceShape.getStencil());a.targetShape&&(a.targetStencil=a.targetShape.getStencil());a.edgeShape&&(a.edgeStencil=a.edgeShape.getStencil());var b;if(a.sourceStencil&&a.targetStencil){var c=this._cachedConnectSET[a.sourceStencil.id()];c?(b=c[a.edgeStencil.id()])?(c=b[a.targetStencil.id()],b=void 0==c?this._cacheConnect(a):c):b=this._cacheConnect(a):
b=this._cacheConnect(a)}else(c=a.sourceStencil?this._cachedConnectSE[a.sourceStencil.id()]:this._cachedConnectTE[a.targetStencil.id()])?(b=c[a.edgeStencil.id()],b=void 0==b?this._cacheConnect(a):b):b=this._cacheConnect(a);if(b){if(a.sourceShape){c=this._cachedCardSE[a.sourceStencil.id()];c||(this._cacheCard(a),c=this._cachedCardSE[a.sourceStencil.id()]);var d=c[a.edgeStencil.id()];void 0==d&&this._cacheCard(a);d=c[a.edgeStencil.id()];-1!=d&&(b=a.sourceShape.getOutgoingShapes().all(function(b){return b.getStencil().id()===
a.edgeStencil.id()&&(a.edgeShape?b!==a.edgeShape:1)?(d--,0<d?!0:!1):!0}))}a.targetShape&&(c=this._cachedCardTE[a.targetStencil.id()],c||(this._cacheCard(a),c=this._cachedCardTE[a.targetStencil.id()]),d=c[a.edgeStencil.id()],void 0==d&&this._cacheCard(a),d=c[a.edgeStencil.id()],-1!=d&&(b=a.targetShape.getIncomingShapes().all(function(b){return b.getStencil().id()===a.edgeStencil.id()&&(a.edgeShape?b!==a.edgeShape:1)?(d--,0<d?!0:!1):!0})))}return b},_canConnect:function(a){if(!a||!a.sourceShape&&!a.sourceStencil&&
!a.targetShape&&!a.targetStencil||!a.edgeShape&&!a.edgeStencil)return!1;a.sourceShape&&(a.sourceStencil=a.sourceShape.getStencil());a.targetShape&&(a.targetStencil=a.targetShape.getStencil());a.edgeShape&&(a.edgeStencil=a.edgeShape.getStencil());var b=this._getConnectionRulesOfEdgeStencil(a.edgeStencil);return 0===b.keys().length?!1:a.sourceStencil?a.sourceStencil.roles().any(function(c){c=b[c];return!c?!1:a.targetStencil?c.any(function(b){return a.targetStencil.roles().member(b)}):!0}):b.values().any(function(b){return a.targetStencil.roles().any(function(a){return b.member(a)})})},
canContain:function(a){if(!a||!a.containingStencil&&!a.containingShape||!a.containedStencil&&!a.containedShape)return!1;a.containedShape&&(a.containedStencil=a.containedShape.getStencil());a.containingShape&&(a.containingStencil=a.containingShape.getStencil());if("edge"==a.containedStencil.type())return!1;var b;(b=this._cachedContainPC[a.containingStencil.id()])?(b=b[a.containedStencil.id()])||(b=this._cacheContain(a)):b=this._cacheContain(a);if(b[0]){if(-1==b[1])return!0;if(a.containingShape){var c=
b[1];return a.containingShape.getChildShapes(!1).all(function(b){return b.getStencil().id()===a.containedStencil.id()?(c--,0<c?!0:!1):!0})}return!0}return!1},_canContain:function(a){if(!a||!a.containingStencil&&!a.containingShape||!a.containedStencil&&!a.containedShape)return!1;a.containedShape&&(a.containedStencil=a.containedShape.getStencil());a.containingShape&&(a.containingStencil=a.containingShape.getStencil());return a.containingStencil.roles().any(function(b){return(b=this._containmentRules[b])?
b.any(function(b){return a.containedStencil.roles().member(b)}):!1}.bind(this))},morphStencils:function(a){if(!a.stencil&&!a.shape)return[];a.shape&&(a.stencil=a.shape.getStencil());var b=[];a.stencil.roles().each(function(a){this._cacheMorph(a).each(function(a){b.push(a)})}.bind(this));return b.uniq()},baseMorphs:function(){var a=[];this._morphingRules.each(function(b){b.value.each(function(b){a.push(b)})});return a},containsMorphingRules:function(){return this._stencilSets.any(function(a){return!!a.jsonRules().morphingRules})},
connectMorph:function(a){if(!a||!a.sourceShape&&!a.sourceStencil&&!a.targetShape&&!a.targetStencil)return!1;a.sourceShape&&(a.sourceStencil=a.sourceShape.getStencil());a.targetShape&&(a.targetStencil=a.targetShape.getStencil());var b=this.incomingEdgeStencils(a),c=this.outgoingEdgeStencils(a),d=b.select(function(a){return c.member(a)}),a=this.baseMorphs().select(function(a){return d.member(a)});return 0<a.size()?a[0]:0<d.size()?d[0]:null},showInShapeMenu:function(a){return this._stencilSets.any(function(b){return b.jsonRules().morphingRules.any(function(c){return a.roles().include(b.namespace()+
c.role)&&!1!==c.showInShapeMenu})})},preserveBounds:function(a){return this._stencilSets.any(function(b){return b.jsonRules().morphingRules.any(function(c){return a.roles().include(b.namespace()+c.role)&&c.preserveBounds})})},getLayoutingRules:function(a,b){if(a&&a instanceof ORYX.Core.Shape){var c={"in":{},out:{}},d=function(a,d){a&&a[d]&&["t","r","b","l"].each(function(b){c[d][b]=Math.max(a[d][b],c[d][b]||0)});a&&a[d+"s"]instanceof Array&&["t","r","b","l"].each(function(g){var h=a[d+"s"].find(function(a){return!a.edgeRole}),
j;b instanceof ORYX.Core.Edge&&(j=a[d+"s"].find(function(a){return this._hasRole(b,a.edgeRole)}.bind(this)));c[d][g]=Math.max(j?j[g]:h[g],c[d][g]||0)}.bind(this))}.bind(this);a.getStencil().roles().each(function(a){this._layoutRules[a]&&(d(this._layoutRules[a],"in"),d(this._layoutRules[a],"out"))}.bind(this));["in","out"].each(function(a){["t","r","b","l"].each(function(b){c[a][b]=void 0!==c[a][b]?c[a][b]:1})});return c}},_hasRole:function(a,b){if(a instanceof ORYX.Core.Shape&&b)return a.getStencil().roles().any(function(a){return a==
b})||a.getStencil().id()==a.getStencil().namespace()+b},_stencilsWithRole:function(a){return this._stencils.findAll(function(b){return b.roles().member(a)?!0:!1})},_edgesWithRole:function(a){return this._stencils.findAll(function(b){return b.roles().member(a)&&"edge"===b.type()?!0:!1})},_nodesWithRole:function(a){return this._stencils.findAll(function(b){return b.roles().member(a)&&"node"===b.type()?!0:!1})},_getMaximumOccurrence:function(a,b){var c;b.roles().each(function(a){(a=this._cardinalityRules[a])&&
a.maximumOccurrence&&(c=c?Math.min(c,a.maximumOccurrence):a.maximumOccurrence)}.bind(this));return c},_getMaximumNumberOfOutgoingEdge:function(a){if(!a||!a.sourceStencil||!a.edgeStencil)return!1;var b;a.sourceStencil.roles().each(function(c){var d=this._cardinalityRules[c];d&&d.outgoingEdges&&a.edgeStencil.roles().each(function(a){(a=d.outgoingEdges[a])&&a.maximum&&(b=b?Math.min(b,a.maximum):a.maximum)})}.bind(this));return b},_getMaximumNumberOfIncomingEdge:function(a){if(!a||!a.targetStencil||!a.edgeStencil)return!1;
var b;a.targetStencil.roles().each(function(c){var d=this._cardinalityRules[c];d&&d.incomingEdges&&a.edgeStencil.roles().each(function(a){(a=d.incomingEdges[a])&&a.maximum&&(b=b?Math.min(b,a.maximum):a.maximum)})}.bind(this));return b},_getConnectionRulesOfEdgeStencil:function(a){var b=new Hash;a.roles().each(function(a){this._connectionRules[a]&&this._connectionRules[a].each(function(a){b[a.key]=b[a.key]?b[a.key].concat(a.value):a.value})}.bind(this));return b},_isRoleOfOtherNamespace:function(a){return 0<
a.indexOf("#")},toString:function(){return"Rules"}};ORYX.Core.StencilSet.Rules=Clazz.extend(ORYX.Core.StencilSet.Rules);ORYX||(ORYX={});ORYX.Core||(ORYX.Core={});ORYX.Core.StencilSet||(ORYX.Core.StencilSet={});
ORYX.Core.StencilSet.StencilSet=Clazz.extend({construct:function(a){arguments.callee.$.construct.apply(this,arguments);if(!a)throw"ORYX.Core.StencilSet.StencilSet(construct): Parameter 'source' is not defined.";a.endsWith("/")&&(a=a.substr(0,a.length-1));this._extensions=new Hash;this._source=a;this._baseUrl=ORYX.PATH+"stencilset/"+a+"/";this._jsonObject={};this._stencils=new Hash;this._availableStencils=new Hash;new Ajax.Request(ORYX.PATH+"stencilset/"+a,{asynchronous:!1,method:"get",onSuccess:this._init.bind(this),
onFailure:function(){throw"Loading stencil set "+a+" failed.";}.bind(a)})},findRootStencilName:function(){var a=this._stencils.values().find(function(a){return a._jsonStencil.mayBeRoot});a||(ORYX.Log.warn("Did not find any stencil that may be root. Taking a guess."),a=this._stencils.values()[0]);return a.id()},equals:function(a){return this.namespace()===a.namespace()},stencils:function(a,b,c){if(a&&b){for(var d=this._availableStencils.values(),e=[a],f=[],a=[];0<e.size();){var g=e.pop();f.push(g);
for(var h=d.findAll(function(a){return b.canContain({containingStencil:g,containedStencil:a})}),j=0;j<h.size();j++)f.member(h[j])||e.push(h[j]);a=a.concat(h).uniq()}a=a.sortBy(function(a){return d.indexOf(a)});c&&(a=a.sortBy(function(a){return a.groups().first()}));c=d.findAll(function(a){return"edge"==a.type()});return a=a.concat(c)}return c?this._availableStencils.values().sortBy(function(a){return a.groups().first()}):this._availableStencils.values()},nodes:function(){return this._availableStencils.values().findAll(function(a){return"node"===
a.type()})},edges:function(){return this._availableStencils.values().findAll(function(a){return"edge"===a.type()})},stencil:function(a){return this._stencils[a]},title:function(){return ORYX.Core.StencilSet.getTranslation(this._jsonObject,"title")},description:function(){return ORYX.Core.StencilSet.getTranslation(this._jsonObject,"description")},namespace:function(){return this._jsonObject?this._jsonObject.namespace:null},jsonRules:function(){return this._jsonObject?this._jsonObject.rules:null},source:function(){return this._source},
extensions:function(){return this._extensions},addExtension:function(a){this.addExtensionDirectly(a)},addExtensionFromDefinition:function(a){new Ajax.Request(a,{method:"GET",asynchronous:!1,onSuccess:function(a){try{this.addExtensionDirectly(a.responseText.evalJSON())}catch(c){ORYX.Log.debug("Unable to load extension definition: "+c),Ext.Msg.alert("Oryx","Unable to load extension definition: "+c)}}.bind(this),onFailure:function(){Ext.Msg.alert("Oryx","Unable to create extension definition.")}.bind(this)})},
addExtensionDirectly:function(a){try{if(a["extends"].endsWith("#")||(a["extends"]+="#"),a["extends"]==this.namespace()){this._extensions[a.namespace]=a;var b=this._stencils.keys().size();a.stencils&&$A(a.stencils).each(function(a){b++;a=new ORYX.Core.StencilSet.Stencil(a,this.namespace(),this._baseUrl,this,void 0,b);this._stencils[a.id()]=a;this._availableStencils[a.id()]=a}.bind(this));a.properties&&this._stencils.values().each(function(b){var c=b.roles();a.properties.each(function(f){f.roles.any(function(g){g=
a["extends"]+g;return c.member(g)?(f.properties.each(function(c){b.addProperty(c,a.namespace)}),!0):!1})})}.bind(this));a.removeproperties&&a.removeproperties.each(function(b){var c=this.stencil(a["extends"]+b.stencil);c&&b.properties.each(function(a){c.removeProperty(a)})}.bind(this));a.removestencils&&$A(a.removestencils).each(function(b){delete this._availableStencils[a["extends"]+b]}.bind(this))}}catch(c){ORYX.Log.debug("StencilSet.addExtension: Something went wrong when initialising the stencil set extension. "+
c)}},changeTitle:function(a){this._jsonObject.title=a},removeExtension:function(a){var b=this._extensions[a];b&&(b.stencils&&$A(b.stencils).each(function(a){a=new ORYX.Core.StencilSet.Stencil(a,this.namespace(),this._baseUrl,this);delete this._stencils[a.id()];delete this._availableStencils[a.id()]}.bind(this)),b.properties&&this._stencils.values().each(function(a){var d=a.roles();b.properties.each(function(e){e.roles.any(function(f){f=b["extends"]+f;return d.member(f)?(e.properties.each(function(b){a.removeProperty(b.id)}),
!0):!1})})}.bind(this)),b.removeproperties&&b.removeproperties.each(function(a){var d=this.stencil(b["extends"]+a.stencil);if(d){var e=$A(this._jsonObject.stencils).find(function(a){return a.id==d.id()});a.properties.each(function(a){var b=$A(e.properties).find(function(b){return b.id==a});d.addProperty(b,this.namespace())}.bind(this))}}.bind(this)),b.removestencils&&$A(b.removestencils).each(function(a){a=b["extends"]+a;this._availableStencils[a]=this._stencils[a]}.bind(this)));delete this._extensions[a]},
__handleStencilset:function(a){try{eval("this._jsonObject ="+a.responseText)}catch(b){throw"Stenciset corrupt: "+b;}if(!this._jsonObject)throw"Error evaluating stencilset. It may be corrupt.";with(this._jsonObject){if(!namespace||""===namespace)throw"Namespace definition missing in stencilset.";if(!(stencils instanceof Array))throw"Stencilset corrupt.";namespace.endsWith("#")||(namespace+="#");title||(title="");description||(description="")}},_getJSONURL:function(a){this._baseUrl=a.responseText.substring(0,
a.responseText.lastIndexOf("/")+1);this._source=a.responseText;new Ajax.Request(a.responseText,{asynchronous:!1,method:"get",onSuccess:this._init.bind(this),onFailure:this._cancelInit.bind(this)})},_init:function(a){this.__handleStencilset(a);var b=new Hash;this._jsonObject.propertyPackages&&$A(this._jsonObject.propertyPackages).each(function(a){b[a.name]=a.properties}.bind(this));var c=0;$A(this._jsonObject.stencils).each(function(a){c++;try{var e=new ORYX.Core.StencilSet.Stencil(a,this.namespace(),
this._baseUrl,this,b,c);this._stencils[e.id()]=e;this._availableStencils[e.id()]=e}catch(f){ORYX.Log.error("Problems instantiating a stencil:"),void 0!==console&&(console.log(f),void 0!==f.stack&&console.log(f.stack))}}.bind(this))},toString:function(){return"StencilSet "+this.title()+" ("+this.namespace()+")"}});ORYX||(ORYX={});ORYX.Core||(ORYX.Core={});ORYX.Core.StencilSet||(ORYX.Core.StencilSet={});ORYX.Core.StencilSet._stencilSetsByNamespace=new Hash;ORYX.Core.StencilSet._stencilSetsByUrl=new Hash;ORYX.Core.StencilSet._StencilSetNSByEditorInstance=new Hash;ORYX.Core.StencilSet._rulesByEditorInstance=new Hash;
ORYX.Core.StencilSet.stencilSets=function(a){var a=ORYX.Core.StencilSet._StencilSetNSByEditorInstance[a],b=new Hash;a&&a.each(function(a){a=ORYX.Core.StencilSet.stencilSet(a);b[a.namespace()]=a});return b};ORYX.Core.StencilSet.stencilSet=function(a){ORYX.Log.trace("Getting stencil set %0",a);a=a.split("#",1);if(1===a.length)return ORYX.Log.trace("Getting stencil set %0",a[0]),ORYX.Core.StencilSet._stencilSetsByNamespace[a[0]+"#"]};
ORYX.Core.StencilSet.stencil=function(a){ORYX.Log.trace("Getting stencil for %0",a);var b=ORYX.Core.StencilSet.stencilSet(a);if(b)return b.stencil(a);ORYX.Log.trace("Cannot fild stencil for %0",a)};ORYX.Core.StencilSet.rules=function(a){ORYX.Core.StencilSet._rulesByEditorInstance[a]||(ORYX.Core.StencilSet._rulesByEditorInstance[a]=new ORYX.Core.StencilSet.Rules);return ORYX.Core.StencilSet._rulesByEditorInstance[a]};
ORYX.Core.StencilSet.loadStencilSet=function(a,b){var c=ORYX.Core.StencilSet._stencilSetsByUrl[a];c||(c=new ORYX.Core.StencilSet.StencilSet(a),ORYX.Core.StencilSet._stencilSetsByNamespace[c.namespace()]=c,ORYX.Core.StencilSet._stencilSetsByUrl[a]=c);var d=c.namespace();ORYX.Core.StencilSet._StencilSetNSByEditorInstance[b]?ORYX.Core.StencilSet._StencilSetNSByEditorInstance[b].push(d):ORYX.Core.StencilSet._StencilSetNSByEditorInstance[b]=[d];ORYX.Core.StencilSet._rulesByEditorInstance[b]?ORYX.Core.StencilSet._rulesByEditorInstance[b].initializeRules(c):
(d=new ORYX.Core.StencilSet.Rules,d.initializeRules(c),ORYX.Core.StencilSet._rulesByEditorInstance[b]=d)};ORYX.Core.StencilSet.getTranslation=function(a,b){var c=ORYX.I18N.Language.toLowerCase(),d=a[b+"_"+c];return d?d:(d=a[b+"_"+c.substr(0,2)])?d:a[b]};ORYX||(ORYX={});ORYX.Core||(ORYX.Core={});ORYX.Core.Command=Clazz.extend({construct:function(){},execute:function(){throw"Command.execute() has to be implemented!";},rollback:function(){throw"Command.rollback() has to be implemented!";}});ORYX||(ORYX={});ORYX.Core||(ORYX.Core={});
ORYX.Core.Bounds={construct:function(){this._changedCallbacks=[];this.a={};this.b={};this.set.apply(this,arguments);this.changedWhileSuspend=this.suspendChange=!1},_changed:function(a){this.suspendChange?this.changedWhileSuspend=!0:(this._changedCallbacks.each(function(b){b(this,a)}.bind(this)),this.changedWhileSuspend=!1)},registerCallback:function(a){this._changedCallbacks.member(a)||this._changedCallbacks.push(a)},unregisterCallback:function(a){this._changedCallbacks=this._changedCallbacks.without(a)},
set:function(){var a=!1;switch(arguments.length){case 1:this.a.x!==arguments[0].a.x&&(a=!0,this.a.x=arguments[0].a.x);this.a.y!==arguments[0].a.y&&(a=!0,this.a.y=arguments[0].a.y);this.b.x!==arguments[0].b.x&&(a=!0,this.b.x=arguments[0].b.x);this.b.y!==arguments[0].b.y&&(a=!0,this.b.y=arguments[0].b.y);break;case 2:var b=Math.min(arguments[0].x,arguments[1].x),c=Math.min(arguments[0].y,arguments[1].y),d=Math.max(arguments[0].x,arguments[1].x),e=Math.max(arguments[0].y,arguments[1].y);this.a.x!==b&&
(a=!0,this.a.x=b);this.a.y!==c&&(a=!0,this.a.y=c);this.b.x!==d&&(a=!0,this.b.x=d);this.b.y!==e&&(a=!0,this.b.y=e);break;case 4:b=Math.min(arguments[0],arguments[2]),c=Math.min(arguments[1],arguments[3]),d=Math.max(arguments[0],arguments[2]),e=Math.max(arguments[1],arguments[3]),this.a.x!==b&&(a=!0,this.a.x=b),this.a.y!==c&&(a=!0,this.a.y=c),this.b.x!==d&&(a=!0,this.b.x=d),this.b.y!==e&&(a=!0,this.b.y=e)}a&&this._changed(!0)},moveTo:function(){var a=this.upperLeft();switch(arguments.length){case 1:this.moveBy({x:arguments[0].x-
a.x,y:arguments[0].y-a.y});break;case 2:this.moveBy({x:arguments[0]-a.x,y:arguments[1]-a.y})}},moveBy:function(){var a=!1;switch(arguments.length){case 1:var b=arguments[0];if(0!==b.x||0!==b.y)a=!0,this.a.x+=b.x,this.b.x+=b.x,this.a.y+=b.y,this.b.y+=b.y;break;case 2:var b=arguments[0],c=arguments[1];if(0!==b||0!==c)a=!0,this.a.x+=b,this.b.x+=b,this.a.y+=c,this.b.y+=c}a&&this._changed()},include:function(a){if(void 0===this.a.x&&void 0===this.a.y&&void 0===this.b.x&&void 0===this.b.y)return a;var b=
Math.min(this.a.x,a.a.x),c=Math.min(this.a.y,a.a.y),d=Math.max(this.b.x,a.b.x),a=Math.max(this.b.y,a.b.y);this.set(b,c,d,a)},extend:function(a){if(0!==a.x||0!==a.y)this.b.x+=a.x,this.b.y+=a.y,this._changed(!0)},widen:function(a){0!==a&&(this.suspendChange=!0,this.moveBy({x:-a,y:-a}),this.extend({x:2*a,y:2*a}),this.suspendChange=!1,this.changedWhileSuspend&&this._changed(!0))},upperLeft:function(){return{x:this.a.x,y:this.a.y}},lowerRight:function(){return{x:this.b.x,y:this.b.y}},width:function(){return this.b.x-
this.a.x},height:function(){return this.b.y-this.a.y},center:function(){return{x:(this.a.x+this.b.x)/2,y:(this.a.y+this.b.y)/2}},midPoint:function(){return{x:(this.b.x-this.a.x)/2,y:(this.b.y-this.a.y)/2}},centerMoveTo:function(){var a=this.center();switch(arguments.length){case 1:this.moveBy(arguments[0].x-a.x,arguments[0].y-a.y);break;case 2:this.moveBy(arguments[0]-a.x,arguments[1]-a.y)}},isIncluded:function(a,b){var c,d;switch(arguments.length){case 1:c=arguments[0].x;d=arguments[0].y;b=0;break;
case 2:arguments[0].x&&arguments[0].y?(c=arguments[0].x,d=arguments[0].y,b=Math.abs(arguments[1])):(c=arguments[0],d=arguments[1],b=0);break;case 3:c=arguments[0];d=arguments[1];b=Math.abs(arguments[2]);break;default:throw"isIncluded needs one, two or three arguments";}var e=this.upperLeft(),f=this.lowerRight();return c>=e.x-b&&c<=f.x+b&&d>=e.y-b&&d<=f.y+b?!0:!1},clone:function(){return new ORYX.Core.Bounds(this)},toString:function(){return"( "+this.a.x+" | "+this.a.y+" )/( "+this.b.x+" | "+this.b.y+
" )"},serializeForERDF:function(){return this.a.x+","+this.a.y+","+this.b.x+","+this.b.y}};ORYX.Core.Bounds=Clazz.extend(ORYX.Core.Bounds);ORYX||(ORYX={});ORYX.Core||(ORYX.Core={});
ORYX.Core.UIObject={construct:function(a){this.isVisible=this.isResized=this.isChanged=!0;this.isMovable=this.isResizable=this.isSelectable=!1;this.id=ORYX.Editor.provideId();this.node=this.parent=void 0;this.children=[];this.bounds=new ORYX.Core.Bounds;this._changedCallback=this._changed.bind(this);this.bounds.registerCallback(this._changedCallback);a&&a.eventHandlerCallback&&(this.eventHandlerCallback=a.eventHandlerCallback)},_changed:function(a,b){this.isChanged=!0;this.bounds==a&&(this.isResized=
b||this.isResized)},update:function(){this.isChanged&&(this.refresh(),this.isChanged=!1,this.children.each(function(a){a.update()}))},refresh:function(){},getChildren:function(){return this.children.clone()},getParents:function(){for(var a=[],b=this.parent;b;)a.push(b),b=b.parent;return a},isParent:function(a){for(var b=this;b;){if(b===a)return!0;b=b.parent}return!1},getId:function(){return this.id},getChildById:function(a,b){return this.children.find(function(c){if(c.getId()===a||b&&(c=c.getChildById(a,
b)))return c})},add:function(a){this.children.member(a)?ORYX.Log.info("add: ORYX.Core.UIObject is already a child of this object."):(a.parent&&a.remove(a),this.children.push(a),a.parent=this,a.node=this.node.appendChild(a.node),a.bounds.registerCallback(this._changedCallback),this.eventHandlerCallback&&this.eventHandlerCallback({type:ORYX.CONFIG.EVENT_SHAPEADDED,shape:a}))},remove:function(a){this.children.member(a)?(this.children=this._uiObjects.without(a),a.parent=void 0,a.node=this.node.removeChild(a.node),
a.bounds.unregisterCallback(this._changedCallback)):ORYX.Log.info("remove: ORYX.Core.UIObject is not a child of this object.")},absoluteBounds:function(){if(this.parent){var a=this.absoluteXY();return new ORYX.Core.Bounds(a.x,a.y,a.x+this.bounds.width(),a.y+this.bounds.height())}return this.bounds.clone()},absoluteXY:function(){if(this.parent){var a=this.parent.absoluteXY();return{x:a.x+this.bounds.upperLeft().x,y:a.y+this.bounds.upperLeft().y}}return{x:this.bounds.upperLeft().x,y:this.bounds.upperLeft().y}},
absoluteCenterXY:function(){if(this.parent){var a=this.parent.absoluteXY();return{x:a.x+this.bounds.center().x,y:a.y+this.bounds.center().y}}return{x:this.bounds.center().x,y:this.bounds.center().y}},hide:function(){this.node.setAttributeNS(null,"display","none");this.isVisible=!1;this.children.each(function(a){a.hide()})},show:function(){this.node.setAttributeNS(null,"display","inherit");this.isVisible=!0;this.children.each(function(a){a.show()})},addEventHandlers:function(a){a.addEventListener(ORYX.CONFIG.EVENT_MOUSEDOWN,
this._delegateEvent.bind(this),!1);a.addEventListener(ORYX.CONFIG.EVENT_MOUSEMOVE,this._delegateEvent.bind(this),!1);a.addEventListener(ORYX.CONFIG.EVENT_MOUSEUP,this._delegateEvent.bind(this),!1);a.addEventListener(ORYX.CONFIG.EVENT_MOUSEOVER,this._delegateEvent.bind(this),!1);a.addEventListener(ORYX.CONFIG.EVENT_MOUSEOUT,this._delegateEvent.bind(this),!1);a.addEventListener("click",this._delegateEvent.bind(this),!1);a.addEventListener(ORYX.CONFIG.EVENT_DBLCLICK,this._delegateEvent.bind(this),!1)},
_delegateEvent:function(a){this.eventHandlerCallback&&this.eventHandlerCallback(a,this)},toString:function(){return"UIObject "+this.id}};ORYX.Core.UIObject=Clazz.extend(ORYX.Core.UIObject);ORYX||(ORYX={});ORYX.Core||(ORYX.Core={});
ORYX.Core.AbstractShape=ORYX.Core.UIObject.extend({construct:function(a,b){arguments.callee.$.construct.apply(this,arguments);this.resourceId=ORYX.Editor.provideId();this._stencil=b;this._stencil._jsonStencil.superId&&(stencilId=this._stencil.id(),superStencilId=stencilId.substring(0,stencilId.indexOf("#")+1)+b._jsonStencil.superId,stencilSet=this._stencil.stencilSet(),this._stencil=stencilSet.stencil(superStencilId));this.properties=new Hash;this.propertiesChanged=new Hash;this.hiddenProperties=
new Hash;this._stencil.properties().each(function(a){var b=a.prefix()+"-"+a.id();this.properties[b]=a.value();this.propertiesChanged[b]=!0}.bind(this));b._jsonStencil.superId&&b.properties().each(function(a){var b=a.prefix()+"-"+a.id(),a=a.value(),e=this.properties[b];this.properties[b]=a;this.propertiesChanged[b]=!0;this._delegateEvent({type:ORYX.CONFIG.EVENT_PROPERTY_CHANGED,name:b,value:a,oldValue:e})}.bind(this))},layout:function(){},getStencil:function(){return this._stencil},getChildShapeByResourceId:function(a){a=
ERDF.__stripHashes(a);return this.getChildShapes(!0).find(function(b){return b.resourceId==a})},getChildShapes:function(a,b){var c=[];this.children.each(function(d){d instanceof ORYX.Core.Shape&&d.isVisible&&(b&&b(d),c.push(d),a&&(c=c.concat(d.getChildShapes(a,b))))});return c},hasChildShape:function(a){return this.getChildShapes().any(function(b){return b===a||b.hasChildShape(a)})},getChildNodes:function(a,b){var c=[];this.children.each(function(d){d instanceof ORYX.Core.Node&&d.isVisible&&(b&&b(d),
c.push(d));d instanceof ORYX.Core.Shape&&a&&(c=c.concat(d.getChildNodes(a,b)))});return c},getChildEdges:function(a,b){var c=[];this.children.each(function(d){d instanceof ORYX.Core.Edge&&d.isVisible&&(b&&b(d),c.push(d));d instanceof ORYX.Core.Shape&&a&&(c=c.concat(d.getChildEdges(a,b)))});return c},getAbstractShapesAtPosition:function(){var a,b;switch(arguments.length){case 1:a=arguments[0].x;b=arguments[0].y;break;case 2:a=arguments[0];b=arguments[1];break;default:throw"getAbstractShapesAtPosition needs 1 or 2 arguments!";
}if(this.isPointIncluded(a,b)){var c=[];c.push(this);var d=this.getChildNodes(),e=this.getChildEdges();[d,e].each(function(d){var e=new Hash;d.each(function(c){if(c.isVisible){var d=c.getAbstractShapesAtPosition(a,b);0<d.length&&(c=$A(c.node.parentNode.childNodes).indexOf(c.node),e[c]=d)}});e.keys().sort().each(function(a){c=c.concat(e[a])})});return c}return[]},setProperty:function(a,b,c){var d=this.properties[a];if(d!==b||!0===c)this.properties[a]=b,this.propertiesChanged[a]=!0,this._changed(),
this._isInSetProperty||(this._isInSetProperty=!0,this._delegateEvent({type:ORYX.CONFIG.EVENT_PROPERTY_CHANGED,elements:[this],name:a,value:b,oldValue:d}),delete this._isInSetProperty)},setHiddenProperty:function(a,b){void 0===b?delete this.hiddenProperties[a]:this.hiddenProperties[a]!==b&&(this.hiddenProperties[a]=b)},isPointIncluded:function(a,b,c){return(c?c:this.absoluteBounds()).isIncluded(a,b)},serialize:function(){var a=[];a.push({name:"type",prefix:"oryx",value:this.getStencil().id(),type:"literal"});
this.hiddenProperties.each(function(b){a.push({name:b.key.replace("oryx-",""),prefix:"oryx",value:b.value,type:"literal"})}.bind(this));this.getStencil().properties().each(function(b){var c=b.prefix(),b=b.id();a.push({name:b,prefix:c,value:this.properties[c+"-"+b],type:"literal"})}.bind(this));return a},deserialize:function(a){a=a.sort(function(a,c){return Number(this.properties.keys().member(a.prefix+"-"+a.name))>Number(this.properties.keys().member(c.prefix+"-"+c.name))?-1:0}.bind(this));a.each(function(a){var c=
a.name,d=a.prefix,a=a.value;"object"===Ext.type(a)&&(a=Ext.encode(a));switch(d+"-"+c){case "raziel-parent":if(!this.parent)break;(c=this.getCanvas().getChildShapeByResourceId(a))&&c.add(this);break;default:this.properties.keys().member(d+"-"+c)?this.setProperty(d+"-"+c,a):"bounds"===c||"parent"===c||"target"===c||"dockers"===c||"docker"===c||"outgoing"===c||"incoming"===c||this.setHiddenProperty(d+"-"+c,a)}}.bind(this))},toString:function(){return"ORYX.Core.AbstractShape "+this.id},toJSON:function(){var a=
{resourceId:this.resourceId,properties:Ext.apply({},this.properties,this.hiddenProperties).inject({},function(a,c){var d=c[0],e=c[1];if(this.getStencil().property(d)&&this.getStencil().property(d).type()===ORYX.CONFIG.TYPE_COMPLEX&&"string"===Ext.type(e))try{e=Ext.decode(e)}catch(f){}d=d.replace(/^[\w_]+-/,"");a[d]=e;return a}.bind(this)),stencil:{id:this.getStencil().idWithoutNs()},childShapes:this.getChildShapes().map(function(a){return a.toJSON()})};this.getOutgoingShapes&&(a.outgoing=this.getOutgoingShapes().map(function(a){return{resourceId:a.resourceId}}));
this.bounds&&(a.bounds={lowerRight:this.bounds.lowerRight(),upperLeft:this.bounds.upperLeft()});this.dockers&&(a.dockers=this.dockers.map(function(a){var c=a.getDockedShape()&&a.referencePoint?a.referencePoint:a.bounds.center();c.getDocker=function(){return a};return c}));Ext.apply(a,ORYX.Core.AbstractShape.JSONHelper);a.getShape=function(){return this}.bind(this);return a}});
ORYX.Core.AbstractShape.JSONHelper={eachChild:function(a,b,c){if(this.childShapes){var d=[];this.childShapes.each(function(e){var f=a(e,this);f&&d.push(f);b&&e.eachChild(a,b,c)}.bind(this));c&&(this.childShapes=d)}},getChildShapes:function(a){var b=this.childShapes;a&&this.eachChild(function(c){b=b.concat(c.getChildShapes(a))},!0);return b},serialize:function(){return Ext.encode(this)}};ORYX||(ORYX={});ORYX.Core||(ORYX.Core={});
ORYX.Core.Canvas=ORYX.Core.AbstractShape.extend({zoomLevel:1,construct:function(a){arguments.callee.$.construct.apply(this,arguments);!a||!a.width||!a.height?ORYX.Log.fatal("Canvas is missing mandatory parameters options.width and options.height."):(this.resourceId=a.id,this.nodes=[],this.edges=[],this.rootNode=ORYX.Editor.graft("http://www.w3.org/2000/svg",a.parentNode,["svg",{id:this.id,width:a.width,height:a.height},["defs",{}]]),this.rootNode.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),
this.rootNode.setAttribute("xmlns:svg","http://www.w3.org/2000/svg"),this._htmlContainer=ORYX.Editor.graft("http://www.w3.org/1999/xhtml",a.parentNode,["div",{id:"oryx_canvas_htmlContainer",style:"position:absolute; top:5px"}]),this.node=ORYX.Editor.graft("http://www.w3.org/2000/svg",this.rootNode,["g",{},["g",{"class":"stencils"},["g",{"class":"me"}],["g",{"class":"children"}],["g",{"class":"edge"}]],["g",{"class":"svgcontainer"}]]),this.node.setAttributeNS(null,"stroke","none"),this.node.setAttributeNS(null,
"font-family","Verdana, sans-serif"),this.node.setAttributeNS(null,"font-size-adjust","none"),this.node.setAttributeNS(null,"font-style","normal"),this.node.setAttributeNS(null,"font-variant","normal"),this.node.setAttributeNS(null,"font-weight","normal"),this.node.setAttributeNS(null,"line-heigth","normal"),this.node.setAttributeNS(null,"font-size",ORYX.CONFIG.LABEL_DEFAULT_LINE_HEIGHT),this.bounds.set(0,0,a.width,a.height),this.addEventHandlers(this.rootNode.parentNode),this.rootNode.oncontextmenu=
function(){return!1})},focus:function(){this.headerA||(this.headerA=Ext.get("oryx_editor_header").child("a").dom);this.headerA.focus();this.headerA.blur()},update:function(){this.nodes.each(function(a){this._traverseForUpdate(a)}.bind(this));var a=this.getStencil().layout();a&&a.each(function(a){a.shape=this;a.forceExecution=!0;a.target=this.rootNode;this._delegateEvent(a)}.bind(this));this.nodes.invoke("_update");this.edges.invoke("_update",!0)},_traverseForUpdate:function(a){var b=a.isChanged;a.getChildNodes(!1,
function(a){this._traverseForUpdate(a)&&(b=!0)}.bind(this));return b?(a.layout(),!0):!1},layout:function(){},getChildNodes:function(a,b){if(!a&&!b)return this.nodes.clone();var c=[];this.nodes.each(function(d){b&&b(d);c.push(d);a&&d instanceof ORYX.Core.Shape&&(c=c.concat(d.getChildNodes(a,b)))});return c},add:function(a){a instanceof ORYX.Core.UIObject?this.children.member(a)?ORYX.Log.warn("add: ORYX.Core.UIObject is already a child of this object."):(a.parent&&a.parent.remove(a),this.children.push(a),
a.parent=this,a instanceof ORYX.Core.Shape?a instanceof ORYX.Core.Edge?(a.addMarkers(this.rootNode.getElementsByTagNameNS(NAMESPACE_SVG,"defs")[0]),a.node=this.node.childNodes[0].childNodes[2].appendChild(a.node),this.edges.push(a)):(a.node=this.node.childNodes[0].childNodes[1].appendChild(a.node),this.nodes.push(a)):a.node=this.node.appendChild(a.node),a.bounds.registerCallback(this._changedCallback),this.eventHandlerCallback&&this.eventHandlerCallback({type:ORYX.CONFIG.EVENT_SHAPEADDED,shape:a})):
ORYX.Log.fatal("add: Parameter is not of type ORYX.Core.UIObject.")},remove:function(a){this.children.member(a)?(this.children=this.children.without(a),a.parent=void 0,a instanceof ORYX.Core.Shape?a instanceof ORYX.Core.Edge?(a.removeMarkers(),a.node=this.node.childNodes[0].childNodes[2].removeChild(a.node),this.edges=this.edges.without(a)):(a.node=this.node.childNodes[0].childNodes[1].removeChild(a.node),this.nodes=this.nodes.without(a)):a.node=this.node.removeChild(a.node),a.bounds.unregisterCallback(this._changedCallback)):
ORYX.Log.warn("remove: ORYX.Core.UIObject is not a child of this object.")},addShapeObjects:function(a,b){if(a){var c=function(a,c){try{var d=ORYX.Core.StencilSet.stencil(this.getStencil().namespace()+a.stencil.id),e=new ("node"==d.type()?ORYX.Core.Node:ORYX.Core.Edge)({eventHandlerCallback:b},d);e.resourceId=a.resourceId;a.parent="#"+(a.parent&&a.parent.resourceId||c.resourceId);this.add(e);return{json:a,object:e}}catch(k){ORYX.Log.warn("LoadingContent: Stencil could not create.")}}.bind(this),d=
function(a){var b=[];a.childShapes&&a.childShapes.each(function(e){var j=c(e,a);"undefined"!==typeof j&&b.push(j);b=b.concat(d(e))});return b}.bind(this),e=d({childShapes:a,resourceId:this.resourceId});e.each(function(a){var b=[];for(field in a.json.properties)b.push({prefix:"oryx",name:field,value:a.json.properties[field]});a.json.outgoing.each(function(a){b.push({prefix:"raziel",name:"outgoing",value:"#"+a.resourceId})});if(a.object instanceof ORYX.Core.Edge){var c=a.json.target||a.json.outgoing[0];
c&&b.push({prefix:"raziel",name:"target",value:"#"+c.resourceId})}a.json.bounds&&b.push({prefix:"oryx",name:"bounds",value:a.json.bounds.upperLeft.x+","+a.json.bounds.upperLeft.y+","+a.json.bounds.lowerRight.x+","+a.json.bounds.lowerRight.y});a.json.dockers&&b.push({prefix:"oryx",name:"dockers",value:a.json.dockers.inject("",function(a,b){return a+b.x+" "+b.y+" "})+" #"});b.push({prefix:"raziel",name:"parent",value:a.json.parent});a.__properties=b}.bind(this));e.each(function(a){a.object instanceof
ORYX.Core.Node&&a.object.deserialize(a.__properties)});e.each(function(a){a.object instanceof ORYX.Core.Edge&&a.object.deserialize(a.__properties)});return e.pluck("object")}},absoluteBounds:function(){return new ORYX.Core.Bounds(0,0,this.getHTMLContainer().parentNode.offsetWidth,this.getHTMLContainer().parentNode.offsetHeight)},updateSize:function(){var a=0,b=0;this.getChildShapes(!0,function(c){c=c.bounds;a=Math.max(a,c.lowerRight().x+100);b=Math.max(b,c.lowerRight().y+100)});(this.bounds.width()<
a||this.bounds.height()<b)&&this.setSize({width:Math.max(this.bounds.width(),a),height:Math.max(this.bounds.height(),b)})},getRootNode:function(){return this.rootNode},getSvgContainer:function(){return this.node.childNodes[1]},getHTMLContainer:function(){return this._htmlContainer},getShapesWithSharedParent:function(a){return!a||1>a.length?[]:1==a.length?a:a.findAll(function(b){for(b=b.parent;b;){if(a.member(b))return!1;b=b.parent}return!0})},setSize:function(a,b){a&&a.width&&a.height&&(this.rootNode.parentNode&&
(this.rootNode.parentNode.style.width=a.width+"px",this.rootNode.parentNode.style.height=a.height+"px"),this.rootNode.setAttributeNS(null,"width",a.width),this.rootNode.setAttributeNS(null,"height",a.height),b||this.bounds.set({a:{x:0,y:0},b:{x:a.width/this.zoomLevel,y:a.height/this.zoomLevel}}))},getSVGRepresentation:function(a){var b=this.getRootNode().cloneNode(!0);this._removeInvisibleElements(b);var c,d,e,f;try{var g=this.getRootNode().childNodes[1].getBBox();c=g.x;d=g.y;e=g.x+g.width;f=g.y+
g.height}catch(h){this.getChildShapes(!0).each(function(a){var b=a.absoluteBounds(),a=b.upperLeft(),b=b.lowerRight();void 0==c?(c=a.x,d=a.y,e=b.x,f=b.y):(c=Math.min(c,a.x),d=Math.min(d,a.y),e=Math.max(e,b.x),f=Math.max(f,b.y))})}var j,k,l;void 0==c?l=k=j=g=0:(g=e-c,j=f-d,k=-c+25,l=-d+25);b.setAttributeNS(null,"width",g+50);b.setAttributeNS(null,"height",j+50);b.childNodes[1].firstChild.setAttributeNS(null,"transform","translate("+k+", "+l+")");b.childNodes[1].removeAttributeNS(null,"transform");try{var m=
b.childNodes[1].childNodes[1];m.parentNode.removeChild(m)}catch(n){}a&&($A(b.getElementsByTagNameNS(ORYX.CONFIG.NAMESPACE_SVG,"tspan")).each(function(a){a.textContent=a.textContent.escapeHTML()}),$A(b.getElementsByTagNameNS(ORYX.CONFIG.NAMESPACE_SVG,"text")).each(function(a){0==a.childNodes.length&&(a.textContent=a.textContent.escapeHTML())}));$A(b.getElementsByTagNameNS(ORYX.CONFIG.NAMESPACE_SVG,"image")).each(function(a){var b=a.getAttributeNS("http://www.w3.org/1999/xlink","href");!b.match("^(http|https)://")&&
-1==b.indexOf("base64")&&(b=window.location.protocol+"//"+window.location.host+b,a.setAttributeNS("http://www.w3.org/1999/xlink","href",b))});$A(b.getElementsByTagNameNS(ORYX.CONFIG.NAMESPACE_SVG,"a")).each(function(a){a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",(a.getAttributeNS("http://www.w3.org/1999/xlink","href")||"").escapeHTML())});return b},_removeInvisibleElements:function(a){for(var b=0;b<a.childNodes.length;){var c=a.childNodes[b];c.getAttributeNS&&"hidden"===c.getAttributeNS(null,
"visibility")?a.removeChild(c):(this._removeInvisibleElements(c),b++)}},_delegateEvent:function(a){this.eventHandlerCallback&&(a.target==this.rootNode||a.target==this.rootNode.parentNode)&&this.eventHandlerCallback(a,this)},toString:function(){return"Canvas "+this.id},toJSON:function(){var a=arguments.callee.$.toJSON.apply(this,arguments);a.stencilset={url:this.getStencil().stencilSet().source(),namespace:this.getStencil().stencilSet().namespace()};return a}});ORYX||(ORYX={});ORYX.Core||(ORYX.Core={});
ORYX.Core.UIEnableDrag=function(a,b,c){this.uiObj=b;var d=b.bounds.upperLeft(),e=b.node.getScreenCTM();this.faktorXY={x:e.a,y:e.d};this.scrollNode=b.node.ownerSVGElement.parentNode.parentNode;this.offSetPosition={x:Event.pointerX(a)-d.x*this.faktorXY.x,y:Event.pointerY(a)-d.y*this.faktorXY.y};this.offsetScroll={x:this.scrollNode.scrollLeft,y:this.scrollNode.scrollTop};this.dragCallback=ORYX.Core.UIDragCallback.bind(this);this.disableCallback=ORYX.Core.UIDisableDrag.bind(this);this.movedCallback=c?
c.movedCallback:void 0;this.upCallback=c?c.upCallback:void 0;document.documentElement.addEventListener(ORYX.CONFIG.EVENT_MOUSEUP,this.disableCallback,!0);document.documentElement.addEventListener(ORYX.CONFIG.EVENT_MOUSEMOVE,this.dragCallback,!1)};
ORYX.Core.UIDragCallback=function(a){var b={x:Event.pointerX(a)-this.offSetPosition.x,y:Event.pointerY(a)-this.offSetPosition.y};b.x-=this.offsetScroll.x-this.scrollNode.scrollLeft;b.y-=this.offsetScroll.y-this.scrollNode.scrollTop;b.x/=this.faktorXY.x;b.y/=this.faktorXY.y;this.uiObj.bounds.moveTo(b);this.movedCallback&&this.movedCallback(a);Event.stop(a)};
ORYX.Core.UIDisableDrag=function(a){document.documentElement.removeEventListener(ORYX.CONFIG.EVENT_MOUSEMOVE,this.dragCallback,!1);document.documentElement.removeEventListener(ORYX.CONFIG.EVENT_MOUSEUP,this.disableCallback,!0);this.upCallback&&this.upCallback(a);this.movedCallback=this.upCallback=void 0;Event.stop(a)};ORYX||(ORYX={});ORYX.Core||(ORYX.Core={});
ORYX.Core.Shape={construct:function(a,b){arguments.callee.$.construct.apply(this,arguments);this.dockers=[];this.magnets=[];this._defaultMagnet;this.incoming=[];this.outgoing=[];this.nodes=[];this._dockerChangedCallback=this._dockerChanged.bind(this);this._labels=new Hash;this.node=ORYX.Editor.graft("http://www.w3.org/2000/svg",null,["g",{id:this.id},["g",{"class":"stencils"},["g",{"class":"me"}],["g",{"class":"children",style:"overflow:hidden"}],["g",{"class":"edge"}]],["g",{"class":"controls"},
["g",{"class":"dockers"}],["g",{"class":"magnets"}]]])},update:function(){},_update:function(){},refresh:function(){arguments.callee.$.refresh.apply(this,arguments);this.node.ownerDocument&&(this.propertiesChanged.each(function(a){if(a.value){var b=this.properties[a.key],c=this.getStencil().property(a.key);this.propertiesChanged[a.key]=!1;if(c.type()==ORYX.CONFIG.TYPE_CHOICE){c.refToView().each(function(a){""!==a&&(a=this._labels[this.id+a])&&("fontsize"==c.id()?b&&c.item(b)&&a.fontSize(c.item(b).value()):
a.text(c.item(b).value()))}.bind(this));var d=new Hash;c.items().each(function(c){c.refToView().each(function(f){if(""==f)this.propertiesChanged[a.key]=!0;else if(f=this.node.ownerDocument.getElementById(this.id+f)){if(!d[f.id]||b==c.value())f.setAttributeNS(null,"display",b==c.value()?"inherit":"none"),d[f.id]=f;ORYX.Editor.checkClassType(f,SVGImageElement)&&f.setAttributeNS("http://www.w3.org/1999/xlink","href",f.getAttributeNS("http://www.w3.org/1999/xlink","href"))}else this.propertiesChanged[a.key]=
!0}.bind(this))}.bind(this))}else c.refToView().each(function(d){if(""===d)this.propertiesChanged[a.key]=!0;else{var f=this.id+d,g=this.node.ownerDocument.getElementById(f);if(!g||!g.ownerSVGElement)if(c.type()===ORYX.CONFIG.TYPE_URL||c.type()===ORYX.CONFIG.TYPE_DIAGRAM_LINK){if(d=this.node.ownerDocument.getElementsByTagNameNS("http://www.w3.org/2000/svg","a"),g=$A(d).find(function(a){return a.getAttributeNS(null,"id")===f}),!g){this.propertiesChanged[a.key]=!0;return}}else{this.propertiesChanged[a.key]=
!0;return}if(c.complexAttributeToView()){if(d=this._labels[f])try{propJson=b.evalJSON();var h=propJson[c.complexAttributeToView()];d.text(h?h:b)}catch(j){d.text(b)}}else switch(c.type()){case ORYX.CONFIG.TYPE_BOOLEAN:"string"==typeof b&&(b="true"===b);g.setAttributeNS(null,"display",b!==c.inverseBoolean()?"inherit":"none");break;case ORYX.CONFIG.TYPE_COLOR:c.fill()&&("stop"===g.tagName.toLowerCase()?(g.setAttributeNS(null,"stop-color",b),"radialgradient"===g.parentNode.tagName.toLowerCase()&&ORYX.Utils.adjustGradient(g.parentNode,
g)):g.setAttributeNS(null,"fill",b));c.stroke()&&(g.setAttributeNS(null,"stroke",b),"stop"===g.tagName.toLowerCase()&&(g.setAttributeNS(null,"stop-color",b),"radialgradient"===g.parentNode.tagName.toLowerCase()&&ORYX.Utils.adjustGradient(g.parentNode,g)));break;case ORYX.CONFIG.TYPE_STRING:(d=this._labels[f])&&d.text(b);break;case ORYX.CONFIG.TYPE_INTEGER:(d=this._labels[f])&&d.text(b);break;case ORYX.CONFIG.TYPE_FLOAT:c.fillOpacity()&&g.setAttributeNS(null,"fill-opacity",b);c.strokeOpacity()&&g.setAttributeNS(null,
"stroke-opacity",b);!c.fillOpacity()&&!c.strokeOpacity()&&(d=this._labels[f])&&d.text(b);break;case ORYX.CONFIG.TYPE_URL:case ORYX.CONFIG.TYPE_CALLEDELEMENT:var k=g.getAttributeNodeNS("","onclick");k?b&&0<b.length?(h=ORYX.EDITOR.getSerializedJSON(),h=jsonPath(h.evalJSON(),"$.properties.package"),Ext.Ajax.request({url:ORYX.PATH+"calledelement",method:"POST",success:function(a){try{k.textContent=0<a.responseText.length&&"false"!=a.responseText?"new ImageViewer({title: 'Process Image', width: '650', height: '450', autoScroll: true, fixedcenter: true, src: '"+
a.responseText+"',hideAction: 'close'}).show();":"Ext.Msg.alert('Unable to show process image.');"}catch(b){k.textContent="Ext.Msg.alert('Unable to show process image:"+b+"');"}}.bind(this),failure:function(){k.textContent="Ext.Msg.alert('Unable to show process image.');"},params:{profile:ORYX.PROFILE,uuid:ORYX.UUID,ppackage:h,pid:b,action:"imageview"}})):k.textContent="Ext.Msg.alert('No Callable Element specified.');":b&&0<b.length?(h=ORYX.EDITOR.getSerializedJSON(),h=jsonPath(h.evalJSON(),"$.properties.package"),
Ext.Ajax.request({url:ORYX.PATH+"calledelement",method:"POST",success:function(a){try{0<a.responseText.length&&"false"!=a.responseText?g.setAttributeNS("","onclick","new ImageViewer({title: 'Process Image', width: '650', height: '450', autoScroll: true, fixedcenter: true, src: '"+a.responseText+"',hideAction: 'close'}).show();"):g.setAttributeNS("","onclick","Ext.Msg.alert('Unable to find process image.');")}catch(b){g.setAttributeNS("","onclick","Ext.Msg.alert('Unable to find process image: "+b+
"');"),Ext.Msg.alert("Error resolving proces simage :\n"+b)}}.bind(this),failure:function(){g.setAttributeNS("","onclick","Ext.Msg.alert('Unable to find process image.');")},params:{profile:ORYX.PROFILE,uuid:ORYX.UUID,ppackage:h,pid:b,action:"imageview"}})):g.setAttributeNS("","onclick","Ext.Msg.alert('No Callable Element specified.');");break;case ORYX.CONFIG.TYPE_DIAGRAM_LINK:(h=g.getAttributeNodeNS("http://www.w3.org/1999/xlink","xlink:onclick"))?h.textContent=b:g.setAttributeNS("http://www.w3.org/1999/xlink",
"xlink:onclick",b)}}}.bind(this))}}.bind(this)),this._labels.values().each(function(a){a.update()}))},layout:function(){var a=this.getStencil().layout();this instanceof ORYX.Core.Node&&a&&a.each(function(a){a.shape=this;a.forceExecution=!0;this._delegateEvent(a)}.bind(this))},getLabels:function(){return this._labels.values()},getDockers:function(){return this.dockers},getMagnets:function(){return this.magnets},getDefaultMagnet:function(){if(this._defaultMagnet)return this._defaultMagnet;if(0<this.magnets.length)return this.magnets[0]},
getParentShape:function(){return this.parent},getIncomingShapes:function(a){a&&this.incoming.each(a);return this.incoming},getIncomingNodes:function(a){return this.incoming.select(function(b){var c=b instanceof ORYX.Core.Node;c&&a&&a(b);return c})},getOutgoingShapes:function(a){a&&this.outgoing.each(a);return this.outgoing},getOutgoingNodes:function(a){return this.outgoing.select(function(b){var c=b instanceof ORYX.Core.Node;c&&a&&a(b);return c})},getAllDockedShapes:function(a){var b=this.incoming.concat(this.outgoing);
a&&b.each(a);return b},getCanvas:function(){if(this.parent instanceof ORYX.Core.Canvas)return this.parent;if(this.parent instanceof ORYX.Core.Shape)return this.parent.getCanvas()},getChildNodes:function(a,b){if(!a&&!b)return this.nodes.clone();var c=[];this.nodes.each(function(d){d.isVisible&&(b&&b(d),c.push(d),a&&d instanceof ORYX.Core.Shape&&(c=c.concat(d.getChildNodes(a,b))))});return c},add:function(a,b){if(a instanceof ORYX.Core.UIObject&&!(a instanceof ORYX.Core.Edge))if(this.children.member(a))ORYX.Log.warn("add: ORYX.Core.UIObject is already a child of this object.");
else{a.parent&&a.parent.remove(a);void 0!=b?this.children.splice(b,0,a):this.children.push(a);a.parent=this;var c;a instanceof ORYX.Core.Node?(c=this.node.childNodes[0].childNodes[1],this.nodes.push(a)):a instanceof ORYX.Core.Controls.Control?(c=this.node.childNodes[1],a instanceof ORYX.Core.Controls.Docker?(c=c.childNodes[0],2<=this.dockers.length?this.dockers.splice(void 0!==b?Math.min(b,this.dockers.length-1):this.dockers.length-1,0,a):this.dockers.push(a)):a instanceof ORYX.Core.Controls.Magnet&&
(c=c.childNodes[1],this.magnets.push(a))):c=this.node;a.node=void 0!=b&&b<c.childNodes.length?c.insertBefore(a.node,c.childNodes[b]):c.appendChild(a.node);this._changed();this.eventHandlerCallback&&this.eventHandlerCallback({type:ORYX.CONFIG.EVENT_SHAPEADDED,shape:a})}else ORYX.Log.warn("add: Parameter is not of type ORYX.Core.UIObject.")},remove:function(a){this.children.member(a)?(this.children=this.children.without(a),a.parent=void 0,a instanceof ORYX.Core.Shape?a instanceof ORYX.Core.Edge?(a.removeMarkers(),
a.node=this.node.childNodes[0].childNodes[2].removeChild(a.node)):(a.node=this.node.childNodes[0].childNodes[1].removeChild(a.node),this.nodes=this.nodes.without(a)):a instanceof ORYX.Core.Controls.Control&&(a instanceof ORYX.Core.Controls.Docker?(a.node=this.node.childNodes[1].childNodes[0].removeChild(a.node),this.dockers=this.dockers.without(a)):a instanceof ORYX.Core.Controls.Magnet?(a.node=this.node.childNodes[1].childNodes[1].removeChild(a.node),this.magnets=this.magnets.without(a)):a.node=
this.node.childNodes[1].removeChild(a.node)),this._changed()):ORYX.Log.warn("remove: ORYX.Core.UIObject is not a child of this object.")},getIntersectionPoint:function(){var a,b,c,d;switch(arguments.length){case 2:a=arguments[0].x;b=arguments[0].y;c=arguments[1].x;d=arguments[1].y;break;case 4:a=arguments[0];b=arguments[1];c=arguments[2];d=arguments[3];break;default:throw"getIntersectionPoints needs two or four arguments";}var e,f,g,h,j=this.absoluteBounds();this.isPointIncluded(a,b,j)?(e=a,f=b):
(g=a,h=b);this.isPointIncluded(c,d,j)?(e=c,f=d):(g=c,h=d);if(e&&f&&g&&h){b=a=0;for(var k,l;!(a=Math.min(e,g)+(Math.max(e,g)-Math.min(e,g))/2,b=Math.min(f,h)+(Math.max(f,h)-Math.min(f,h))/2,this.isPointIncluded(a,b,j)?(e=a,f=b):(g=a,h=b),l=Math.sqrt(Math.pow(e-g,2)+Math.pow(f-h,2)),k=e+(g-e)/l,l=f+(h-f)/l,!this.isPointIncluded(k,l,j)););return{x:k,y:l}}},isPointIncluded:function(){return!1},isPointOverOffset:function(){return this.isPointIncluded.apply(this,arguments)},_dockerChanged:function(){},
createDocker:function(a,b){var c=new ORYX.Core.Controls.Docker({eventHandlerCallback:this.eventHandlerCallback});c.bounds.registerCallback(this._dockerChangedCallback);b&&c.bounds.centerMoveTo(b);this.add(c,a);return c},serialize:function(){var a=arguments.callee.$.serialize.apply(this);a.push({name:"bounds",prefix:"oryx",value:this.bounds.serializeForERDF(),type:"literal"});this.getOutgoingShapes().each(function(b){a.push({name:"outgoing",prefix:"raziel",value:"#"+ERDF.__stripHashes(b.resourceId),
type:"resource"})}.bind(this));a.push({name:"parent",prefix:"raziel",value:"#"+ERDF.__stripHashes(this.parent.resourceId),type:"resource"});return a},deserialize:function(a){arguments.callee.$.deserialize.apply(this,arguments);var b=a.find(function(a){return"oryx-bounds"==a.prefix+"-"+a.name});b&&(b=b.value.replace(/,/g," ").split(" ").without(""),this instanceof ORYX.Core.Edge?(this.dockers.first().bounds.centerMoveTo(parseFloat(b[0]),parseFloat(b[1])),this.dockers.last().bounds.centerMoveTo(parseFloat(b[2]),
parseFloat(b[3]))):this.bounds.set(parseFloat(b[0]),parseFloat(b[1]),parseFloat(b[2]),parseFloat(b[3])))},_init:function(a){this._adjustIds(a,0)},_adjustIds:function(a,b){if(a instanceof Element){var c=a.getAttributeNS(null,"id");c&&""!==c?a.setAttributeNS(null,"id",this.id+c):(a.setAttributeNS(null,"id",this.id+"_"+this.id+"_"+b),b++);if((c=a.getAttributeNS(null,"fill"))&&c.include("url(#"))c=c.replace(/url\(#/g,"url(#"+this.id),a.setAttributeNS(null,"fill",c);if(a.hasChildNodes())for(c=0;c<a.childNodes.length;c++)b=
this._adjustIds(a.childNodes[c],b)}return b},toString:function(){return"ORYX.Core.Shape "+this.getId()}};ORYX.Core.Shape=ORYX.Core.AbstractShape.extend(ORYX.Core.Shape);ORYX||(ORYX={});ORYX.Core||(ORYX.Core={});ORYX.Core.Controls||(ORYX.Core.Controls={});ORYX.Core.Controls.Control=ORYX.Core.UIObject.extend({toString:function(){return"Control "+this.id}});ORYX||(ORYX={});ORYX.Core||(ORYX.Core={});ORYX.Core.Controls||(ORYX.Core.Controls={});
ORYX.Core.Controls.Magnet=ORYX.Core.Controls.Control.extend({construct:function(){arguments.callee.$.construct.apply(this,arguments);this.anchorLeft;this.anchorRight;this.anchorTop;this.anchorBottom;this.bounds.set(0,0,16,16);this.node=ORYX.Editor.graft("http://www.w3.org/2000/svg",null,["g",{"pointer-events":"all"},["circle",{cx:"8",cy:"8",r:"4",stroke:"none",fill:"red","fill-opacity":"0.3"}]]);this.hide()},update:function(){arguments.callee.$.update.apply(this,arguments)},_update:function(){arguments.callee.$.update.apply(this,
arguments)},refresh:function(){arguments.callee.$.refresh.apply(this,arguments);var a=this.bounds.upperLeft();this.node.setAttributeNS(null,"transform","translate("+a.x+", "+a.y+")")},show:function(){arguments.callee.$.show.apply(this,arguments)},toString:function(){return"Magnet "+this.id}});ORYX||(ORYX={});ORYX.Core||(ORYX.Core={});ORYX.Core.Controls||(ORYX.Core.Controls={});
ORYX.Core.Controls.Docker=ORYX.Core.Controls.Control.extend({construct:function(){arguments.callee.$.construct.apply(this,arguments);this.isMovable=!0;this.bounds.set(0,0,16,16);this._oldRefPoint2=this._oldRefPoint1=this._dockedShape=this._dockedShapeBounds=this.referencePoint=void 0;this.anchorLeft;this.anchorRight;this.anchorTop;this.anchorBottom;this.node=ORYX.Editor.graft("http://www.w3.org/2000/svg",null,["g"]);this._dockerNode=ORYX.Editor.graft("http://www.w3.org/2000/svg",this.node,["g",{"pointer-events":"all"},
["circle",{cx:"8",cy:"8",r:"8",stroke:"none",fill:"none"}],["circle",{cx:"8",cy:"8",r:"3",stroke:"black",fill:"red","stroke-width":"1"}]]);this._referencePointNode=ORYX.Editor.graft("http://www.w3.org/2000/svg",this.node,["g",{"pointer-events":"none"},["circle",{cx:this.bounds.upperLeft().x,cy:this.bounds.upperLeft().y,r:3,fill:"red","fill-opacity":0.4}]]);this.hide();this.addEventHandlers(this.node);this._updateCallback=this._changed.bind(this)},update:function(){if(this._dockedShape){if(this._dockedShapeBounds&&
this._dockedShape instanceof ORYX.Core.Node){var a=this._dockedShapeBounds.width(),b=this._dockedShapeBounds.height();a||(a=1);b||(b=1);a=this._dockedShape.bounds.width()/a;b=this._dockedShape.bounds.height()/b;if(1!==a||1!==b)this.referencePoint.x*=a,this.referencePoint.y*=b;this._dockedShapeBounds=this._dockedShape.bounds.clone()}b=this.parent.dockers.indexOf(this);a=1<this.parent.dockers.length?0===b?this.parent.dockers[b+1]:this.parent.dockers[b-1]:void 0;b=this.getDockedShape()?this.getAbsoluteReferencePoint():
this.bounds.center();a=a&&a.getDockedShape()?a.getAbsoluteReferencePoint():a?a.bounds.center():void 0;if(!a)var a=this._dockedShape.absoluteCenterXY(),c=this._dockedShape.bounds.width()*this._dockedShape.bounds.height(),a={x:b.x+(a.x-b.x)*-c,y:b.y+(a.y-b.y)*-c};c=void 0;(c=this._dockedShape.getIntersectionPoint(b,a))||(c=this.getAbsoluteReferencePoint());if(this.parent&&this.parent.parent){var d=this.parent.parent.absoluteXY();c.x-=d.x;c.y-=d.y}this.bounds.centerMoveTo(c);this._oldRefPoint1=b;this._oldRefPoint2=
a}arguments.callee.$.update.apply(this,arguments)},refresh:function(){arguments.callee.$.refresh.apply(this,arguments);var a=this.bounds.upperLeft();this._dockerNode.setAttributeNS(null,"transform","translate("+a.x+", "+a.y+")");if((a=Object.clone(this.referencePoint))&&this._dockedShape){var b;b=this.parent instanceof ORYX.Core.Edge?this._dockedShape.absoluteXY():this._dockedShape.bounds.upperLeft();a.x+=b.x;a.y+=b.y}else a=this.bounds.center();this._referencePointNode.setAttributeNS(null,"transform",
"translate("+a.x+", "+a.y+")")},setReferencePoint:function(a){if(this.referencePoint!==a&&(!this.referencePoint||!a||this.referencePoint.x!==a.x||this.referencePoint.y!==a.y))this.referencePoint=a,this._changed()},getAbsoluteReferencePoint:function(){if(this.referencePoint&&this._dockedShape){var a=this._dockedShape.absoluteXY();return{x:this.referencePoint.x+a.x,y:this.referencePoint.y+a.y}}},setDockedShape:function(a){this._dockedShape&&(this._dockedShape.bounds.unregisterCallback(this._updateCallback),
this===this.parent.dockers.first()?(this.parent.incoming=this.parent.incoming.without(this._dockedShape),this._dockedShape.outgoing=this._dockedShape.outgoing.without(this.parent)):this===this.parent.dockers.last()&&(this.parent.outgoing=this.parent.outgoing.without(this._dockedShape),this._dockedShape.incoming=this._dockedShape.incoming.without(this.parent)));this._dockedShape=a;var b=this._dockedShapeBounds=void 0;this._dockedShape?(this===this.parent.dockers.first()?(this.parent.incoming.push(a),
a.outgoing.push(this.parent)):this===this.parent.dockers.last()&&(this.parent.outgoing.push(a),a.incoming.push(this.parent)),b=this.bounds,a=a.absoluteXY(),b={x:b.center().x-a.x,y:b.center().y-a.y},this._dockedShapeBounds=this._dockedShape.bounds.clone(),this._dockedShape.bounds.registerCallback(this._updateCallback),this.setDockerColor(ORYX.CONFIG.DOCKER_DOCKED_COLOR)):this.setDockerColor(ORYX.CONFIG.DOCKER_UNDOCKED_COLOR);this.setReferencePoint(b);this._changed()},getDockedShape:function(){return this._dockedShape},
isDocked:function(){return!!this._dockedShape},setDockerColor:function(a){this._dockerNode.lastChild.setAttributeNS(null,"fill",a)},hide:function(){this.node.setAttributeNS(null,"visibility","hidden");this.children.each(function(a){a.hide()})},show:function(){this.node.setAttributeNS(null,"visibility","visible");this.children.each(function(a){a.show()})},toString:function(){return"Docker "+this.id}});ORYX||(ORYX={});ORYX.Core||(ORYX.Core={});
ORYX.Core.Node={construct:function(a,b){arguments.callee.$.construct.apply(this,arguments);this.isMovable=this.isSelectable=!0;this._dockerUpdated=!1;this._oldBounds=new ORYX.Core.Bounds;this._svgShapes=[];this.maximumSize=this.minimumSize=void 0;this.isVerticallyResizable=this.isHorizontallyResizable=!1;this.dataId=void 0;this._init(this._stencil.view())},setSelectable:function(a){this.isSelectable=a},setMovable:function(a){this.isMovable=a},_update:function(){this.dockers.invoke("update");if(this.isChanged){var a=
this.bounds,b=this._oldBounds;if(this.isResized){var c=a.width()/b.width(),d=a.height()/b.height();this._svgShapes.each(function(e){e.isHorizontallyResizable&&(e.width=e.oldWidth*c);e.isVerticallyResizable&&(e.height=e.oldHeight*d);var f,g=e.anchorLeft;e.anchorRight?(f=b.width()-(e.oldX+e.oldWidth),g?e.width=a.width()-e.x-f:e.x=a.width()-(f+e.width)):g||(e.x=c*e.oldX,e.isHorizontallyResizable||(e.x=e.x+e.width*c/2-e.width/2));g=e.anchorTop;e.anchorBottom?(f=b.height()-(e.oldY+e.oldHeight),g?e.height=
a.height()-e.y-f:e._isYLocked||(e.y=a.height()-(f+e.height))):g||(e.y=d*e.oldY,e.isVerticallyResizable||(e.y=e.y+e.height*d/2-e.height/2))});var e={x:0,y:0};!this.isHorizontallyResizable&&a.width()!==b.width()&&(e.x=b.width()-a.width());!this.isVerticallyResizable&&a.height()!==b.height()&&(e.y=b.height()-a.height());(0!==e.x||0!==e.y)&&a.extend(e);var e={x:0,y:0},f;this.minimumSize&&(ORYX.Log.debug("Shape (%0)'s min size: (%1x%2)",this,this.minimumSize.width,this.minimumSize.height),f=this.minimumSize.width-
a.width(),0<f&&(e.x+=f),f=this.minimumSize.height-a.height(),0<f&&(e.y+=f));this.maximumSize&&(ORYX.Log.debug("Shape (%0)'s max size: (%1x%2)",this,this.maximumSize.width,this.maximumSize.height),f=a.width()-this.maximumSize.width,0<f&&(e.x-=f),f=a.height()-this.maximumSize.height,0<f&&(e.y-=f));(0!==e.x||0!==e.y)&&a.extend(e);var c=a.width()/b.width(),d=a.height()/b.height(),g,h,j,k,l,m,n;this.magnets.each(function(e){g=e.anchorLeft;h=e.anchorRight;j=e.anchorTop;k=e.anchorBottom;l=e.bounds.center();
m=g?l.x:h?a.width()-(b.width()-l.x):l.x*c;n=j?l.y:k?a.height()-(b.height()-l.y):l.y*d;(l.x!==m||l.y!==n)&&e.bounds.centerMoveTo(m,n)});this.getLabels().each(function(e){g=e.anchorLeft;h=e.anchorRight;j=e.anchorTop;k=e.anchorBottom;g||(e.x=h?a.width()-(b.width()-e.oldX):e.x*c);j||(e.y=k?a.height()-(b.height()-e.oldY):e.y*d)});if(e=this.dockers[0])e.bounds.unregisterCallback(this._dockerChangedCallback),this._dockerUpdated||(e.bounds.centerMoveTo(this.bounds.center()),this._dockerUpdated=!1),e.update(),
e.bounds.registerCallback(this._dockerChangedCallback);this.isResized=!1}this.refresh();this.isChanged=!1;this._oldBounds=this.bounds.clone()}this.children.each(function(a){a instanceof ORYX.Core.Controls.Docker||a._update()});0<this.dockers.length&&!this.dockers.first().getDockedShape()&&this.dockers.each(function(a){a.bounds.centerMoveTo(this.bounds.center())}.bind(this))},refresh:function(){arguments.callee.$.refresh.apply(this,arguments);var a=this.bounds.upperLeft().x,b=this.bounds.upperLeft().y;
this.node.firstChild.setAttributeNS(null,"transform","translate("+a+", "+b+")");this.node.childNodes[1].childNodes[1].setAttributeNS(null,"transform","translate("+a+", "+b+")");this._svgShapes.each(function(a){a.update()})},_dockerChanged:function(){this.bounds.centerMoveTo(this.dockers[0].bounds.center());this._dockerUpdated=!0},_initSVGShapes:function(a){var b=[];try{var c=new ORYX.Core.SVG.SVGShape(a);b.push(c)}catch(d){}if(a.hasChildNodes())for(c=0;c<a.childNodes.length;c++)b=b.concat(this._initSVGShapes(a.childNodes[c]));
return b},isPointIncluded:function(a,b,c){c=c&&c instanceof ORYX.Core.Bounds?c:this.absoluteBounds();if(!c.isIncluded(a,b))return!1;c=c.upperLeft();a-=c.x;b-=c.y;c=0;do var d=this._svgShapes[c++].isPointIncluded(a,b);while(!d&&c<this._svgShapes.length);return d},isPointOverOffset:function(a,b){if(arguments.callee.$.isPointOverOffset.apply(this,arguments)){var c=this.absoluteBounds();c.widen(-ORYX.CONFIG.BORDER_OFFSET);if(!c.isIncluded(a,b))return!0}return!1},serialize:function(){var a=arguments.callee.$.serialize.apply(this);
this.dockers.each(function(b){if(b.getDockedShape()){var c=b.referencePoint,c=c?c:b.bounds.center();a.push({name:"docker",prefix:"oryx",value:$H(c).values().join(","),type:"literal"})}}.bind(this));try{var b=this.getStencil().serialize();b.type&&(b.shape=this,b.data=a,b.result=void 0,b.forceExecution=!0,this._delegateEvent(b),b.result&&(a=b.result))}catch(c){}return a},deserialize:function(a){arguments.callee.$.deserialize.apply(this,[a]);try{var b=this.getStencil().deserialize();b.type&&(b.shape=
this,b.data=a,b.result=void 0,b.forceExecution=!0,this._delegateEvent(b),b.result&&(a=b.result))}catch(c){}a.findAll(function(a){return"raziel-outgoing"==a.prefix+"-"+a.name}).each(function(a){if(this.parent&&(a=this.getCanvas().getChildShapeByResourceId(a.value)))a instanceof ORYX.Core.Edge?(a.dockers.first().setDockedShape(this),a.dockers.first().setReferencePoint(a.dockers.first().bounds.center())):0<a.dockers.length&&a.dockers.first().setDockedShape(this)}.bind(this));if(1===this.dockers.length&&
(b=a.find(function(a){return"oryx-dockers"===a.prefix+"-"+a.name})))b=b.value.replace(/,/g," ").split(" ").without("").without("#"),2===b.length&&this.dockers[0].getDockedShape()?this.dockers[0].setReferencePoint({x:parseFloat(b[0]),y:parseFloat(b[1])}):this.dockers[0].bounds.centerMoveTo(parseFloat(b[0]),parseFloat(b[1]))},_init:function(a){arguments.callee.$._init.apply(this,arguments);var b=a.getElementsByTagName("g")[0],c=a.ownerDocument.createAttributeNS(null,"title");c.nodeValue=this.getStencil().title();
b.setAttributeNode(c);c=a.ownerDocument.createAttributeNS(null,"id");c.nodeValue=this.id;b.setAttributeNode(c);b=this.node.childNodes[0].childNodes[0].appendChild(b);this.addEventHandlers(b);if(c=b.getAttributeNS(ORYX.CONFIG.NAMESPACE_ORYX,"minimumSize"))c=c.replace("/,/g"," "),c=c.split(" "),c=c.without(""),this.minimumSize=1<c.length?{width:parseFloat(c[0]),height:parseFloat(c[1])}:{width:1,height:1};if(c=b.getAttributeNS(ORYX.CONFIG.NAMESPACE_ORYX,"maximumSize"))c=c.replace("/,/g"," "),c=c.split(" "),
c=c.without(""),1<c.length&&(this.maximumSize={width:parseFloat(c[0]),height:parseFloat(c[1])});if(this.minimumSize&&this.maximumSize&&(this.minimumSize.width>this.maximumSize.width||this.minimumSize.height>this.maximumSize.height))throw this+": Minimum Size must be greater than maxiumSize.";this._svgShapes=this._initSVGShapes(b);var d={x:void 0,y:void 0},e={x:void 0,y:void 0},f=this;this._svgShapes.each(function(a){d.x=void 0!==d.x?Math.min(d.x,a.x):a.x;d.y=void 0!==d.y?Math.min(d.y,a.y):a.y;e.x=
void 0!==e.x?Math.max(e.x,a.x+a.width):a.x+a.width;e.y=void 0!==e.y?Math.max(e.y,a.y+a.height):a.y+a.height;a.isHorizontallyResizable&&(f.isHorizontallyResizable=!0,f.isResizable=!0);a.isVerticallyResizable&&(f.isVerticallyResizable=!0,f.isResizable=!0);a.anchorTop&&a.anchorBottom&&(f.isVerticallyResizable=!0,f.isResizable=!0);a.anchorLeft&&a.anchorRight&&(f.isHorizontallyResizable=!0,f.isResizable=!0)});this._svgShapes.each(function(a){a.x-=d.x;a.y-=d.y;a.update()});var g=d.x,h=d.y;e.x-=g;e.y-=h;
d.x=0;d.y=0;0===e.x&&(e.x=1);0===e.y&&(e.y=1);this._oldBounds.set(d,e);this.bounds.set(d,e);(c=a.getElementsByTagNameNS(ORYX.CONFIG.NAMESPACE_ORYX,"magnets"))&&0<c.length?(c=$A(c[0].getElementsByTagNameNS(ORYX.CONFIG.NAMESPACE_ORYX,"magnet")),f=this,c.each(function(a){var b=new ORYX.Core.Controls.Magnet({eventHandlerCallback:f.eventHandlerCallback}),c=parseFloat(a.getAttributeNS(ORYX.CONFIG.NAMESPACE_ORYX,"cx")),d=parseFloat(a.getAttributeNS(ORYX.CONFIG.NAMESPACE_ORYX,"cy"));b.bounds.centerMoveTo({x:c-
g,y:d-h});if(c=a.getAttributeNS(ORYX.CONFIG.NAMESPACE_ORYX,"anchors")){c=c.replace("/,/g"," ");c=c.split(" ").without("");for(d=0;d<c.length;d++)switch(c[d].toLowerCase()){case "left":b.anchorLeft=!0;break;case "right":b.anchorRight=!0;break;case "top":b.anchorTop=!0;break;case "bottom":b.anchorBottom=!0}}f.add(b);if(!this._defaultMagnet&&(a=a.getAttributeNS(ORYX.CONFIG.NAMESPACE_ORYX,"default"))&&"yes"===a.toLowerCase())f._defaultMagnet=b})):(c=new ORYX.Core.Controls.Magnet,c.bounds.centerMoveTo(this.bounds.width()/
2,this.bounds.height()/2),this.add(c));var j=a.getElementsByTagNameNS(ORYX.CONFIG.NAMESPACE_ORYX,"docker");if(j&&0<j.length){var j=j[0],c=this.createDocker(),k=parseFloat(j.getAttributeNS(ORYX.CONFIG.NAMESPACE_ORYX,"cx")),l=parseFloat(j.getAttributeNS(ORYX.CONFIG.NAMESPACE_ORYX,"cy"));c.bounds.centerMoveTo({x:k-g,y:l-h});if(j=j.getAttributeNS(ORYX.CONFIG.NAMESPACE_ORYX,"anchors")){j=j.replace("/,/g"," ");j=j.split(" ").without("");for(k=0;k<j.length;k++)switch(j[k].toLowerCase()){case "left":c.anchorLeft=
!0;break;case "right":c.anchorRight=!0;break;case "top":c.anchorTop=!0;break;case "bottom":c.anchorBottom=!0}}}b=b.getElementsByTagNameNS(ORYX.CONFIG.NAMESPACE_SVG,"text");$A(b).each(function(a){a=new ORYX.Core.SVG.Label({textElement:a,shapeId:this.id});a.x-=g;a.y-=h;this._labels[a.id]=a}.bind(this))},createDocker:function(){var a=new ORYX.Core.Controls.Docker({eventHandlerCallback:this.eventHandlerCallback});a.bounds.registerCallback(this._dockerChangedCallback);this.dockers.push(a);a.parent=this;
a.bounds.registerCallback(this._changedCallback);return a},toString:function(){return this._stencil.title()+" "+this.id}};ORYX.Core.Node=ORYX.Core.Shape.extend(ORYX.Core.Node);NAMESPACE_SVG="http://www.w3.org/2000/svg";NAMESPACE_ORYX="http://www.b3mn.org/oryx";ORYX||(ORYX={});ORYX.Core||(ORYX.Core={});
ORYX.Core.Edge={construct:function(a,b){arguments.callee.$.construct.apply(this,arguments);this.isSelectable=this.isMovable=!0;this._dockerUpdated=!1;this._markers=new Hash;this._paths=[];this._interactionPaths=[];this._dockersByPath=new Hash;this._markersByPath=new Hash;this.attachedNodePositionData=new Hash;var c=this.node.childNodes[0].childNodes[0],c=ORYX.Editor.graft("http://www.w3.org/2000/svg",c,["g",{"pointer-events":"painted"}]);this.addEventHandlers(c);this._oldBounds=this.bounds.clone();
this._init(this._stencil.view());b instanceof Array&&this.deserialize(b)},setSelectable:function(a){this.isSelectable=a},setMovable:function(a){this.isMovable=a},_update:function(a){if(this._dockerUpdated||this.isChanged||a){this.dockers.invoke("update");if(0===this.bounds.width()||0===this.bounds.height())this.bounds.moveBy({x:0===this.bounds.width()?-1:0,y:0===this.bounds.height()?-1:0}),this.bounds.extend({x:0===this.bounds.width()?2:0,y:0===this.bounds.height()?2:0});var b=this.bounds.upperLeft(),
a=this._oldBounds.upperLeft(),c=0===this._oldBounds.width()?this.bounds.width():this._oldBounds.width(),d=0===this._oldBounds.height()?this.bounds.height():this._oldBounds.height(),e=b.x-a.x,f=b.y-a.y,g=this.bounds.width()/c,h=this.bounds.height()/d;this.dockers.each(function(a){a.bounds.unregisterCallback(this._dockerChangedCallback);if(!this._dockerUpdated&&(a.bounds.moveBy(e,f),1!==g||1!==h)){var c=a.bounds.upperLeft().x-b.x,d=a.bounds.upperLeft().y-b.y;a.bounds.moveTo(b.x+c*g,b.y+d*h)}a.update();
a.bounds.registerCallback(this._dockerChangedCallback)}.bind(this));if(this._dockerUpdated){var j=this.dockers.first().bounds.center(),k=this.dockers.first().bounds.center();this.dockers.each(function(a){a=a.bounds.center();j.x=Math.min(j.x,a.x);j.y=Math.min(j.y,a.y);k.x=Math.max(k.x,a.x);k.y=Math.max(k.y,a.y)}.bind(this));this.bounds.set(Object.clone(j),Object.clone(k))}this.getLabels().each(function(a){switch(a.edgePosition){case "freeMoved":a.x=a.x;a.y=a.y;break;case "starttop":var b=this._getAngle(this.dockers[0],
this.dockers[1]),c=this.dockers.first().bounds.center();90>=b||270<b?(a.horizontalAlign("left"),a.verticalAlign("bottom"),a.x=c.x+a.getOffsetTop(),a.y=c.y-a.getOffsetTop(),a.rotate(360-b,c)):(a.horizontalAlign("right"),a.verticalAlign("bottom"),a.x=c.x-a.getOffsetTop(),a.y=c.y-a.getOffsetTop(),a.rotate(180-b,c));break;case "startbottom":b=this._getAngle(this.dockers[0],this.dockers[1]);c=this.dockers.first().bounds.center();90>=b||270<b?(a.horizontalAlign("left"),a.verticalAlign("top"),a.x=c.x+a.getOffsetBottom(),
a.y=c.y+a.getOffsetBottom(),a.rotate(360-b,c)):(a.horizontalAlign("right"),a.verticalAlign("top"),a.x=c.x-a.getOffsetBottom(),a.y=c.y+a.getOffsetBottom(),a.rotate(180-b,c));break;case "midtop":var d=this.dockers.length;0==d%2?(b=this._getAngle(this.dockers[d/2-1],this.dockers[d/2]),c=this.dockers[d/2-1].bounds.center(),d=this.dockers[d/2].bounds.center(),c={x:(c.x+d.x)/2,y:(c.y+d.y)/2},a.horizontalAlign("center"),a.verticalAlign("bottom"),a.x=c.x,a.y=c.y-a.getOffsetTop(),90>=b||270<b?a.rotate(360-
b,c):a.rotate(180-b,c)):(c=parseInt(d/2),b=this._getAngle(this.dockers[c],this.dockers[c+1]),c=this.dockers[c].bounds.center(),90>=b||270<b?(a.horizontalAlign("left"),a.verticalAlign("bottom"),a.x=c.x+a.getOffsetTop(),a.y=c.y-a.getOffsetTop(),a.rotate(360-b,c)):(a.horizontalAlign("right"),a.verticalAlign("bottom"),a.x=c.x-a.getOffsetTop(),a.y=c.y-a.getOffsetTop(),a.rotate(180-b,c)));break;case "midbottom":d=this.dockers.length;0==d%2?(b=this._getAngle(this.dockers[d/2-1],this.dockers[d/2]),c=this.dockers[d/
2-1].bounds.center(),d=this.dockers[d/2].bounds.center(),c={x:(c.x+d.x)/2,y:(c.y+d.y)/2},a.horizontalAlign("center"),a.verticalAlign("top"),a.x=c.x,a.y=c.y+a.getOffsetTop(),90>=b||270<b?a.rotate(360-b,c):a.rotate(180-b,c)):(c=parseInt(d/2),b=this._getAngle(this.dockers[c],this.dockers[c+1]),c=this.dockers[c].bounds.center(),90>=b||270<b?(a.horizontalAlign("left"),a.verticalAlign("top"),a.x=c.x+a.getOffsetBottom(),a.y=c.y+a.getOffsetBottom(),a.rotate(360-b,c)):(a.horizontalAlign("right"),a.verticalAlign("top"),
a.x=c.x-a.getOffsetBottom(),a.y=c.y+a.getOffsetBottom(),a.rotate(180-b,c)));break;case "endtop":b=this.dockers.length;b=this._getAngle(this.dockers[b-2],this.dockers[b-1]);c=this.dockers.last().bounds.center();90>=b||270<b?(a.horizontalAlign("right"),a.verticalAlign("bottom"),a.x=c.x-a.getOffsetTop(),a.y=c.y-a.getOffsetTop(),a.rotate(360-b,c)):(a.horizontalAlign("left"),a.verticalAlign("bottom"),a.x=c.x+a.getOffsetTop(),a.y=c.y-a.getOffsetTop(),a.rotate(180-b,c));break;case "endbottom":b=this.dockers.length,
b=this._getAngle(this.dockers[b-2],this.dockers[b-1]),c=this.dockers.last().bounds.center(),90>=b||270<b?(a.horizontalAlign("right"),a.verticalAlign("top"),a.x=c.x-a.getOffsetBottom(),a.y=c.y+a.getOffsetBottom(),a.rotate(360-b,c)):(a.horizontalAlign("left"),a.verticalAlign("top"),a.x=c.x+a.getOffsetBottom(),a.y=c.y+a.getOffsetBottom(),a.rotate(180-b,c))}}.bind(this));this.children.each(function(a){a instanceof ORYX.Core.Node&&this.calculatePositionOfAttachedChildNode.call(this,a)}.bind(this));this.refreshAttachedNodes();
this.refresh();this._dockerUpdated=this.isChanged=!1;this._oldBounds=this.bounds.clone()}},movePointToUpperLeftOfNode:function(a,b){a.x-=b.width()/2;a.y-=b.height()/2},refreshAttachedNodes:function(){this.attachedNodePositionData.values().each(function(a){var b=a.segment.docker1.bounds.center(),c=a.segment.docker2.bounds.center();this.relativizePoint(b);this.relativizePoint(c);var d={};d.x=b.x+a.relativDistanceFromDocker1*(c.x-b.x);d.y=b.y+a.relativDistanceFromDocker1*(c.y-b.y);this.movePointToUpperLeftOfNode(d,
a.node.bounds);a.node.bounds.moveTo(d);a.node._update()}.bind(this))},calculatePositionOfAttachedChildNode:function(a){this.attachedNodePositionData[a.getId()]?a.isChanged&&this.findEdgeSegmentForNode(a):(this.attachedNodePositionData[a.getId()]={},this.attachedNodePositionData[a.getId()].relativDistanceFromDocker1=0,this.attachedNodePositionData[a.getId()].node=a,this.attachedNodePositionData[a.getId()].segment={},this.findEdgeSegmentForNode(a))},findEdgeSegmentForNode:function(a){var b=this.dockers.length,
c=void 0;for(i=1;i<b;i++){var d=this.dockers[i-1].bounds.center(),e=this.dockers[i].bounds.center();this.relativizePoint(d);this.relativizePoint(e);var f=a.bounds.center(),g=ORYX.Core.Math.distancePointLinie(d,e,f,!0);if((g||0==g)&&(!c&&0!=c||g<c))c=g,this.attachedNodePositionData[a.getId()].segment.docker1=this.dockers[i-1],this.attachedNodePositionData[a.getId()].segment.docker2=this.dockers[i];!g&&!c&&0!=c&&(ORYX.Core.Math.getDistancePointToPoint(f,d)<ORYX.Core.Math.getDistancePointToPoint(f,e)?
this.attachedNodePositionData[a.getId()].relativDistanceFromDocker1=0:this.attachedNodePositionData[a.getId()].relativDistanceFromDocker1=1,this.attachedNodePositionData[a.getId()].segment.docker1=this.dockers[i-1],this.attachedNodePositionData[a.getId()].segment.docker2=this.dockers[i])}if(c||0==c)this.attachedNodePositionData[a.getId()].relativDistanceFromDocker1=this.getLineParameterForPosition(this.attachedNodePositionData[a.getId()].segment.docker1,this.attachedNodePositionData[a.getId()].segment.docker2,
a)},getLineParameterForPosition:function(a,b,c){a=a.bounds.center();b=b.bounds.center();this.relativizePoint(a);this.relativizePoint(b);c=ORYX.Core.Math.getPointOfIntersectionPointLine(a,b,c.bounds.center(),!0);return!c?0:ORYX.Core.Math.getDistancePointToPoint(c,a)/ORYX.Core.Math.getDistancePointToPoint(a,b)},relativizePoint:function(a){a.x-=this.bounds.upperLeft().x;a.y-=this.bounds.upperLeft().y},refresh:function(){arguments.callee.$.refresh.apply(this,arguments);var a;this._paths.each(function(b,
c){var f=this._dockersByPath[b.id],g=void 0,h=void 0;a?h="M"+a.x+" "+a.y:(a=g=f[0].bounds.center(),h="M"+g.x+" "+g.y);for(var j=1;j<f.length;j++)g=f[j].bounds.center(),h=h+"L"+g.x+" "+g.y+" ",a=g;b.setAttributeNS(null,"d",h);this._interactionPaths[c].setAttributeNS(null,"d",h)}.bind(this));if(0<this.getChildNodes().length){var b=this.bounds.upperLeft().x,c=this.bounds.upperLeft().y;this.node.firstChild.childNodes[1].setAttributeNS(null,"transform","translate("+b+", "+c+")")}},getIntersectionPoint:function(){var a=
Math.floor(this.dockers.length/2);return ORYX.Core.Math.midPoint(this.dockers[a-1].bounds.center(),this.dockers[a].bounds.center())},isPointIncluded:function(a,b){var c=void 0;if(this.absoluteBounds().isIncluded(a,b,ORYX.CONFIG.OFFSET_EDGE_BOUNDS)&&0<this.dockers.length){var d=0,e;do c=this.dockers[d].bounds.center(),e=this.dockers[++d].bounds.center(),c=ORYX.Core.Math.isPointInLine(a,b,c.x,c.y,e.x,e.y,ORYX.CONFIG.OFFSET_EDGE_BOUNDS);while(!c&&d<this.dockers.length-1)}return c},isPointOverOffset:function(){return!1},
_getAngle:function(a,b){var c=a.absoluteCenterXY(),d=b.absoluteCenterXY();if(c.x==d.x&&c.y==d.y)return 0;var e=180*Math.asin(Math.sqrt(Math.pow(c.y-d.y,2))/Math.sqrt(Math.pow(d.x-c.x,2)+Math.pow(c.y-d.y,2)))/Math.PI;return d.x>=c.x&&d.y<=c.y?e:d.x<c.x&&d.y<=c.y?180-e:d.x<c.x&&d.y>c.y?180+e:360-e},alignDockers:function(){this._update(!0);var a=this.dockers.first().bounds.center(),b=this.dockers.last().bounds.center(),c=b.x-a.x,d=b.y-a.y,e=this.dockers.length-1;this.dockers.each(function(b,g){var h=
g/e;b.bounds.unregisterCallback(this._dockerChangedCallback);b.bounds.moveTo(a.x+h*c,a.y+h*d);b.bounds.registerCallback(this._dockerChangedCallback)}.bind(this));this._dockerChanged()},add:function(a){arguments.callee.$.add.apply(this,arguments);if(a instanceof ORYX.Core.Controls.Docker&&this.dockers.include(a)){var b=this._dockersByPath.values()[0];b&&b.splice(this.dockers.indexOf(a),0,a);this.handleChildShapesAfterAddDocker(a)}},handleChildShapesAfterAddDocker:function(a){if(!(!a instanceof ORYX.Core.Controls.Docker)){var b=
this.dockers.indexOf(a);if(0<b&&b<this.dockers.length-1){var c=this.dockers[b-1],d=this.dockers[b+1],b=this.getAttachedNodePositionDataForSegment(c,d),c=ORYX.Core.Math.getDistancePointToPoint(c.bounds.center(),a.bounds.center()),d=ORYX.Core.Math.getDistancePointToPoint(d.bounds.center(),a.bounds.center());if(c+d){var e=c/(c+d);b.each(function(b){b.value.relativDistanceFromDocker1<e?(b.value.segment.docker2=a,b.value.relativDistanceFromDocker1/=e):(b.value.segment.docker1=a,b.value.relativDistanceFromDocker1=
(b.value.relativDistanceFromDocker1-e)/(1-e))});this.refreshAttachedNodes()}}}},getAttachedNodePositionDataForSegment:function(a,b){if(!(a instanceof ORYX.Core.Controls.Docker&&b instanceof ORYX.Core.Controls.Docker))return[];var c=this.attachedNodePositionData.findAll(function(c){return c.value.segment.docker1===a&&c.value.segment.docker2===b});return!c?[]:c},remove:function(a){arguments.callee.$.remove.apply(this,arguments);this.attachedNodePositionData[a.getId()]&&delete this.attachedNodePositionData[a.getId()];
a instanceof ORYX.Core.Controls.Docker&&this.handleChildShapesAfterRemoveDocker(a)},handleChildShapesAfterRemoveDocker:function(a){a instanceof ORYX.Core.Controls.Docker&&(this.attachedNodePositionData.each(function(b){if(b.value.segment.docker1===a){var c=this.dockers.indexOf(b.value.segment.docker2);-1!=c&&(b.value.segment.docker1=this.dockers[c-1])}else b.value.segment.docker2===a&&(c=this.dockers.indexOf(b.value.segment.docker1),-1!=c&&(b.value.segment.docker2=this.dockers[c+1]))}.bind(this)),
this.refreshAttachedNodes())},addDocker:function(a,b){var c,d;this._dockersByPath.any(function(e){return e.value.any(function(f){if(c){var g=c.bounds.center(),h=f.bounds.center();if(ORYX.Core.Math.isPointInLine(a.x,a.y,g.x,g.y,h.x,h.y,10)){if(f=this._paths.find(function(a){return a.id===e.key}))if((f=f.getAttributeNS(NAMESPACE_ORYX,"allowDockers"))&&"no"===f.toLowerCase())return!0;f=b?b:this.createDocker(this.dockers.indexOf(c)+1,a);f.bounds.centerMoveTo(a);b&&this.add(f,this.dockers.indexOf(c)+1);
d=f;return!0}c=f;return!1}c=f;return!1}.bind(this))}.bind(this));return d},removeDocker:function(a){2<this.dockers.length&&this.dockers.first()!==a&&this._dockersByPath.any(function(b){return b.value.member(a)?(a!==b.value.last()&&(this.remove(a),this._dockersByPath[b.key]=b.value.without(a),this.isChanged=!0,this._dockerChanged()),!0):!1}.bind(this))},removeUnusedDockers:function(){var a=$H({});this.dockers.each(function(b,c){if(!(0==c||c==this.dockers.length-1)){var d=this.dockers[c-1];-1!=a.values().indexOf(d)&&
this.dockers[c-2]&&(d=this.dockers[c-2]);var e=this.dockers[c+1],d=d.getDockedShape()&&d.referencePoint?d.getAbsoluteReferencePoint():d.bounds.center(),e=e.getDockedShape()&&e.referencePoint?e.getAbsoluteReferencePoint():e.bounds.center(),f=b.bounds.center();ORYX.Core.Math.isPointInLine(f.x,f.y,d.x,d.y,e.x,e.y,1)&&(a[c]=b)}}.bind(this));a.each(function(a){this.removeDocker(a.value)}.bind(this));0<a.values().length&&this._update(!0);return a},_init:function(a){arguments.callee.$._init.apply(this,arguments);
var b,c,d,e,f=a.getElementsByTagNameNS(NAMESPACE_SVG,"defs");if(0<f.length){var f=f[0],g,h=this;$A(f.getElementsByTagNameNS(NAMESPACE_SVG,"marker")).each(function(a){try{g=new ORYX.Core.SVG.SVGMarker(a.cloneNode(!0));h._markers[g.id]=g;var b;$A(g.element.getElementsByTagNameNS(NAMESPACE_SVG,"text")).each(function(a){b=new ORYX.Core.SVG.Label({textElement:a,shapeId:this.id});h._labels[b.id]=b})}catch(c){}})}f=a.getElementsByTagNameNS(NAMESPACE_SVG,"g");if(0>=f.length)throw"Edge: No g element found.";
f=f[0];f.setAttributeNS(null,"id",null);var j=!0;$A(f.childNodes).each(function(a,f){if(ORYX.Editor.checkClassType(a,SVGPathElement)){var a=a.cloneNode(!1),g=this.id+"_"+f;a.setAttributeNS(null,"id",g);this._paths.push(a);var h=[],k=a.getAttributeNS(null,"marker-start");k&&""!==k&&(k=k.strip(),k=k.replace(/^url\(#/,""),k=this.id.concat(k.replace(/\)$/,"")),a.setAttributeNS(null,"marker-start","url(#"+k+")"),h.push(this._markers[k]));if((k=a.getAttributeNS(null,"marker-mid"))&&""!==k)k=k.strip(),k=
k.replace(/^url\(#/,""),k=this.id.concat(k.replace(/\)$/,"")),a.setAttributeNS(null,"marker-mid","url(#"+k+")"),h.push(this._markers[k]);if((k=a.getAttributeNS(null,"marker-end"))&&""!==k)k=k.strip(),k=k.replace(/^url\(#/,""),k=this.id.concat(k.replace(/\)$/,"")),a.setAttributeNS(null,"marker-end","url(#"+k+")"),h.push(this._markers[k]);this._markersByPath[g]=h;k=new PathParser;h=new ORYX.Core.SVG.PointsPathHandler;k.setHandler(h);k.parsePath(a);if(4>h.points.length)throw"Edge: Path has to have two or more points specified.";
this._dockersByPath[g]=[];for(g=0;g<h.points.length;g+=2){var k=h.points[g],o=h.points[g+1];if(j||0<g){var r=new ORYX.Core.Controls.Docker({eventHandlerCallback:this.eventHandlerCallback});r.bounds.centerMoveTo(k,o);r.bounds.registerCallback(this._dockerChangedCallback);this.add(r,this.dockers.length);b?(b=Math.min(k,b),c=Math.min(o,c)):(b=k,c=o);d?(d=Math.max(k,d),e=Math.max(o,e)):(d=k,e=o)}}j=!1}}.bind(this));this.bounds.set(b,c,d,e);if(0===this.bounds.width()||0===this.bounds.height())this.bounds.extend({x:0===
this.bounds.width()?2:0,y:0===this.bounds.height()?2:0}),this.bounds.moveBy({x:0===this.bounds.width()?-1:0,y:0===this.bounds.height()?-1:0});this._oldBounds=this.bounds.clone();this._paths.reverse();var k=[];this._paths.each(function(a){k.push(this.node.childNodes[0].childNodes[0].childNodes[0].appendChild(a))}.bind(this));this._paths=k;this._paths.each(function(a){a=a.cloneNode(!1);a.setAttributeNS(null,"id",void 0);a.setAttributeNS(null,"stroke-width",10);a.setAttributeNS(null,"visibility","hidden");
a.setAttributeNS(null,"stroke-dasharray","none");a.setAttributeNS(null,"stroke","black");a.setAttributeNS(null,"fill","none");this._interactionPaths.push(this.node.childNodes[0].childNodes[0].childNodes[0].appendChild(a))}.bind(this));this._paths.reverse();this._interactionPaths.reverse();f=a.getElementsByTagNameNS(ORYX.CONFIG.NAMESPACE_SVG,"text");$A(f).each(function(a){a=new ORYX.Core.SVG.Label({textElement:a,shapeId:this.id});this.node.childNodes[0].childNodes[0].appendChild(a.node);this._labels[a.id]=
a}.bind(this));this.node.childNodes[0].childNodes[0].setAttributeNS(null,"title",this.getStencil().title());this.propertiesChanged.each(function(a){a.value=!0})},addMarkers:function(a){this._markers.each(function(b){a.ownerDocument.getElementById(b.value.id)||(b.value.element=a.appendChild(b.value.element))})},removeMarkers:function(){var a=this.node.ownerSVGElement;if(a){var b=a.getElementsByTagNameNS(NAMESPACE_SVG,"defs");0<b.length&&(b=b[0],this._markers.each(function(a){b.ownerDocument.getElementById(a.value.id)&&
(a.value.element=b.removeChild(a.value.element))}))}},_dockerChanged:function(){this._dockerUpdated=!0},serialize:function(){var a=arguments.callee.$.serialize.apply(this),b="";this._dockersByPath.each(function(a){a.value.each(function(a){a=a.getDockedShape()&&a.referencePoint?a.referencePoint:a.bounds.center();b=b.concat(a.x+" "+a.y+" ")});b+=" # "}.bind(this));a.push({name:"dockers",prefix:"oryx",value:b,type:"literal"});var c=this.dockers.last().getDockedShape();c&&a.push({name:"target",prefix:"raziel",
value:"#"+ERDF.__stripHashes(c.resourceId),type:"resource"});try{var d=this.getStencil().serialize();d.type&&(d.shape=this,d.data=a,d.result=void 0,d.forceExecution=!0,this._delegateEvent(d),d.result&&(a=d.result))}catch(e){}return a},deserialize:function(a){try{var b=this.getStencil().deserialize();b.type&&(b.shape=this,b.data=a,b.result=void 0,b.forceExecution=!0,this._delegateEvent(b),b.result&&(a=b.result))}catch(c){}var b=a.find(function(a){return"raziel-target"==a.prefix+"-"+a.name}),d;b&&(d=
this.getCanvas().getChildShapeByResourceId(b.value));a.findAll(function(a){return"raziel-outgoing"==a.prefix+"-"+a.name}).each(function(a){if(this.parent&&(a=this.getCanvas().getChildShapeByResourceId(a.value)))a==d?(this.dockers.last().setDockedShape(a),this.dockers.last().setReferencePoint({x:a.bounds.width()/2,y:a.bounds.height()/2})):a instanceof ORYX.Core.Edge&&a.dockers.first().setDockedShape(this)}.bind(this));arguments.callee.$.deserialize.apply(this,[a]);(b=a.find(function(a){return"oryx"===
a.prefix&&"dockers"===a.name}))?b.value.split("#").without("").without(" ").each(function(a,b){var c=a.replace(/,/g," ").split(" ").without("");if(0===c.length%2){var d=this._paths[b];if(d){if(0===b)for(;2<this._dockersByPath[d.id].length;)this.removeDocker(this._dockersByPath[d.id][1]);else for(;1<this._dockersByPath[d.id].length;)this.removeDocker(this._dockersByPath[d.id][0]);var j=this._dockersByPath[d.id];if(0===b){var d=parseFloat(c.shift()),k=parseFloat(c.shift());j.first().getDockedShape()?
j.first().setReferencePoint({x:d,y:k}):j.first().bounds.centerMoveTo(d,k)}k=parseFloat(c.pop());d=parseFloat(c.pop());j.last().getDockedShape()?j.last().setReferencePoint({x:d,y:k}):j.last().bounds.centerMoveTo(d,k);for(j=0;j<c.length;j++)d=parseFloat(c[j]),k=parseFloat(c[++j]),this.createDocker().bounds.centerMoveTo(d,k)}}}.bind(this)):this.alignDockers();this._changed()},toString:function(){return this.getStencil().title()+" "+this.id},getTarget:function(){return this.dockers.last()?this.dockers.last().getDockedShape():
null},getSource:function(){return this.dockers.first()?this.dockers.first().getDockedShape():null},isDocked:function(){var a=!1;this.dockers.each(function(b){if(b.isDocked())throw a=!0,$break;});return a},toJSON:function(){var a=arguments.callee.$.toJSON.apply(this,arguments);this.getTarget()&&(a.target={resourceId:this.getTarget().resourceId});return a}};ORYX.Core.Edge=ORYX.Core.Shape.extend(ORYX.Core.Edge);ORYX||(ORYX={});ORYX.Plugins||(ORYX.Plugins={});
ORYX.Plugins.AbstractPlugin=Clazz.extend({facade:null,construct:function(a){this.facade=a;this.facade.registerOnEvent(ORYX.CONFIG.EVENT_LOADED,this.onLoaded.bind(this))},onLoaded:function(){},onSelectionChanged:function(){},showOverlay:function(a,b,c,d){a instanceof Array||(a=[a]);a=a.map(function(a){var b=a;"string"==typeof a&&(b=(b=this.facade.getCanvas().getChildShapeByResourceId(a))||this.facade.getCanvas().getChildById(a,!0));return b}.bind(this)).compact();this.overlayID||(this.overlayID=this.type+
ORYX.Editor.provideId());this.facade.raiseEvent({type:ORYX.CONFIG.EVENT_OVERLAY_SHOW,id:this.overlayID,shapes:a,attributes:b,node:c,nodePosition:d||"NW"})},hideOverlay:function(){this.facade.raiseEvent({type:ORYX.CONFIG.EVENT_OVERLAY_HIDE,id:this.overlayID})},doTransform:function(a,b){if(!b||!a)return"";var c=(new DOMParser).parseFromString(a,"text/xml");source=b;new Ajax.Request(source,{asynchronous:!1,method:"get",onSuccess:function(a){xsl=a.responseText}.bind(this),onFailure:function(a){ORYX.Log.error("XSL load failed"+
a)}.bind(this)});var d=new XSLTProcessor,e=(new DOMParser).parseFromString(xsl,"text/xml");d.importStylesheet(e);try{var f=d.transformToFragment(c,document),g=(new XMLSerializer).serializeToString(f);return g=!g.startsWith("<?xml")?'<?xml version="1.0" encoding="UTF-8"?>'+g:g}catch(h){return-1}},openXMLWindow:function(a){window.open("data:application/xml,"+encodeURIComponent(a),"_blank","resizable=yes,width=600,height=600,toolbar=0,scrollbars=yes")},openDownloadWindow:function(a,b){var c=window.open("");
if(null!=c){c.document.open();c.document.write("<html><body>");var d=c.document.createElement("form");c.document.body.appendChild(d);var e=function(a,b){var c=document.createElement("input");c.name=a;c.type="hidden";c.value=b;return c};d.appendChild(e("download",b));d.appendChild(e("file",a));d.method="POST";c.document.write("</body></html>");c.document.close();d.action=ORYX.PATH+"/download";d.submit()}},getSerializedDOM:function(){var a=DataManager.serializeDOM(this.facade);return a='<?xml version="1.0" encoding="utf-8"?><html xmlns="http://www.w3.org/1999/xhtml" xmlns:b3mn="http://b3mn.org/2007/b3mn" xmlns:ext="http://b3mn.org/2007/ext" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:atom="http://b3mn.org/2007/atom+xhtml"><head profile="http://purl.org/NET/erdf/profile"><link rel="schema.dc" href="http://purl.org/dc/elements/1.1/" /><link rel="schema.dcTerms" href="http://purl.org/dc/terms/ " /><link rel="schema.b3mn" href="http://b3mn.org" /><link rel="schema.oryx" href="http://oryx-editor.org/" /><link rel="schema.raziel" href="http://raziel.org/" /><base href="'+
location.href.split("?")[0]+'" /></head><body>'+a+"</body></html>"},enableReadOnlyMode:function(){this.facade.disableEvent(ORYX.CONFIG.EVENT_MOUSEDOWN);this._stopSelectionChange=function(){0<this.facade.getSelection().length&&this.facade.setSelection([])};this.facade.registerOnEvent(ORYX.CONFIG.EVENT_SELECTION_CHANGED,this._stopSelectionChange.bind(this))},disableReadOnlyMode:function(){this.facade.enableEvent(ORYX.CONFIG.EVENT_MOUSEDOWN);this._stopSelectionChange&&(this.facade.unregisterOnEvent(ORYX.CONFIG.EVENT_SELECTION_CHANGED,
this._stopSelectionChange.bind(this)),this._stopSelectionChange=void 0)},getRDFFromDOM:function(){try{var a="";source=ORYX.PATH+"lib/extract-rdf.xsl";new Ajax.Request(source,{asynchronous:!1,method:"get",onSuccess:function(b){a=b.responseText}.bind(this),onFailure:function(a){ORYX.Log.error("XSL load failed"+a)}.bind(this)});var b=new DOMParser,c=b.parseFromString(this.getSerializedDOM(),"text/xml"),d=b.parseFromString(a,"text/xml"),e=new XSLTProcessor;e.importStylesheet(d);var f=e.transformToFragment(c,
document);return(new XMLSerializer).serializeToString(f)}catch(g){return Ext.Msg.alert("Oryx",error),""}},isStencilSetExtensionLoaded:function(a){return this.facade.getStencilSets().values().any(function(b){return b.extensions().keys().any(function(b){return b==a}.bind(this))}.bind(this))},doLayout:function(a){this.facade.raiseEvent({type:ORYX.CONFIG.EVENT_LAYOUT,shapes:a})},layoutEdges:function(a,b,c){var d=b.findAll(function(a){return 2<a.dockers.length}.bind(this));if(0<d.length){var e=a.absoluteXY(),
f=e.x-c.x,g=e.y-c.y;e.x+=a.bounds.width()/2;e.y+=a.bounds.height()/2;oldCenter=Object.clone(e);oldCenter.x-=c?c.x:0;oldCenter.y-=c?c.y:0;a.bounds.width();a.bounds.height();a.bounds.width();a.bounds.height();var h=function(a,b){var d=a.center().x-b.center().x,e=a.center().y-b.center().y;3>Math.abs(d)?a.moveBy({x:(c.xs?c.xs*(a.center().x-f)+c.x+f-a.center().x:c.x)-d,y:0}):3>Math.abs(e)&&a.moveBy({x:0,y:(c.ys?c.ys*(a.center().y-g)+c.y+g-a.center().y:c.y)-e})},j=function(a){var b=a.dockers.first().getDockedShape(),
c=a.dockers.last().getDockedShape();b&&(b=b.absoluteBounds(),b.widen(5));c&&(c=c.absoluteBounds(),c.widen(20));return a.dockers.any(function(d,e){var f=d.bounds.center();return 0!=e&&e!=a.dockers.length-1&&(b&&b.isIncluded(f)||c&&c.isIncluded(f))})};d.each(function(b){if(b.dockers.first().getDockedShape()===a){var c=b.dockers[1];h(c.bounds,b.dockers.first().bounds)&&c.update()}else b.dockers.last().getDockedShape()===a&&(c=b.dockers[b.dockers.length-2],h(c.bounds,b.dockers.last().bounds)&&c.update());
b._update(!0);b.removeUnusedDockers();j(b)&&this.doLayout(b)}.bind(this))}b.each(function(a){if(2==a.dockers.length){var b=a.dockers.first().bounds.center(),c=a.dockers.last().bounds.center();if(2>Math.abs(b.x-c.x)||2>Math.abs(b.y-c.y))a.dockers.first().update(),a.dockers.last().update(),this.doLayout(a)}}.bind(this))}});ORYX||(ORYX={});ORYX.Plugins||(ORYX.Plugins={});
ORYX.Plugins.AbstractLayouter=ORYX.Plugins.AbstractPlugin.extend({layouted:[],construct:function(a){arguments.callee.$.construct.apply(this,arguments);this.facade.registerOnEvent(ORYX.CONFIG.EVENT_LAYOUT,this._initLayout.bind(this))},isIncludedInLayout:function(a){this.layouted instanceof Array||(this.layouted=[this.layouted].compact());return 0>=this.layouted.length?!0:this.layouted.any(function(b){return"string"==typeof b?a.getStencil().id().include(b):a instanceof b})},_initLayout:function(a){a=
[a.shapes].flatten().compact().findAll(function(a){return this.isIncludedInLayout(a)}.bind(this));0<a.length&&this.layout(a)},layout:function(){throw Error("Layouter has to implement the layout function.");},getChildShapesWithout:function(a,b){return"function"==typeof a.getChildShapes?a.getChildShapes(!1).findAll(function(a){return!b.member(a.getStencil().id())}):[]}});ORYX||(ORYX={});ORYX.Plugins||(ORYX.Plugins={});
ORYX.Plugins.AbstractDragTracker=ORYX.Plugins.AbstractPlugin.extend({shapes:[null],construct:function(a){arguments.callee.$.construct.apply(this,arguments);this.facade.registerOnEvent(ORYX.CONFIG.EVENT_DRAG_TRACKER_DRAG,function(a){this.isIncludedInShapes(a.shapes)&&this.drag(a.shapes,a.bounds)}.bind(this));this.facade.registerOnEvent(ORYX.CONFIG.EVENT_DRAG_TRACKER_RESIZE,function(a){this.isIncludedInShapes(a.shapes)&&this.resize(a.shapes,a.bounds)}.bind(this));this.facade.registerOnEvent(ORYX.CONFIG.EVENT_RESIZE_END,
function(a){this.isIncludedInShapes(a.shapes)&&this.resizeEnd(a.shapes)}.bind(this));this.facade.registerOnEvent(ORYX.CONFIG.EVENT_DROP_SHAPE,function(a){this.isIncludedInShapes(a.shape)&&this.newShape(a.shape)}.bind(this))},drag:function(){},resize:function(){},resizeEnd:function(){},newShape:function(){},isIncludedInShapes:function(a){if(a instanceof Array)return included=!1,a.each(function(a){this.isIncludedInShapes(a)&&(included=!0)}.bind(this)),included;this.shapes instanceof Array||(this.shapes=
[this.shapes].compact());return 0>=this.shapes.length?!0:this.shapes.any(function(b){return"string"==typeof b?a.getStencil().id().include(b):a instanceof b})}});(function(){function a(){this.Diff_Timeout=1;this.Diff_EditCost=4;this.Match_Threshold=0.5;this.Match_Distance=1E3;this.Patch_DeleteThreshold=0.5;this.Patch_Margin=4;this.Match_MaxBits=32}a.prototype.diff_main=function(a,c,d,e){"undefined"==typeof e&&(e=0>=this.Diff_Timeout?Number.MAX_VALUE:(new Date).getTime()+1E3*this.Diff_Timeout);if(null==a||null==c)throw Error("Null input. (diff_main)");if(a==c)return a?[[0,a]]:[];"undefined"==typeof d&&(d=!0);var f=d,g=this.diff_commonPrefix(a,c),d=a.substring(0,
g),a=a.substring(g),c=c.substring(g),g=this.diff_commonSuffix(a,c),h=a.substring(a.length-g),a=a.substring(0,a.length-g),c=c.substring(0,c.length-g),a=this.diff_compute_(a,c,f,e);d&&a.unshift([0,d]);h&&a.push([0,h]);this.diff_cleanupMerge(a);return a};a.prototype.diff_compute_=function(a,c,d,e){if(!a)return[[1,c]];if(!c)return[[-1,a]];var f=a.length>c.length?a:c,g=a.length>c.length?c:a,h=f.indexOf(g);return-1!=h?(d=[[1,f.substring(0,h)],[0,g],[1,f.substring(h+g.length)]],a.length>c.length&&(d[0][0]=
d[2][0]=-1),d):1==g.length?[[-1,a],[1,c]]:(f=this.diff_halfMatch_(a,c))?(g=f[0],a=f[1],h=f[2],c=f[3],f=f[4],g=this.diff_main(g,h,d,e),d=this.diff_main(a,c,d,e),g.concat([[0,f]],d)):d&&100<a.length&&100<c.length?this.diff_lineMode_(a,c,e):this.diff_bisect_(a,c,e)};a.prototype.diff_lineMode_=function(a,c,d){var e=this.diff_linesToChars_(a,c),a=e.chars1,c=e.chars2,e=e.lineArray,a=this.diff_main(a,c,!1,d);this.diff_charsToLines_(a,e);this.diff_cleanupSemantic(a);a.push([0,""]);for(var f=e=c=0,g="",h=
"";c<a.length;){switch(a[c][0]){case 1:f++;h+=a[c][1];break;case -1:e++;g+=a[c][1];break;case 0:if(1<=e&&1<=f){a.splice(c-e-f,e+f);c=c-e-f;e=this.diff_main(g,h,!1,d);for(f=e.length-1;0<=f;f--)a.splice(c,0,e[f]);c+=e.length}e=f=0;h=g=""}c++}a.pop();return a};a.prototype.diff_bisect_=function(a,c,d){for(var e=a.length,f=c.length,g=Math.ceil((e+f)/2),h=2*g,j=Array(h),k=Array(h),l=0;l<h;l++)j[l]=-1,k[l]=-1;j[g+1]=0;k[g+1]=0;for(var l=e-f,m=0!=l%2,n=0,u=0,v=0,o=0,r=0;r<g&&!((new Date).getTime()>d);r++){for(var s=
-r+n;s<=r-u;s+=2){var p=g+s,q;q=s==-r||s!=r&&j[p-1]<j[p+1]?j[p+1]:j[p-1]+1;for(var w=q-s;q<e&&w<f&&a.charAt(q)==c.charAt(w);)q++,w++;j[p]=q;if(q>e)u+=2;else if(w>f)n+=2;else if(m&&(p=g+l-s,0<=p&&p<h&&-1!=k[p])){var t=e-k[p];if(q>=t)return this.diff_bisectSplit_(a,c,q,w,d)}}for(s=-r+v;s<=r-o;s+=2){p=g+s;t=s==-r||s!=r&&k[p-1]<k[p+1]?k[p+1]:k[p-1]+1;for(q=t-s;t<e&&q<f&&a.charAt(e-t-1)==c.charAt(f-q-1);)t++,q++;k[p]=t;if(t>e)o+=2;else if(q>f)v+=2;else if(!m&&(p=g+l-s,0<=p&&p<h&&-1!=j[p]&&(q=j[p],w=g+
q-p,t=e-t,q>=t)))return this.diff_bisectSplit_(a,c,q,w,d)}}return[[-1,a],[1,c]]};a.prototype.diff_bisectSplit_=function(a,c,d,e,f){var g=a.substring(0,d),h=c.substring(0,e),a=a.substring(d),c=c.substring(e),g=this.diff_main(g,h,!1,f),f=this.diff_main(a,c,!1,f);return g.concat(f)};a.prototype.diff_linesToChars_=function(a,c){function d(a){for(var b="",c=0,d=-1,g=e.length;d<a.length-1;){d=a.indexOf("\n",c);-1==d&&(d=a.length-1);var h=a.substring(c,d+1),c=d+1;(f.hasOwnProperty?f.hasOwnProperty(h):void 0!==
f[h])?b+=String.fromCharCode(f[h]):(b+=String.fromCharCode(g),f[h]=g,e[g++]=h)}return b}var e=[],f={};e[0]="";var g=d(a),h=d(c);return{chars1:g,chars2:h,lineArray:e}};a.prototype.diff_charsToLines_=function(a,c){for(var d=0;d<a.length;d++){for(var e=a[d][1],f=[],g=0;g<e.length;g++)f[g]=c[e.charCodeAt(g)];a[d][1]=f.join("")}};a.prototype.diff_commonPrefix=function(a,c){if(!a||!c||a.charAt(0)!=c.charAt(0))return 0;for(var d=0,e=Math.min(a.length,c.length),f=e,g=0;d<f;)a.substring(g,f)==c.substring(g,
f)?g=d=f:e=f,f=Math.floor((e-d)/2+d);return f};a.prototype.diff_commonSuffix=function(a,c){if(!a||!c||a.charAt(a.length-1)!=c.charAt(c.length-1))return 0;for(var d=0,e=Math.min(a.length,c.length),f=e,g=0;d<f;)a.substring(a.length-f,a.length-g)==c.substring(c.length-f,c.length-g)?g=d=f:e=f,f=Math.floor((e-d)/2+d);return f};a.prototype.diff_commonOverlap_=function(a,c){var d=a.length,e=c.length;if(0==d||0==e)return 0;d>e?a=a.substring(d-e):d<e&&(c=c.substring(0,d));d=Math.min(d,e);if(a==c)return d;
for(var e=0,f=1;;){var g=a.substring(d-f),g=c.indexOf(g);if(-1==g)return e;f+=g;if(0==g||a.substring(d-f)==c.substring(0,f))e=f,f++}};a.prototype.diff_halfMatch_=function(a,c){function d(a,b,c){for(var d=a.substring(c,c+Math.floor(a.length/4)),e=-1,f="",h,j,k,q;-1!=(e=b.indexOf(d,e+1));){var w=g.diff_commonPrefix(a.substring(c),b.substring(e)),t=g.diff_commonSuffix(a.substring(0,c),b.substring(0,e));f.length<t+w&&(f=b.substring(e-t,e)+b.substring(e,e+w),h=a.substring(0,c-t),j=a.substring(c+w),k=b.substring(0,
e-t),q=b.substring(e+w))}return 2*f.length>=a.length?[h,j,k,q,f]:null}if(0>=this.Diff_Timeout)return null;var e=a.length>c.length?a:c,f=a.length>c.length?c:a;if(4>e.length||2*f.length<e.length)return null;var g=this,h=d(e,f,Math.ceil(e.length/4)),e=d(e,f,Math.ceil(e.length/2)),j;if(!h&&!e)return null;j=e?h?h[4].length>e[4].length?h:e:e:h;var k;a.length>c.length?(h=j[0],e=j[1],f=j[2],k=j[3]):(f=j[0],k=j[1],h=j[2],e=j[3]);j=j[4];return[h,e,f,k,j]};a.prototype.diff_cleanupSemantic=function(a){for(var c=
!1,d=[],e=0,f=null,g=0,h=0,j=0,k=0,l=0;g<a.length;)0==a[g][0]?(d[e++]=g,h=k,j=l,l=k=0,f=a[g][1]):(1==a[g][0]?k+=a[g][1].length:l+=a[g][1].length,f&&f.length<=Math.max(h,j)&&f.length<=Math.max(k,l)&&(a.splice(d[e-1],0,[-1,f]),a[d[e-1]+1][0]=1,e--,e--,g=0<e?d[e-1]:-1,l=k=j=h=0,f=null,c=!0)),g++;c&&this.diff_cleanupMerge(a);this.diff_cleanupSemanticLossless(a);for(g=1;g<a.length;){if(-1==a[g-1][0]&&1==a[g][0]){c=a[g-1][1];d=a[g][1];e=this.diff_commonOverlap_(c,d);f=this.diff_commonOverlap_(d,c);if(e>=
f){if(e>=c.length/2||e>=d.length/2)a.splice(g,0,[0,d.substring(0,e)]),a[g-1][1]=c.substring(0,c.length-e),a[g+1][1]=d.substring(e),g++}else if(f>=c.length/2||f>=d.length/2)a.splice(g,0,[0,c.substring(0,f)]),a[g-1][0]=1,a[g-1][1]=d.substring(0,d.length-f),a[g+1][0]=-1,a[g+1][1]=c.substring(f),g++;g++}g++}};a.prototype.diff_cleanupSemanticLossless=function(b){function c(b,c){if(!b||!c)return 6;var d=b.charAt(b.length-1),e=c.charAt(0),f=d.match(a.nonAlphaNumericRegex_),g=e.match(a.nonAlphaNumericRegex_),
h=f&&d.match(a.whitespaceRegex_),j=g&&e.match(a.whitespaceRegex_),d=h&&d.match(a.linebreakRegex_),e=j&&e.match(a.linebreakRegex_),k=d&&b.match(a.blanklineEndRegex_),l=e&&c.match(a.blanklineStartRegex_);return k||l?5:d||e?4:f&&!h&&j?3:h||j?2:f||g?1:0}for(var d=1;d<b.length-1;){if(0==b[d-1][0]&&0==b[d+1][0]){var e=b[d-1][1],f=b[d][1],g=b[d+1][1],h=this.diff_commonSuffix(e,f);if(h)var j=f.substring(f.length-h),e=e.substring(0,e.length-h),f=j+f.substring(0,f.length-h),g=j+g;for(var h=e,j=f,k=g,l=c(e,
f)+c(f,g);f.charAt(0)===g.charAt(0);){var e=e+f.charAt(0),f=f.substring(1)+g.charAt(0),g=g.substring(1),m=c(e,f)+c(f,g);m>=l&&(l=m,h=e,j=f,k=g)}b[d-1][1]!=h&&(h?b[d-1][1]=h:(b.splice(d-1,1),d--),b[d][1]=j,k?b[d+1][1]=k:(b.splice(d+1,1),d--))}d++}};a.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/;a.whitespaceRegex_=/\s/;a.linebreakRegex_=/[\r\n]/;a.blanklineEndRegex_=/\n\r?\n$/;a.blanklineStartRegex_=/^\r?\n\r?\n/;a.prototype.diff_cleanupEfficiency=function(a){for(var c=!1,d=[],e=0,f=null,g=0,h=!1,j=!1,k=!1,
l=!1;g<a.length;){if(0==a[g][0])a[g][1].length<this.Diff_EditCost&&(k||l)?(d[e++]=g,h=k,j=l,f=a[g][1]):(e=0,f=null),k=l=!1;else if(-1==a[g][0]?l=!0:k=!0,f&&(h&&j&&k&&l||f.length<this.Diff_EditCost/2&&3==h+j+k+l))a.splice(d[e-1],0,[-1,f]),a[d[e-1]+1][0]=1,e--,f=null,h&&j?(k=l=!0,e=0):(e--,g=0<e?d[e-1]:-1,k=l=!1),c=!0;g++}c&&this.diff_cleanupMerge(a)};a.prototype.diff_cleanupMerge=function(a){a.push([0,""]);for(var c=0,d=0,e=0,f="",g="",h;c<a.length;)switch(a[c][0]){case 1:e++;g+=a[c][1];c++;break;
case -1:d++;f+=a[c][1];c++;break;case 0:1<d+e?(0!==d&&0!==e&&(h=this.diff_commonPrefix(g,f),0!==h&&(0<c-d-e&&0==a[c-d-e-1][0]?a[c-d-e-1][1]+=g.substring(0,h):(a.splice(0,0,[0,g.substring(0,h)]),c++),g=g.substring(h),f=f.substring(h)),h=this.diff_commonSuffix(g,f),0!==h&&(a[c][1]=g.substring(g.length-h)+a[c][1],g=g.substring(0,g.length-h),f=f.substring(0,f.length-h))),0===d?a.splice(c-e,d+e,[1,g]):0===e?a.splice(c-d,d+e,[-1,f]):a.splice(c-d-e,d+e,[-1,f],[1,g]),c=c-d-e+(d?1:0)+(e?1:0)+1):0!==c&&0==
a[c-1][0]?(a[c-1][1]+=a[c][1],a.splice(c,1)):c++,d=e=0,g=f=""}""===a[a.length-1][1]&&a.pop();d=!1;for(c=1;c<a.length-1;)0==a[c-1][0]&&0==a[c+1][0]&&(a[c][1].substring(a[c][1].length-a[c-1][1].length)==a[c-1][1]?(a[c][1]=a[c-1][1]+a[c][1].substring(0,a[c][1].length-a[c-1][1].length),a[c+1][1]=a[c-1][1]+a[c+1][1],a.splice(c-1,1),d=!0):a[c][1].substring(0,a[c+1][1].length)==a[c+1][1]&&(a[c-1][1]+=a[c+1][1],a[c][1]=a[c][1].substring(a[c+1][1].length)+a[c+1][1],a.splice(c+1,1),d=!0)),c++;d&&this.diff_cleanupMerge(a)};
a.prototype.diff_xIndex=function(a,c){var d=0,e=0,f=0,g=0,h;for(h=0;h<a.length;h++){1!==a[h][0]&&(d+=a[h][1].length);-1!==a[h][0]&&(e+=a[h][1].length);if(d>c)break;f=d;g=e}return a.length!=h&&-1===a[h][0]?g:g+(c-f)};a.prototype.diff_prettyHtml=function(a){for(var c=[],d=/&/g,e=/</g,f=/>/g,g=/\n/g,h=0;h<a.length;h++){var j=a[h][0],k=a[h][1],k=k.replace(d,"&amp;").replace(e,"&lt;").replace(f,"&gt;").replace(g,"&para;<br>");switch(j){case 1:c[h]='<ins style="background:#e6ffe6;">'+k+"</ins>";break;case -1:c[h]=
'<del style="background:#ffe6e6;">'+k+"</del>";break;case 0:c[h]="<span>"+k+"</span>"}}return c.join("")};a.prototype.diff_text1=function(a){for(var c=[],d=0;d<a.length;d++)1!==a[d][0]&&(c[d]=a[d][1]);return c.join("")};a.prototype.diff_text2=function(a){for(var c=[],d=0;d<a.length;d++)-1!==a[d][0]&&(c[d]=a[d][1]);return c.join("")};a.prototype.diff_levenshtein=function(a){for(var c=0,d=0,e=0,f=0;f<a.length;f++){var g=a[f][1];switch(a[f][0]){case 1:d+=g.length;break;case -1:e+=g.length;break;case 0:c+=
Math.max(d,e),e=d=0}}return c+Math.max(d,e)};a.prototype.diff_toDelta=function(a){for(var c=[],d=0;d<a.length;d++)switch(a[d][0]){case 1:c[d]="+"+encodeURI(a[d][1]);break;case -1:c[d]="-"+a[d][1].length;break;case 0:c[d]="="+a[d][1].length}return c.join("\t").replace(/%20/g," ")};a.prototype.diff_fromDelta=function(a,c){for(var d=[],e=0,f=0,g=c.split(/\t/g),h=0;h<g.length;h++){var j=g[h].substring(1);switch(g[h].charAt(0)){case "+":try{d[e++]=[1,decodeURI(j)]}catch(k){throw Error("Illegal escape in diff_fromDelta: "+
j);}break;case "-":case "=":var l=parseInt(j,10);if(isNaN(l)||0>l)throw Error("Invalid number in diff_fromDelta: "+j);j=a.substring(f,f+=l);"="==g[h].charAt(0)?d[e++]=[0,j]:d[e++]=[-1,j];break;default:if(g[h])throw Error("Invalid diff operation in diff_fromDelta: "+g[h]);}}if(f!=a.length)throw Error("Delta length ("+f+") does not equal source text length ("+a.length+").");return d};a.prototype.match_main=function(a,c,d){if(null==a||null==c||null==d)throw Error("Null input. (match_main)");d=Math.max(0,
Math.min(d,a.length));return a==c?0:a.length?a.substring(d,d+c.length)==c?d:this.match_bitap_(a,c,d):-1};a.prototype.match_bitap_=function(a,c,d){function e(a,b){var e=a/c.length,f=Math.abs(d-b);return!g.Match_Distance?f?1:e:e+f/g.Match_Distance}if(c.length>this.Match_MaxBits)throw Error("Pattern too long for this browser.");var f=this.match_alphabet_(c),g=this,h=this.Match_Threshold,j=a.indexOf(c,d);-1!=j&&(h=Math.min(e(0,j),h),j=a.lastIndexOf(c,d+c.length),-1!=j&&(h=Math.min(e(0,j),h)));for(var k=
1<<c.length-1,j=-1,l,m,n=c.length+a.length,u,v=0;v<c.length;v++){l=0;for(m=n;l<m;)e(v,d+m)<=h?l=m:n=m,m=Math.floor((n-l)/2+l);n=m;l=Math.max(1,d-m+1);var o=Math.min(d+m,a.length)+c.length;m=Array(o+2);for(m[o+1]=(1<<v)-1;o>=l;o--){var r=f[a.charAt(o-1)];m[o]=0===v?(m[o+1]<<1|1)&r:(m[o+1]<<1|1)&r|(u[o+1]|u[o])<<1|1|u[o+1];if(m[o]&k&&(r=e(v,o-1),r<=h))if(h=r,j=o-1,j>d)l=Math.max(1,2*d-j);else break}if(e(v+1,d)>h)break;u=m}return j};a.prototype.match_alphabet_=function(a){for(var c={},d=0;d<a.length;d++)c[a.charAt(d)]=
0;for(d=0;d<a.length;d++)c[a.charAt(d)]|=1<<a.length-d-1;return c};a.prototype.patch_addContext_=function(a,c){if(0!=c.length){for(var d=c.substring(a.start2,a.start2+a.length1),e=0;c.indexOf(d)!=c.lastIndexOf(d)&&d.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)e+=this.Patch_Margin,d=c.substring(a.start2-e,a.start2+a.length1+e);e+=this.Patch_Margin;(d=c.substring(a.start2-e,a.start2))&&a.diffs.unshift([0,d]);(e=c.substring(a.start2+a.length1,a.start2+a.length1+e))&&a.diffs.push([0,
e]);a.start1-=d.length;a.start2-=d.length;a.length1+=d.length+e.length;a.length2+=d.length+e.length}};a.prototype.patch_make=function(b,c,d){var e;if("string"==typeof b&&"string"==typeof c&&"undefined"==typeof d)e=b,c=this.diff_main(e,c,!0),2<c.length&&(this.diff_cleanupSemantic(c),this.diff_cleanupEfficiency(c));else if(b&&"object"==typeof b&&"undefined"==typeof c&&"undefined"==typeof d)c=b,e=this.diff_text1(c);else if("string"==typeof b&&c&&"object"==typeof c&&"undefined"==typeof d)e=b;else if("string"==
typeof b&&"string"==typeof c&&d&&"object"==typeof d)e=b,c=d;else throw Error("Unknown call format to patch_make.");if(0===c.length)return[];for(var d=[],b=new a.patch_obj,f=0,g=0,h=0,j=e,k=0;k<c.length;k++){var l=c[k][0],m=c[k][1];!f&&0!==l&&(b.start1=g,b.start2=h);switch(l){case 1:b.diffs[f++]=c[k];b.length2+=m.length;e=e.substring(0,h)+m+e.substring(h);break;case -1:b.length1+=m.length;b.diffs[f++]=c[k];e=e.substring(0,h)+e.substring(h+m.length);break;case 0:m.length<=2*this.Patch_Margin&&f&&c.length!=
k+1?(b.diffs[f++]=c[k],b.length1+=m.length,b.length2+=m.length):m.length>=2*this.Patch_Margin&&f&&(this.patch_addContext_(b,j),d.push(b),b=new a.patch_obj,f=0,j=e,g=h)}1!==l&&(g+=m.length);-1!==l&&(h+=m.length)}f&&(this.patch_addContext_(b,j),d.push(b));return d};a.prototype.patch_deepCopy=function(b){for(var c=[],d=0;d<b.length;d++){var e=b[d],f=new a.patch_obj;f.diffs=[];for(var g=0;g<e.diffs.length;g++)f.diffs[g]=e.diffs[g].slice();f.start1=e.start1;f.start2=e.start2;f.length1=e.length1;f.length2=
e.length2;c[d]=f}return c};a.prototype.patch_apply=function(a,c){if(0==a.length)return[c,[]];var a=this.patch_deepCopy(a),d=this.patch_addPadding(a),c=d+c+d;this.patch_splitMax(a);for(var e=0,f=[],g=0;g<a.length;g++){var h=a[g].start2+e,j=this.diff_text1(a[g].diffs),k,l=-1;if(j.length>this.Match_MaxBits){if(k=this.match_main(c,j.substring(0,this.Match_MaxBits),h),-1!=k&&(l=this.match_main(c,j.substring(j.length-this.Match_MaxBits),h+j.length-this.Match_MaxBits),-1==l||k>=l))k=-1}else k=this.match_main(c,
j,h);if(-1==k)f[g]=!1,e-=a[g].length2-a[g].length1;else if(f[g]=!0,e=k-h,h=-1==l?c.substring(k,k+j.length):c.substring(k,l+this.Match_MaxBits),j==h)c=c.substring(0,k)+this.diff_text2(a[g].diffs)+c.substring(k+j.length);else if(h=this.diff_main(j,h,!1),j.length>this.Match_MaxBits&&this.diff_levenshtein(h)/j.length>this.Patch_DeleteThreshold)f[g]=!1;else{this.diff_cleanupSemanticLossless(h);for(var j=0,m,l=0;l<a[g].diffs.length;l++){var n=a[g].diffs[l];0!==n[0]&&(m=this.diff_xIndex(h,j));1===n[0]?c=
c.substring(0,k+m)+n[1]+c.substring(k+m):-1===n[0]&&(c=c.substring(0,k+m)+c.substring(k+this.diff_xIndex(h,j+n[1].length)));-1!==n[0]&&(j+=n[1].length)}}}c=c.substring(d.length,c.length-d.length);return[c,f]};a.prototype.patch_addPadding=function(a){for(var c=this.Patch_Margin,d="",e=1;e<=c;e++)d+=String.fromCharCode(e);for(e=0;e<a.length;e++)a[e].start1+=c,a[e].start2+=c;var e=a[0],f=e.diffs;if(0==f.length||0!=f[0][0])f.unshift([0,d]),e.start1-=c,e.start2-=c,e.length1+=c,e.length2+=c;else if(c>f[0][1].length){var g=
c-f[0][1].length;f[0][1]=d.substring(f[0][1].length)+f[0][1];e.start1-=g;e.start2-=g;e.length1+=g;e.length2+=g}e=a[a.length-1];f=e.diffs;0==f.length||0!=f[f.length-1][0]?(f.push([0,d]),e.length1+=c,e.length2+=c):c>f[f.length-1][1].length&&(g=c-f[f.length-1][1].length,f[f.length-1][1]+=d.substring(0,g),e.length1+=g,e.length2+=g);return d};a.prototype.patch_splitMax=function(b){for(var c=this.Match_MaxBits,d=0;d<b.length;d++)if(!(b[d].length1<=c)){var e=b[d];b.splice(d--,1);for(var f=e.start1,g=e.start2,
h="";0!==e.diffs.length;){var j=new a.patch_obj,k=!0;j.start1=f-h.length;j.start2=g-h.length;""!==h&&(j.length1=j.length2=h.length,j.diffs.push([0,h]));for(;0!==e.diffs.length&&j.length1<c-this.Patch_Margin;){var h=e.diffs[0][0],l=e.diffs[0][1];1===h?(j.length2+=l.length,g+=l.length,j.diffs.push(e.diffs.shift()),k=!1):-1===h&&1==j.diffs.length&&0==j.diffs[0][0]&&l.length>2*c?(j.length1+=l.length,f+=l.length,k=!1,j.diffs.push([h,l]),e.diffs.shift()):(l=l.substring(0,c-j.length1-this.Patch_Margin),
j.length1+=l.length,f+=l.length,0===h?(j.length2+=l.length,g+=l.length):k=!1,j.diffs.push([h,l]),l==e.diffs[0][1]?e.diffs.shift():e.diffs[0][1]=e.diffs[0][1].substring(l.length))}h=this.diff_text2(j.diffs);h=h.substring(h.length-this.Patch_Margin);l=this.diff_text1(e.diffs).substring(0,this.Patch_Margin);""!==l&&(j.length1+=l.length,j.length2+=l.length,0!==j.diffs.length&&0===j.diffs[j.diffs.length-1][0]?j.diffs[j.diffs.length-1][1]+=l:j.diffs.push([0,l]));k||b.splice(++d,0,j)}}};a.prototype.patch_toText=
function(a){for(var c=[],d=0;d<a.length;d++)c[d]=a[d];return c.join("")};a.prototype.patch_fromText=function(b){var c=[];if(!b)return c;for(var b=b.split("\n"),d=0,e=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;d<b.length;){var f=b[d].match(e);if(!f)throw Error("Invalid patch string: "+b[d]);var g=new a.patch_obj;c.push(g);g.start1=parseInt(f[1],10);""===f[2]?(g.start1--,g.length1=1):"0"==f[2]?g.length1=0:(g.start1--,g.length1=parseInt(f[2],10));g.start2=parseInt(f[3],10);""===f[4]?(g.start2--,g.length2=
1):"0"==f[4]?g.length2=0:(g.start2--,g.length2=parseInt(f[4],10));for(d++;d<b.length;){f=b[d].charAt(0);try{var h=decodeURI(b[d].substring(1))}catch(j){throw Error("Illegal escape in patch_fromText: "+h);}if("-"==f)g.diffs.push([-1,h]);else if("+"==f)g.diffs.push([1,h]);else if(" "==f)g.diffs.push([0,h]);else if("@"==f)break;else if(""!==f)throw Error('Invalid patch mode "'+f+'" in: '+h);d++}}return c};a.patch_obj=function(){this.diffs=[];this.start2=this.start1=null;this.length2=this.length1=0};
a.patch_obj.prototype.toString=function(){var a,c;a=0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1;c=0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2;a=["@@ -"+a+" +"+c+" @@\n"];var d;for(c=0;c<this.diffs.length;c++){switch(this.diffs[c][0]){case 1:d="+";break;case -1:d="-";break;case 0:d=" "}a[c+1]=d+encodeURI(this.diffs[c][1])+"\n"}return a.join("").replace(/%20/g," ")};this.diff_match_patch=a;this.DIFF_DELETE=
-1;this.DIFF_INSERT=1;this.DIFF_EQUAL=0})();Ext.ns("Extensive.grid");Extensive.grid.ItemDeleter=Ext.extend(Ext.grid.RowSelectionModel,{width:30,sortable:!1,dataIndex:0,menuDisabled:!0,fixed:!0,id:"deleter",initEvents:function(){Extensive.grid.ItemDeleter.superclass.initEvents.call(this);this.grid.on("cellclick",function(a,b,c){c==a.getColumnModel().getIndexById("deleter")&&(b=a.getStore().getAt(b),a.getStore().remove(b),a.getView().refresh())})},renderer:function(){return'<div class="extensive-remove" style="width: 15px; height: 16px;"></div>'}});function jsonPath(a,b,c){var d={resultType:c&&c.resultType||"VALUE",result:[],normalize:function(a){var b=[];return a.replace(/[\['](\??\(.*?\))[\]']/g,function(a,c){return"[#"+(b.push(c)-1)+"]"}).replace(/'?\.'?|\['?/g,";").replace(/;;;|;;/g,";..;").replace(/;$|'?\]|'$/g,"").replace(/#([0-9]+)/g,function(a,c){return b[c]})},asPath:function(a){for(var a=a.split(";"),b="$",c=1,d=a.length;c<d;c++)b+=/^[0-9*]+$/.test(a[c])?"["+a[c]+"]":"['"+a[c]+"']";return b},store:function(a,b){a&&(d.result[d.result.length]=
"PATH"==d.resultType?d.asPath(a):b);return!!a},trace:function(a,b,c){if(a){var a=a.split(";"),e=a.shift(),a=a.join(";");if(b&&b.hasOwnProperty(e))d.trace(a,b[e],c+";"+e);else if("*"===e)d.walk(e,a,b,c,function(a,b,c,e,f){d.trace(a+";"+c,e,f)});else if(".."===e)d.trace(a,b,c),d.walk(e,a,b,c,function(a,b,c,e,f){"object"===typeof e[a]&&d.trace("..;"+c,e[a],f+";"+a)});else if(/,/.test(e))for(var e=e.split(/'?,'?/),k=0,l=e.length;k<l;k++)d.trace(e[k]+";"+a,b,c);else/^\(.*?\)$/.test(e)?d.trace(d.eval(e,
b,c.substr(c.lastIndexOf(";")+1))+";"+a,b,c):/^\?\(.*?\)$/.test(e)?d.walk(e,a,b,c,function(a,b,c,e,f){d.eval(b.replace(/^\?\((.*?)\)$/,"$1"),e[a],a)&&d.trace(a+";"+c,e,f)}):/^(-?[0-9]*):(-?[0-9]*):?([0-9]*)$/.test(e)&&d.slice(e,a,b,c)}else d.store(c,b)},walk:function(a,b,c,d,e){if(c instanceof Array)for(var l=0,m=c.length;l<m;l++)l in c&&e(l,a,b,c,d);else if("object"===typeof c)for(l in c)c.hasOwnProperty(l)&&e(l,a,b,c,d)},slice:function(a,b,c,e){if(c instanceof Array){var k=c.length,l=0,m=k,n=1;
a.replace(/^(-?[0-9]*):(-?[0-9]*):?(-?[0-9]*)$/g,function(a,b,c,d){l=parseInt(b||l);m=parseInt(c||m);n=parseInt(d||n)});l=0>l?Math.max(0,l+k):Math.min(k,l);m=0>m?Math.max(0,m+k):Math.min(k,m);for(a=l;a<m;a+=n)d.trace(a+";"+b,c,e)}},eval:function(a,b){try{return e&&b&&eval(a.replace(/@/g,"_v"))}catch(c){throw new SyntaxError("jsonPath: "+c.message+": "+a.replace(/@/g,"_v").replace(/\^/g,"_a"));}}},e=a;if(b&&a&&("VALUE"==d.resultType||"PATH"==d.resultType))return d.trace(d.normalize(b).replace(/^\$;/,
""),a,"$"),d.result.length?d.result:!1};ImageViewer=Ext.extend(Ext.Window,{initComponent:function(){var a=Ext.id();ORYX.EDITOR.imagePreviewSVG=this.src;this.bodyCfg={id:"imageviewerid",layout:"anchor",autoCreate:!0,closeAction:"close",title:"Image Viewer",plain:!0,modal:!0,collapsible:!1,resizeable:!0,shadow:!0,html:'<iframe id="imageViewFrame" name="imageViewFrame" frameborder="0" scrolling="auto" width="100%" height="400" src="'+ORYX.PATH+"imageview/imageview.html?"+a+'"></iframe>',width:400,height:400,autoScroll:!0,fixedcenter:!0};ImageViewer.superclass.initComponent.apply(this,
arguments)},onRender:function(){ImageViewer.superclass.onRender.apply(this,arguments);this.body.on("load",this.onImageLoad,this,{single:!0})},onImageLoad:function(){},setSrc:function(a){this.body.on("load",this.onImageLoad,this,{single:!0});this.body.dom.src=a},initEvents:function(){ImageViewer.superclass.initEvents.apply(this,arguments);this.resizer&&(this.resizer.preserveRatio=!0)}});SVGViewer=Ext.extend(Ext.Window,{initComponent:function(){var a=Ext.id();this.bodyCfg={id:"svgviewerid",layout:"anchor",autoCreate:!0,closeAction:"close",title:"SVG Viewer",plain:!0,modal:!0,collapsible:!1,resizeable:!0,shadow:!0,html:'<iframe id="svgViewFrame" name="svgViewFrame" frameborder="0" scrolling="auto" width="100%" height="400" src="'+ORYX.PATH+"localhistory/svgview.html?"+a+'"></iframe>',width:400,height:400,autoScroll:!0,fixedcenter:!0};SVGViewer.superclass.initComponent.apply(this,arguments)},
onRender:function(){SVGViewer.superclass.onRender.apply(this,arguments);this.body.on("load",this.onSVGLoad,this,{single:!0})},onSVGLoad:function(){},setSrc:function(a){this.body.on("load",this.onSVGLoad,this,{single:!0});this.body.dom.src=a},initEvents:function(){SVGViewer.superclass.initEvents.apply(this,arguments);this.resizer&&(this.resizer.preserveRatio=!0)}});Ext.ux.PanelCollapsedTitlePlugin=function(){var a=!!document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"),b=function(){var b="east"==this.region||"west"==this.region,d="overflow: visible; padding: 0; border: none; background: none;";if(b&&a){this.collapsedHeader=this.ownerCt.layout[this.region].getCollapsedEl().createChild({tag:"div",style:"height: 100%; overflow: hidden;"});var e=document.createElementNS("http://www.w3.org/2000/svg","svg");this.collapsedHeader.dom.appendChild(e);
e.setAttribute("width","100%");e.setAttribute("height","100%");b=document.createElementNS("http://www.w3.org/2000/svg","text");"west"==this.region?(b.setAttribute("x",12),b.setAttribute("y",100),b.setAttribute("transform","rotate(270 12 100)")):(b.setAttribute("x",6),b.setAttribute("y",1),b.setAttribute("transform","rotate(90 6 1)"));b.setAttribute("class","x-panel-header x-panel-header-rotated");e.appendChild(b);this.collapsedHeaderText=document.createTextNode(this.title);b.appendChild(this.collapsedHeaderText);
e=Ext.fly(b).getStyle("color");b.setAttribute("style",d+";fill: "+e+";")}else e="position: relative;",b?e+="white-space: nowrap; writing-mode: tb-rl; top: 1px; left: 3px;":(e+="top: 2px;",d+="padding-left: 4px; margin-right: 18px;"),this.collapsedHeader=this.ownerCt.layout[this.region].getCollapsedEl().createChild({tag:"div",style:d,cls:"x-panel-header x-panel-header-rotated",html:'<span style="'+e+'">'+this.title+"</span>"}),this.collapsedHeaderText=this.collapsedHeader.first();this.collapsedIconCls&&
this.setCollapsedIconClass(this.collapsedIconCls)};this.init=function(a){if(a.collapsible){var d="east"==a.region||"west"==a.region;a.setTitle=Ext.Panel.prototype.setTitle.createSequence(function(a){this.rendered&&this.collapsedHeaderText&&(this.collapsedHeaderText.dom?this.collapsedHeaderText.dom.innerHTML=a:this.collapsedHeaderText.replaceData&&(this.collapsedHeaderText.nodeValue=a))});a.setCollapsedIconClass=function(a){var b=this.collapsedIconCls;this.collapsedIconCls=a;if(this.rendered&&this.collapsedHeader){var a=
this.collapsedHeader,c=a.child("img.x-panel-inline-icon");c?this.collapsedIconCls?Ext.fly(c).replaceClass(b,this.collapsedIconCls):Ext.fly(c).remove():this.collapsedIconCls&&Ext.DomHelper.insertBefore(a.dom.firstChild,{tag:"img",src:Ext.BLANK_IMAGE_URL,cls:"x-panel-inline-icon "+this.collapsedIconCls,style:d?"display: block; margin: 1px 2px;":"margin-top: 2px; margin-right: 4px"})}};a.on("render",function(){if(this.ownerCt.rendered&&this.ownerCt.layout.hasLayout)b.call(a);else this.ownerCt.on("afterlayout",
b,a,{single:!0})},a)}};return this};ORYX||(ORYX={});ORYX.I18N||(ORYX.I18N={});ORYX.I18N.Language="en_us";ORYX.I18N.Oryx||(ORYX.I18N.Oryx={});ORYX.I18N.Oryx.title=ORYX.TITLE;ORYX.I18N.Oryx.noBackendDefined="Caution! \nNo Backend defined.\n The requested model cannot be loaded. Try to load a configuration with a save plugin.";ORYX.I18N.Oryx.pleaseWait='<center>  <img src="/designer/images/jbpm_logo.png" align="middle"/>  <b>jBPM Web Designer loading. Please wait...</b></center>';ORYX.I18N.Oryx.notLoggedOn="Not logged on";
ORYX.I18N.Oryx.editorOpenTimeout="The editor does not seem to be started yet. Please check, whether you have a popup blocker enabled and disable it or allow popups for this site. We will never display any commercials on this site.";ORYX.I18N.AddDocker||(ORYX.I18N.AddDocker={});ORYX.I18N.AddDocker.group="Docker";ORYX.I18N.AddDocker.add="Add Docker";ORYX.I18N.AddDocker.addDesc="Add a Docker to an edge, by clicking on it";ORYX.I18N.AddDocker.del="Delete Docker";ORYX.I18N.AddDocker.delDesc="Delete a Docker";
ORYX.I18N.ShapeConnector||(ORYX.I18N.ShapeConnector={});ORYX.I18N.ShapeConnector.group="Connector";ORYX.I18N.ShapeConnector.add="Connect Shapes";ORYX.I18N.ShapeConnector.addDesc="Connect several nodes by marking them in the desired order";ORYX.I18N.SSExtensionLoader||(ORYX.I18N.SSExtensionLoader={});ORYX.I18N.SSExtensionLoader.group="Stencil Set";ORYX.I18N.SSExtensionLoader.add="Add Stencil Set Extension";ORYX.I18N.SSExtensionLoader.addDesc="Add a stencil set extension";
ORYX.I18N.SSExtensionLoader.loading="Loading Stencil Set Extension";ORYX.I18N.SSExtensionLoader.noExt="There are no extensions available or all available extensions are already loaded.";ORYX.I18N.SSExtensionLoader.failed1="Loading stencil set extensions configuration failed. The response is not a valid configuration file.";ORYX.I18N.SSExtensionLoader.failed2="Loading stencil set extension configuration file failed. The request returned an error.";ORYX.I18N.SSExtensionLoader.panelTitle="Stencil Set Extensions";
ORYX.I18N.SSExtensionLoader.panelText="Select the stencil set extensions you want to load.";ORYX.I18N.AdHocCC||(ORYX.I18N.AdHocCC={});ORYX.I18N.AdHocCC.group="Ad Hoc";ORYX.I18N.AdHocCC.compl="Edit Completion Condition";ORYX.I18N.AdHocCC.complDesc="Edit an Ad Hoc Activity's Completion Condition";ORYX.I18N.AdHocCC.notOne="Not exactly one element selected!";ORYX.I18N.AdHocCC.nodAdHocCC="Selected element has no ad hoc completion condition!";ORYX.I18N.AdHocCC.selectTask="Select a task...";
ORYX.I18N.AdHocCC.selectState="Select a state...";ORYX.I18N.AdHocCC.addExp="Add Expression";ORYX.I18N.AdHocCC.selectDataField="Select a data field...";ORYX.I18N.AdHocCC.enterEqual="Enter a value that must equal...";ORYX.I18N.AdHocCC.and="and";ORYX.I18N.AdHocCC.or="or";ORYX.I18N.AdHocCC.not="not";ORYX.I18N.AdHocCC.clearCC="Clear Completion Condition";ORYX.I18N.AdHocCC.editCC="Edit Ad-Hoc Completion Condtions";ORYX.I18N.AdHocCC.addExecState="Add Execution State Expression: ";
ORYX.I18N.AdHocCC.addDataExp="Add Data Expression: ";ORYX.I18N.AdHocCC.addLogOp="Add Logical Operators: ";ORYX.I18N.AdHocCC.curCond="Current Completion Condition: ";ORYX.I18N.AMLSupport||(ORYX.I18N.AMLSupport={});ORYX.I18N.AMLSupport.group="EPC";ORYX.I18N.AMLSupport.imp="Import AML file";ORYX.I18N.AMLSupport.impDesc="Import an Aris 7 AML file";ORYX.I18N.AMLSupport.failed="Importing AML file failed. Please check, if the selected file is a valid AML file. Error message: ";
ORYX.I18N.AMLSupport.failed2="Importing AML file failed: ";ORYX.I18N.AMLSupport.noRights="You have no rights to import multiple EPC-Diagrams (Login required).";ORYX.I18N.AMLSupport.panelText="Select an AML (.xml) file to import.";ORYX.I18N.AMLSupport.file="File";ORYX.I18N.AMLSupport.importBtn="Import AML-File";ORYX.I18N.AMLSupport.get="Get diagrams...";ORYX.I18N.AMLSupport.close="Close";ORYX.I18N.AMLSupport.title="Title";ORYX.I18N.AMLSupport.selectDiagrams="Select the diagram(s) you want to import. <br/> If one model is selected, it will be imported in the current editor, if more than one is selected, those models will directly be stored in the repository.";
ORYX.I18N.AMLSupport.impText="Import";ORYX.I18N.AMLSupport.impProgress="Importing...";ORYX.I18N.AMLSupport.cancel="Cancel";ORYX.I18N.AMLSupport.name="Name";ORYX.I18N.AMLSupport.allImported="All imported diagrams.";ORYX.I18N.AMLSupport.ok="Ok";ORYX.I18N.Arrangement||(ORYX.I18N.Arrangement={});ORYX.I18N.Arrangement.groupZ="Z-Order";ORYX.I18N.Arrangement.btf="Bring To Front";ORYX.I18N.Arrangement.btfDesc="Bring to Front";ORYX.I18N.Arrangement.btb="Bring To Back";ORYX.I18N.Arrangement.btbDesc="Bring To Back";
ORYX.I18N.Arrangement.bf="Bring Forward";ORYX.I18N.Arrangement.bfDesc="Bring Forward";ORYX.I18N.Arrangement.bb="Bring Backward";ORYX.I18N.Arrangement.bbDesc="Bring Backward";ORYX.I18N.Arrangement.groupA="Alignment";ORYX.I18N.Arrangement.ab="Alignment Bottom";ORYX.I18N.Arrangement.abDesc="Bottom";ORYX.I18N.Arrangement.am="Alignment Middle";ORYX.I18N.Arrangement.amDesc="Middle";ORYX.I18N.Arrangement.at="Alignment Top";ORYX.I18N.Arrangement.atDesc="Top";ORYX.I18N.Arrangement.al="Alignment Left";
ORYX.I18N.Arrangement.alDesc="Left";ORYX.I18N.Arrangement.ac="Alignment Center";ORYX.I18N.Arrangement.acDesc="Center";ORYX.I18N.Arrangement.ar="Alignment Right";ORYX.I18N.Arrangement.arDesc="Right";ORYX.I18N.Arrangement.as="Alignment Same Size";ORYX.I18N.Arrangement.asDesc="Same Size";ORYX.I18N.BPELSupport||(ORYX.I18N.BPELSupport={});ORYX.I18N.BPELSupport.group="BPEL";ORYX.I18N.BPELSupport.exp="Export BPEL";ORYX.I18N.BPELSupport.expDesc="Export diagram to BPEL";ORYX.I18N.BPELSupport.imp="Import BPEL";
ORYX.I18N.BPELSupport.impDesc="Import a BPEL file";ORYX.I18N.BPELSupport.selectFile="Select a BPEL file to import";ORYX.I18N.BPELSupport.file="file";ORYX.I18N.BPELSupport.impPanel="Import BPEL file";ORYX.I18N.BPELSupport.impBtn="Import";ORYX.I18N.BPELSupport.content="content";ORYX.I18N.BPELSupport.close="Close";ORYX.I18N.BPELSupport.error="Error";ORYX.I18N.BPELSupport.progressImp="Import...";ORYX.I18N.BPELSupport.progressExp="Export...";ORYX.I18N.BPELSupport.impFailed="An error while importing occurs! <br/>Please check error message: <br/><br/>";
ORYX.I18N.BPELLayout||(ORYX.I18N.BPELLayout={});ORYX.I18N.BPELLayout.group="BPELLayout";ORYX.I18N.BPELLayout.disable="disable layout";ORYX.I18N.BPELLayout.disDesc="disable auto layout plug-in";ORYX.I18N.BPELLayout.enable="enable layout";ORYX.I18N.BPELLayout.enDesc="enable auto layout plug-in";ORYX.I18N.BPEL4Chor2BPELSupport||(ORYX.I18N.BPEL4Chor2BPELSupport={});ORYX.I18N.BPEL4Chor2BPELSupport.group="BPEL4Chor";ORYX.I18N.BPEL4Chor2BPELSupport.exp="Export to BPEL";
ORYX.I18N.BPEL4Chor2BPELSupport.expDesc="Export diagram to BPEL";ORYX.I18N.BPEL4ChorSupport||(ORYX.I18N.BPEL4ChorSupport={});ORYX.I18N.BPEL4ChorSupport.group="BPEL4Chor";ORYX.I18N.BPEL4ChorSupport.exp="Export BPEL4Chor";ORYX.I18N.BPEL4ChorSupport.expDesc="Export diagram to BPEL4Chor";ORYX.I18N.BPEL4ChorSupport.imp="Import BPEL4Chor";ORYX.I18N.BPEL4ChorSupport.impDesc="Import a BPEL4Chor file";ORYX.I18N.BPEL4ChorSupport.gen="BPEL4Chor generator";ORYX.I18N.BPEL4ChorSupport.genDesc="generate values of some BPEL4Chor properties if they are already known(e.g. sender of messageLink)";
ORYX.I18N.BPEL4ChorSupport.selectFile="Select a BPEL4Chor file to import";ORYX.I18N.BPEL4ChorSupport.file="file";ORYX.I18N.BPEL4ChorSupport.impPanel="Import BPEL4Chor file";ORYX.I18N.BPEL4ChorSupport.impBtn="Import";ORYX.I18N.BPEL4ChorSupport.content="content";ORYX.I18N.BPEL4ChorSupport.close="Close";ORYX.I18N.BPEL4ChorSupport.error="Error";ORYX.I18N.BPEL4ChorSupport.progressImp="Import...";ORYX.I18N.BPEL4ChorSupport.progressExp="Export...";ORYX.I18N.BPEL4ChorSupport.impFailed="An error while importing occurs! <br/>Please check error message: <br/><br/>";
ORYX.I18N.Bpel4ChorTransformation||(ORYX.I18N.Bpel4ChorTransformation={});ORYX.I18N.Bpel4ChorTransformation.group="Export";ORYX.I18N.Bpel4ChorTransformation.exportBPEL="Export BPEL4Chor";ORYX.I18N.Bpel4ChorTransformation.exportBPELDesc="Export diagram to BPEL4Chor";ORYX.I18N.Bpel4ChorTransformation.exportXPDL="Export XPDL4Chor";ORYX.I18N.Bpel4ChorTransformation.exportXPDLDesc="Export diagram to XPDL4Chor";ORYX.I18N.Bpel4ChorTransformation.warning="Warning";
ORYX.I18N.Bpel4ChorTransformation.wrongValue='The changed name must have the value "1" to avoid errors during the transformation to BPEL4Chor';ORYX.I18N.Bpel4ChorTransformation.loopNone='The loop type of the receive task must be "None" to be transformable to BPEL4Chor';ORYX.I18N.Bpel4ChorTransformation.error="Error";ORYX.I18N.Bpel4ChorTransformation.noSource="1 with id 2 has no source object.";ORYX.I18N.Bpel4ChorTransformation.noTarget="1 with id 2 has no target object.";
ORYX.I18N.Bpel4ChorTransformation.transCall="An error occured during the transformation call. 1:2";ORYX.I18N.Bpel4ChorTransformation.loadingXPDL4ChorExport="Export to XPDL4Chor";ORYX.I18N.Bpel4ChorTransformation.loadingBPEL4ChorExport="Export to BPEL4Chor";ORYX.I18N.Bpel4ChorTransformation.noGen="The transformation input could not be generated: 1\n2\n";
ORYX.I18N.BPMN2PNConverter={name:"Convert to Petri net",desc:"Converts BPMN diagrams to Petri nets",group:"Export",error:"Error",errors:{server:"Couldn't import BPNM diagram.",noRights:"Don't you have read permissions on given model?",notSaved:"Model must be saved and reopened for using Petri net exporter!"},progress:{status:"Status",importingModel:"Importing BPMN Model",fetchingModel:"Fetching",convertingModel:"Converting",renderingModel:"Rendering"}};
ORYX.I18N.TransformationDownloadDialog||(ORYX.I18N.TransformationDownloadDialog={});ORYX.I18N.TransformationDownloadDialog.error="Error";ORYX.I18N.TransformationDownloadDialog.noResult="The transformation service did not return a result.";ORYX.I18N.TransformationDownloadDialog.errorParsing="Error During the Parsing of the Diagram.";ORYX.I18N.TransformationDownloadDialog.transResult="Transformation Results";ORYX.I18N.TransformationDownloadDialog.showFile="Show the result file";
ORYX.I18N.TransformationDownloadDialog.downloadFile="Download the result file";ORYX.I18N.TransformationDownloadDialog.downloadAll="Download all result files";ORYX.I18N.DesynchronizabilityOverlay||(ORYX.I18N.DesynchronizabilityOverlay={});ORYX.I18N.DesynchronizabilityOverlay.group="Overlay";ORYX.I18N.DesynchronizabilityOverlay.name="Desynchronizability Checker";ORYX.I18N.DesynchronizabilityOverlay.desc="Desynchronizability Checker";ORYX.I18N.DesynchronizabilityOverlay.sync="The net is desynchronizable.";
ORYX.I18N.DesynchronizabilityOverlay.error="The net has 1 syntax errors.";ORYX.I18N.DesynchronizabilityOverlay.invalid="Invalid answer from server.";ORYX.I18N.Edit||(ORYX.I18N.Edit={});ORYX.I18N.Edit.group="Edit";ORYX.I18N.Edit.cut="Cut";ORYX.I18N.Edit.cutDesc="Cut the selection into a Designer clipboard";ORYX.I18N.Edit.copy="Copy";ORYX.I18N.Edit.copyDesc="Copy the selection into an Designer clipboard";ORYX.I18N.Edit.paste="Paste";ORYX.I18N.Edit.pasteDesc="Paste the Designer clipboard to the canvas";
ORYX.I18N.Edit.del="Delete";ORYX.I18N.Edit.delDesc="Delete all selected shapes";ORYX.I18N.EPCSupport||(ORYX.I18N.EPCSupport={});ORYX.I18N.EPCSupport.group="EPC";ORYX.I18N.EPCSupport.exp="Export EPC";ORYX.I18N.EPCSupport.expDesc="Export diagram to EPML";ORYX.I18N.EPCSupport.imp="Import EPC";ORYX.I18N.EPCSupport.impDesc="Import an EPML file";ORYX.I18N.EPCSupport.progressExp="Exporting model";ORYX.I18N.EPCSupport.selectFile="Select an EPML (.empl) file to import.";ORYX.I18N.EPCSupport.file="File";
ORYX.I18N.EPCSupport.impPanel="Import EPML File";ORYX.I18N.EPCSupport.impBtn="Import";ORYX.I18N.EPCSupport.close="Close";ORYX.I18N.EPCSupport.error="Error";ORYX.I18N.EPCSupport.progressImp="Import...";ORYX.I18N.ERDFSupport||(ORYX.I18N.ERDFSupport={});ORYX.I18N.ERDFSupport.exp="Export to ERDF";ORYX.I18N.ERDFSupport.expDesc="Export to ERDF";ORYX.I18N.ERDFSupport.imp="Import from ERDF";ORYX.I18N.ERDFSupport.impDesc="Import from ERDF";ORYX.I18N.ERDFSupport.impFailed="Request for import of ERDF failed.";
ORYX.I18N.ERDFSupport.impFailed2="An error while importing occurs! <br/>Please check error message: <br/><br/>";ORYX.I18N.ERDFSupport.error="Error";ORYX.I18N.ERDFSupport.noCanvas="The xml document has no Oryx canvas node included!";ORYX.I18N.ERDFSupport.noSS="The Oryx canvas node has no stencil set definition included!";ORYX.I18N.ERDFSupport.wrongSS="The given stencil set does not fit to the current editor!";ORYX.I18N.ERDFSupport.selectFile="Select an ERDF (.xml) file or type in the ERDF to import it!";
ORYX.I18N.ERDFSupport.file="File";ORYX.I18N.ERDFSupport.impERDF="Import ERDF";ORYX.I18N.ERDFSupport.impBtn="Import";ORYX.I18N.ERDFSupport.impProgress="Importing...";ORYX.I18N.ERDFSupport.close="Close";ORYX.I18N.ERDFSupport.deprTitle="Really export to eRDF?";ORYX.I18N.ERDFSupport.deprText="Exporting to eRDF is not recommended anymore because the support will be stopped in future versions of the Oryx editor. If possible, export the model to JSON. Do you want to export anyway?";
ORYX.I18N.jPDLSupport||(ORYX.I18N.jPDLSupport={});ORYX.I18N.jPDLSupport.group="Export";ORYX.I18N.jPDLSupport.exp="Export to jPDL";ORYX.I18N.jPDLSupport.expDesc="Export to jPDL";ORYX.I18N.jPDLSupport.imp="Import from jPDL";ORYX.I18N.jPDLSupport.impDesc="Migrate a jPDL File to BPMN2";ORYX.I18N.jPDLSupport.impFailedReq="Request for migration of jPDL failed.";ORYX.I18N.jPDLSupport.impFailedJsonAbort="Migration aborted.";ORYX.I18N.jPDLSupport.loadSseQuestionTitle="jBPM stencil set extension needs to be loaded";
ORYX.I18N.jPDLSupport.loadSseQuestionBody="In order to migrate jPDL, the stencil set extension has to be loaded. Do you want to proceed?";ORYX.I18N.jPDLSupport.expFailedReq="Request for export of model failed.";ORYX.I18N.jPDLSupport.expFailedXml="Export to jPDL failed. Exporter reported: ";ORYX.I18N.jPDLSupport.error="Error";ORYX.I18N.jPDLSupport.selectFile="1. Select a jPDL processdefinition.xml file (or type it in)";ORYX.I18N.jPDLSupport.selectGpdFile="2. Select a jPDL gpd.xml file (or type it in)";
ORYX.I18N.jPDLSupport.file="Definition file";ORYX.I18N.jPDLSupport.gpdfile="GPD file";ORYX.I18N.jPDLSupport.impJPDL="Migrate to BPMN2";ORYX.I18N.jPDLSupport.impBtn="Migrate";ORYX.I18N.jPDLSupport.impProgress="Migrating...";ORYX.I18N.jPDLSupport.close="Close";ORYX.I18N.FromBPMN2Support||(ORYX.I18N.FromBPMN2Support={});ORYX.I18N.FromBPMN2Support.selectFile="Select an BPMN2 file or type in the BPMN2 to import it!";ORYX.I18N.FromBPMN2Support.file="File";ORYX.I18N.FromBPMN2Support.impBPMN2="Import BPMN2";
ORYX.I18N.FromBPMN2Support.impBtn="Import";ORYX.I18N.FromBPMN2Support.impProgress="Importing...";ORYX.I18N.FromBPMN2Support.close="Close";ORYX.I18N.FromJSONSupport||(ORYX.I18N.FromJSONSupport={});ORYX.I18N.FromJSONSupport.selectFile="Select an JSON file or type in the JSON to import it!";ORYX.I18N.FromJSONSupport.file="File";ORYX.I18N.FromJSONSupport.impBPMN2="Import JSON";ORYX.I18N.FromJSONSupport.impBtn="Import";ORYX.I18N.FromJSONSupport.impProgress="Importing...";
ORYX.I18N.FromJSONSupport.close="Close";ORYX.I18N.Bpmn2Bpel||(ORYX.I18N.Bpmn2Bpel={});ORYX.I18N.Bpmn2Bpel.group="ExecBPMN";ORYX.I18N.Bpmn2Bpel.show="Show transformed BPEL";ORYX.I18N.Bpmn2Bpel.download="Download transformed BPEL";ORYX.I18N.Bpmn2Bpel.deploy="Deploy transformed BPEL";ORYX.I18N.Bpmn2Bpel.showDesc="Transforms BPMN to BPEL and shows the result in a new window.";ORYX.I18N.Bpmn2Bpel.downloadDesc="Transforms BPMN to BPEL and offers to download the result.";ORYX.I18N.Bpmn2Bpel.deployDesc="Transforms BPMN to BPEL and deploys the business process on the BPEL-Engine Apache ODE";
ORYX.I18N.Bpmn2Bpel.transfFailed="Request for transformation to BPEL failed.";ORYX.I18N.Bpmn2Bpel.ApacheOdeUrlInputTitle="Apache ODE URL";ORYX.I18N.Bpmn2Bpel.ApacheOdeUrlInputLabelDeploy="Deploy Process";ORYX.I18N.Bpmn2Bpel.ApacheOdeUrlInputLabelCancel="Cancel";ORYX.I18N.Bpmn2Bpel.ApacheOdeUrlInputPanelText="Please type-in the URL to the Apache ODE BPEL-Engine. E.g.: http://myserver:8080/ode";ORYX.I18N.Save||(ORYX.I18N.Save={});ORYX.I18N.Save.group="File";ORYX.I18N.Save.save="Save";
ORYX.I18N.Save.autosave="Autosave";ORYX.I18N.Save.saveDesc="Save";ORYX.I18N.Save.autosaveDesc="Autosave";ORYX.I18N.Save.autosaveDesc_on="Autosave (on)";ORYX.I18N.Save.autosaveDesc_off="Autosave (off)";ORYX.I18N.Save.saveAs="Save As...";ORYX.I18N.Save.saveAsDesc="Save As...";ORYX.I18N.Save.unsavedData="There are unsaved data, please save before you leave, otherwise your changes get lost!";ORYX.I18N.Save.newProcess="New Process";ORYX.I18N.Save.saveAsTitle="Save as...";ORYX.I18N.Save.saveBtn="Save";
ORYX.I18N.Save.close="Close";ORYX.I18N.Save.savedAs="Saved As";ORYX.I18N.Save.saved="Saved!";ORYX.I18N.Save.failed="Saving failed.";ORYX.I18N.Save.noRights="You have no rights to save changes.";ORYX.I18N.Save.saving="Saving";ORYX.I18N.Save.saveAsHint="The process diagram is stored under:";ORYX.I18N.File||(ORYX.I18N.File={});ORYX.I18N.File.group="File";ORYX.I18N.File.print="Print";ORYX.I18N.File.printDesc="Print current model";ORYX.I18N.File.pdf="Export as PDF";ORYX.I18N.File.pdfDesc="Export as PDF";
ORYX.I18N.File.info="Info";ORYX.I18N.File.infoDesc="Info";ORYX.I18N.File.genPDF="Generating PDF";ORYX.I18N.File.genPDFFailed="Generating PDF failed.";ORYX.I18N.File.printTitle="Print";ORYX.I18N.File.printMsg="We are currently experiencing problems with the printing function. We recommend using the PDF Export to print the diagram. Do you really want to continue printing?";ORYX.I18N.Grouping||(ORYX.I18N.Grouping={});ORYX.I18N.Grouping.grouping="Grouping";ORYX.I18N.Grouping.group="Group";
ORYX.I18N.Grouping.groupDesc="Groups all selected shapes";ORYX.I18N.Grouping.ungroup="Ungroup";ORYX.I18N.Grouping.ungroupDesc="Deletes the group of all selected Shapes";ORYX.I18N.IBPMN2BPMN||(ORYX.I18N.IBPMN2BPMN={});ORYX.I18N.IBPMN2BPMN.group="Export";ORYX.I18N.IBPMN2BPMN.name="IBPMN 2 BPMN Mapping";ORYX.I18N.IBPMN2BPMN.desc="Convert IBPMN to BPMN";ORYX.I18N.Loading||(ORYX.I18N.Loading={});ORYX.I18N.Loading.waiting="Please wait...";ORYX.I18N.Pnmlexport||(ORYX.I18N.Pnmlexport={});
ORYX.I18N.Pnmlexport.group="Export";ORYX.I18N.Pnmlexport.name="BPMN to PNML";ORYX.I18N.Pnmlexport.desc="Export as executable PNML and deploy";ORYX.I18N.PropertyWindow||(ORYX.I18N.PropertyWindow={});ORYX.I18N.PropertyWindow.name="Name";ORYX.I18N.PropertyWindow.value="Value";ORYX.I18N.PropertyWindow.selected="selected";ORYX.I18N.PropertyWindow.clickIcon="Click Icon";ORYX.I18N.PropertyWindow.add="Add";ORYX.I18N.PropertyWindow.rem="Remove";ORYX.I18N.PropertyWindow.complex="Editor for a Complex Type";
ORYX.I18N.PropertyWindow.text="Editor for a Text Type";ORYX.I18N.PropertyWindow.ok="Ok";ORYX.I18N.PropertyWindow.cancel="Cancel";ORYX.I18N.PropertyWindow.dateFormat="m/d/y";ORYX.I18N.ShapeMenuPlugin||(ORYX.I18N.ShapeMenuPlugin={});ORYX.I18N.ShapeMenuPlugin.drag="Drag";ORYX.I18N.ShapeMenuPlugin.clickDrag="Click or drag";ORYX.I18N.ShapeMenuPlugin.morphMsg="Morph shape";ORYX.I18N.SimplePnmlexport||(ORYX.I18N.SimplePnmlexport={});ORYX.I18N.SimplePnmlexport.group="Export";
ORYX.I18N.SimplePnmlexport.name="Export to PNML";ORYX.I18N.SimplePnmlexport.desc="Export to PNML";ORYX.I18N.StepThroughPlugin||(ORYX.I18N.StepThroughPlugin={});ORYX.I18N.StepThroughPlugin.group="Step Through";ORYX.I18N.StepThroughPlugin.stepThrough="Step Through";ORYX.I18N.StepThroughPlugin.stepThroughDesc="Step through your model";ORYX.I18N.StepThroughPlugin.undo="Undo";ORYX.I18N.StepThroughPlugin.undoDesc="Undo one Step";ORYX.I18N.StepThroughPlugin.error="Can't step through this diagram.";
ORYX.I18N.StepThroughPlugin.executing="Executing";ORYX.I18N.SyntaxChecker||(ORYX.I18N.SyntaxChecker={});ORYX.I18N.SyntaxChecker.group="Verification";ORYX.I18N.SyntaxChecker.name="Validate Process";ORYX.I18N.SyntaxChecker.desc="Validate Process";ORYX.I18N.SyntaxChecker.noErrors="There are no validation errors.";ORYX.I18N.SyntaxChecker.hasErrors="Validation error(s) found.";ORYX.I18N.SyntaxChecker.invalid="Invalid answer from server.";ORYX.I18N.SyntaxChecker.checkingMessage="Validating ...";
ORYX.I18N.Undo||(ORYX.I18N.Undo={});ORYX.I18N.Undo.group="Undo";ORYX.I18N.Undo.undo="Undo";ORYX.I18N.Undo.undoDesc="Undo the last action";ORYX.I18N.Undo.redo="Redo";ORYX.I18N.Undo.redoDesc="Redo the last undone action";ORYX.I18N.Validator||(ORYX.I18N.Validator={});ORYX.I18N.Validator.checking="Checking";ORYX.I18N.View||(ORYX.I18N.View={});ORYX.I18N.View.group="Zoom";ORYX.I18N.View.zoomIn="Zoom In";ORYX.I18N.View.zoomInDesc="Zoom into the model";ORYX.I18N.View.zoomOut="Zoom Out";
ORYX.I18N.View.zoomOutDesc="Zoom out of the model";ORYX.I18N.View.zoomStandard="Zoom Standard";ORYX.I18N.View.zoomStandardDesc="Zoom to the standard level";ORYX.I18N.View.zoomFitToModel="Zoom fit to model";ORYX.I18N.View.zoomFitToModelDesc="Zoom to fit the model size";ORYX.I18N.View.showInPopout="Popout";ORYX.I18N.View.showInPopoutDesc="Show in pop out window";ORYX.I18N.View.convertToPDF="PDF";ORYX.I18N.View.convertToPDFDesc="Convert to PDF";ORYX.I18N.View.convertToPNG="PNG";
ORYX.I18N.View.convertToPNGDesc="Convert to PNG";ORYX.I18N.View.generateTaskForms="Generate Task Form Templates";ORYX.I18N.View.generateTaskFormsDesc="Generate Task Form Templates";ORYX.I18N.View.showInfo="Info";ORYX.I18N.View.showInfoDesc="Info";ORYX.I18N.View.jbpmgroup="jBPM";ORYX.I18N.View.migratejPDL="Migrate jPDL 3.2 to BPMN2";ORYX.I18N.View.migratejPDLDesc="Migrate jPDL 3.2 to BPMN2";ORYX.I18N.View.viewDiff="View diff";ORYX.I18N.View.viewDiffDesc="View diff between different versions of the process";
ORYX.I18N.View.viewDiffLoadingVersions="Loading process versions...";ORYX.I18N.View.connectServiceRepo="Connect to jBPM service repository";ORYX.I18N.View.connectServiceRepoDesc="Connect to a Service Repository";ORYX.I18N.View.connectServiceRepoDataTitle="Service Repository Connection";ORYX.I18N.View.connectServiceRepoConnecting="Connecting to a Service Repository...";ORYX.I18N.View.installingRepoItem="Instaling assets from the Service Repository...";ORYX.I18N.View.shareProcess="Share your process";
ORYX.I18N.View.shareProcessDesc="Share your process";ORYX.I18N.View.infogroup="info";ORYX.I18N.XFormsSerialization||(ORYX.I18N.XFormsSerialization={});ORYX.I18N.XFormsSerialization.group="XForms Serialization";ORYX.I18N.XFormsSerialization.exportXForms="XForms Export";ORYX.I18N.XFormsSerialization.exportXFormsDesc="Export XForms+XHTML markup";ORYX.I18N.XFormsSerialization.importXForms="XForms Import";ORYX.I18N.XFormsSerialization.importXFormsDesc="Import XForms+XHTML markup";
ORYX.I18N.XFormsSerialization.noClientXFormsSupport="No XForms support";ORYX.I18N.XFormsSerialization.noClientXFormsSupportDesc='<h2>Your browser does not support XForms. Please install the <a href="https://addons.mozilla.org/firefox/addon/824" target="_blank">Mozilla XForms Add-on</a> for Firefox.</h2>';ORYX.I18N.XFormsSerialization.ok="Ok";ORYX.I18N.XFormsSerialization.selectFile="Select a XHTML (.xhtml) file or type in the XForms+XHTML markup to import it!";
ORYX.I18N.XFormsSerialization.selectCss="Please insert url of css file";ORYX.I18N.XFormsSerialization.file="File";ORYX.I18N.XFormsSerialization.impFailed="Request for import of document failed.";ORYX.I18N.XFormsSerialization.impTitle="Import XForms+XHTML document";ORYX.I18N.XFormsSerialization.expTitle="Export XForms+XHTML document";ORYX.I18N.XFormsSerialization.impButton="Import";ORYX.I18N.XFormsSerialization.impProgress="Importing...";ORYX.I18N.XFormsSerialization.close="Close";
ORYX.I18N.TreeGraphSupport||(ORYX.I18N.TreeGraphSupport={});ORYX.I18N.TreeGraphSupport.syntaxCheckName="Syntax Check";ORYX.I18N.TreeGraphSupport.group="Tree Graph Support";ORYX.I18N.TreeGraphSupport.syntaxCheckDesc="Check the syntax of an tree graph structure";ORYX.I18N.QueryEvaluator||(ORYX.I18N.QueryEvaluator={});ORYX.I18N.QueryEvaluator.name="Query Evaluator";ORYX.I18N.QueryEvaluator.group="Verification";ORYX.I18N.QueryEvaluator.desc="Evaluate query";ORYX.I18N.QueryEvaluator.noResult="Query resulted in no match.";
ORYX.I18N.QueryEvaluator.invalidResponse="Invalid answer from server.";ORYX.I18N.PropertyWindow.title="Properties";ORYX.I18N.ShapeRepository||(ORYX.I18N.ShapeRepository={});ORYX.I18N.ShapeRepository.title="Shape Repository";ORYX.I18N.Save.dialogDesciption="Please enter a name, a description and a comment.";ORYX.I18N.Save.dialogLabelTitle="Title";ORYX.I18N.Save.dialogLabelDesc="Description";ORYX.I18N.Save.dialogLabelType="Type";ORYX.I18N.Save.dialogLabelComment="Revision comment";
ORYX.I18N.Validator.name="BPMN Validator";ORYX.I18N.Validator.description="Validation for BPMN";ORYX.I18N.SSExtensionLoader.labelImport="Import";ORYX.I18N.SSExtensionLoader.labelCancel="Cancel";Ext.MessageBox.buttonText.yes="Yes";Ext.MessageBox.buttonText.no="No";Ext.MessageBox.buttonText.cancel="Cancel";Ext.MessageBox.buttonText.ok="OK";ORYX.I18N.BPMN2XPDL||(ORYX.I18N.BPMN2XPDL={});ORYX.I18N.BPMN2XPDL.group="Export";ORYX.I18N.BPMN2XPDL.xpdlExport="Export to XPDL";ORYX.I18N.BPMN2XPDL.xpdlImport="Import from XPDL";
ORYX.I18N.BPMN2XPDL.importGroup="Import";ORYX.I18N.BPMN2XPDL.selectFile="Select a XPDL (.xml) file or type in the XPDL to import it!";ORYX.I18N.BPMN2XPDL.file="File";ORYX.I18N.BPMN2XPDL.impXPDL="Import XPDL";ORYX.I18N.BPMN2XPDL.impBtn="Import";ORYX.I18N.BPMN2XPDL.impProgress="Importing...";ORYX.I18N.BPMN2XPDL.close="Close";ORYX.I18N.ResourcesSoDAdd||(ORYX.I18N.ResourcesSoDAdd={});ORYX.I18N.ResourcesSoDAdd.name="Define Separation of Duties Contraint";ORYX.I18N.ResourcesSoDAdd.group="Resource Perspective";
ORYX.I18N.ResourcesSoDAdd.desc="Define a Separation of Duties constraint for the selected tasks";ORYX.I18N.ResourcesSoDShow||(ORYX.I18N.ResourcesSoDShow={});ORYX.I18N.ResourcesSoDShow.name="Show Separation of Duties Constraints";ORYX.I18N.ResourcesSoDShow.group="Resource Perspective";ORYX.I18N.ResourcesSoDShow.desc="Show Separation of Duties constraints of the selected task";ORYX.I18N.ResourcesBoDAdd||(ORYX.I18N.ResourcesBoDAdd={});ORYX.I18N.ResourcesBoDAdd.name="Define Binding of Duties Constraint";
ORYX.I18N.ResourcesBoDAdd.group="Resource Perspective";ORYX.I18N.ResourcesBoDAdd.desc="Define a Binding of Duties Constraint for the selected tasks";ORYX.I18N.ResourcesBoDShow||(ORYX.I18N.ResourcesBoDShow={});ORYX.I18N.ResourcesBoDShow.name="Show Binding of Duties Constraints";ORYX.I18N.ResourcesBoDShow.group="Resource Perspective";ORYX.I18N.ResourcesBoDShow.desc="Show Binding of Duties constraints of the selected task";ORYX.I18N.ResourceAssignment||(ORYX.I18N.ResourceAssignment={});
ORYX.I18N.ResourceAssignment.name="Resource Assignment";ORYX.I18N.ResourceAssignment.group="Resource Perspective";ORYX.I18N.ResourceAssignment.desc="Assign resources to the selected task(s)";ORYX.I18N.ClearSodBodHighlights||(ORYX.I18N.ClearSodBodHighlights={});ORYX.I18N.ClearSodBodHighlights.name="Clear Highlights and Overlays";ORYX.I18N.ClearSodBodHighlights.group="Resource Perspective";ORYX.I18N.ClearSodBodHighlights.desc="Remove all Separation and Binding of Duties Highlights/ Overlays";
ORYX.I18N.Perspective||(ORYX.I18N.Perspective={});ORYX.I18N.Perspective.no="No Perspective";ORYX.I18N.Perspective.noTip="Unload the current perspective";ORYX.I18N.JSONSupport={imp:{name:"Import from JSON",desc:"Imports a model from JSON",group:"Export",selectFile:"Select an JSON (.json) file or type in JSON to import it!",file:"File",btnImp:"Import",btnClose:"Close",progress:"Importing ...",syntaxError:"Syntax error"},exp:{name:"Export to JSON",desc:"Exports current model to JSON",group:"Export"}};
ORYX.I18N.TBPMSupport={imp:{name:"Import from PNG/JPEG",desc:"Imports a model from a TPBM photo",group:"Export",selectFile:"Select an image (.png/.jpeg) file!",file:"File",btnImp:"Import",btnClose:"Close",progress:"Importing ...",syntaxError:"Syntax error",impFailed:"Request for import of document failed.",confirm:"Confirm import of highlighted shapes!"}};ORYX.I18N.BPMN2XHTML||(ORYX.I18N.BPMN2XHTML={});ORYX.I18N.BPMN2XHTML.group="Export";ORYX.I18N.BPMN2XHTML.XHTMLExport="Export XHTML Documentation";
ORYX.I18N.JSONImport||(ORYX.I18N.JSONImport={});ORYX.I18N.JSONImport.title="JSON Import";ORYX.I18N.JSONImport.wrongSS="The stencil set of the imported file ({0}) does not match to the loaded stencil set ({1}).";ORYX.I18N.JSONImport.invalidJSON="The JSON to import is invalid.";ORYX.I18N.Feedback||(ORYX.I18N.Feedback={});ORYX.I18N.Feedback.name="Feedback";ORYX.I18N.Feedback.desc="Contact us for any kind of feedback!";ORYX.I18N.Feedback.pTitle="Contact us for any kind of feedback!";
ORYX.I18N.Feedback.pName="Name";ORYX.I18N.Feedback.pEmail="E-Mail";ORYX.I18N.Feedback.pSubject="Subject";ORYX.I18N.Feedback.pMsg="Description/Message";ORYX.I18N.Feedback.pEmpty="* Please provide as detailed information as possible so that we can understand your request.\n* For bug reports, please list the steps how to reproduce the problem and describe the output you expected.";ORYX.I18N.Feedback.pAttach="Attach current model";ORYX.I18N.Feedback.pAttachDesc="This information can be helpful for debugging purposes. If your model contains some sensitive data, remove it before or uncheck this behavior.";
ORYX.I18N.Feedback.pBrowser="Information about your browser and environment";ORYX.I18N.Feedback.pBrowserDesc="This information has been auto-detected from your browser. It can be helpful if you encountered a bug associated with browser-specific behavior.";ORYX.I18N.Feedback.submit="Send Message";ORYX.I18N.Feedback.sending="Sending message ...";ORYX.I18N.Feedback.success="Success";ORYX.I18N.Feedback.successMsg="Thank you for your feedback!";ORYX.I18N.Feedback.failure="Failure";
ORYX.I18N.Feedback.failureMsg="Unfortunately, the message could not be sent. This is our fault! Please try again or contact someone at http://code.google.com/p/oryx-editor/";ORYX.I18N.Feedback.name="Feedback";ORYX.I18N.Feedback.failure="Failure";ORYX.I18N.Feedback.failureMsg="Unfortunately, the message could not be sent. This is our fault! Please try again or contact someone at http://code.google.com/p/oryx-editor/";ORYX.I18N.Feedback.submit="Send Message";ORYX.I18N.Feedback.emailDesc="Your e-mail address?";
ORYX.I18N.Feedback.titleDesc="Summarize your message with a short title";ORYX.I18N.Feedback.descriptionDesc="Describe your idea, question, or problem.";ORYX.I18N.Feedback.info='<p>Oryx is a research platform intended to support scientists in the field of business process management and beyond with a flexible, extensible tool to validate research theses and conduct experiments.</p><p>We are happy to provide you with the <a href="http://bpt.hpi.uni-potsdam.de/Oryx/ReleaseNotes" target="_blank"> latest technology and advancements</a> of our platform. <a href="http://bpt.hpi.uni-potsdam.de/Oryx/DeveloperNetwork" target="_blank">We</a> work hard to provide you with a reliable system, even though you may experience small hiccups from time to time.</p><p>If you have ideas how to improve Oryx, have a question related to the platform, or want to report a problem: <strong>Please, let us know. Here.</strong></p>';
ORYX.I18N.Feedback.subjects=[{id:"question",name:"Question",description:"Ask your question here! \nPlease give us as much information as possible, so we don't have to bother you with more questions, before we can give an answer.",info:""},{id:"problem",name:"Problem",description:"We're sorry for the inconvenience. Give us feedback on the problem, and we'll try to solve it for you. Describe it as detailed as possible, please.",info:""},{id:"idea",name:"Idea",description:"Share your ideas and thoughts here!",
info:""}];ORYX.I18N.BPMN2DTRPXMI||(ORYX.I18N.BPMN2DTRPXMI={});ORYX.I18N.BPMN2DTRPXMI.group="Export";ORYX.I18N.BPMN2DTRPXMI.DTRPXMIExport="Export to XMI (Design Thinking)";ORYX.I18N.BPMN2DTRPXMI.DTRPXMIExportDescription="Exports current model to XMI (requires stencil set extension 'BPMN Subset for Design Thinking')";ORYX.I18N.RDFExport||(ORYX.I18N.RDFExport={});ORYX.I18N.RDFExport.group="Export";ORYX.I18N.RDFExport.rdfExport="Export to RDF";ORYX.I18N.RDFExport.rdfExportDescription="Exports current model to the XML serialization defined for the Resource Description Framework (RDF)";
ORYX.I18N.SyntaxChecker.BPMN||(ORYX.I18N.SyntaxChecker.BPMN={});ORYX.I18N.SyntaxChecker.BPMN_NO_SOURCE="An edge must have a source.";ORYX.I18N.SyntaxChecker.BPMN_NO_TARGET="An edge must have a target.";ORYX.I18N.SyntaxChecker.BPMN_DIFFERENT_PROCESS="Source and target node must be contained in the same process.";ORYX.I18N.SyntaxChecker.BPMN_SAME_PROCESS="Source and target node must be contained in different pools.";ORYX.I18N.SyntaxChecker.BPMN_FLOWOBJECT_NOT_CONTAINED_IN_PROCESS="A flow object must be contained in a process.";
ORYX.I18N.SyntaxChecker.BPMN_ENDEVENT_WITHOUT_INCOMING_CONTROL_FLOW="An end event must have an incoming sequence flow.";ORYX.I18N.SyntaxChecker.BPMN_STARTEVENT_WITHOUT_OUTGOING_CONTROL_FLOW="A start event must have an outgoing sequence flow.";ORYX.I18N.SyntaxChecker.BPMN_STARTEVENT_WITH_INCOMING_CONTROL_FLOW="Start events must not have incoming sequence flows.";ORYX.I18N.SyntaxChecker.BPMN_ATTACHEDINTERMEDIATEEVENT_WITH_INCOMING_CONTROL_FLOW="Attached intermediate events must not have incoming sequence flows.";
ORYX.I18N.SyntaxChecker.BPMN_ATTACHEDINTERMEDIATEEVENT_WITHOUT_OUTGOING_CONTROL_FLOW="Attached intermediate events must have exactly one outgoing sequence flow.";ORYX.I18N.SyntaxChecker.BPMN_ENDEVENT_WITH_OUTGOING_CONTROL_FLOW="End events must not have outgoing sequence flows.";ORYX.I18N.SyntaxChecker.BPMN_EVENTBASEDGATEWAY_BADCONTINUATION="Event-based gateways must not be followed by gateways or subprocesses.";ORYX.I18N.SyntaxChecker.BPMN_NODE_NOT_ALLOWED="Node type is not allowed.";
ORYX.I18N.SyntaxChecker.IBPMN||(ORYX.I18N.SyntaxChecker.IBPMN={});ORYX.I18N.SyntaxChecker.IBPMN_NO_ROLE_SET="Interactions must have a sender and a receiver role set";ORYX.I18N.SyntaxChecker.IBPMN_NO_INCOMING_SEQFLOW="This node must have incoming sequence flow.";ORYX.I18N.SyntaxChecker.IBPMN_NO_OUTGOING_SEQFLOW="This node must have outgoing sequence flow.";ORYX.I18N.SyntaxChecker.InteractionNet||(ORYX.I18N.SyntaxChecker.InteractionNet={});ORYX.I18N.SyntaxChecker.InteractionNet_SENDER_NOT_SET="Sender not set";
ORYX.I18N.SyntaxChecker.InteractionNet_RECEIVER_NOT_SET="Receiver not set";ORYX.I18N.SyntaxChecker.InteractionNet_MESSAGETYPE_NOT_SET="Message type not set";ORYX.I18N.SyntaxChecker.InteractionNet_ROLE_NOT_SET="Role not set";ORYX.I18N.SyntaxChecker.EPC||(ORYX.I18N.SyntaxChecker.EPC={});ORYX.I18N.SyntaxChecker.EPC_NO_SOURCE="Each edge must have a source.";ORYX.I18N.SyntaxChecker.EPC_NO_TARGET="Each edge must have a target.";ORYX.I18N.SyntaxChecker.EPC_NOT_CONNECTED="Node must be connected with edges.";
ORYX.I18N.SyntaxChecker.EPC_NOT_CONNECTED_2="Node must be connected with more edges.";ORYX.I18N.SyntaxChecker.EPC_TOO_MANY_EDGES="Node has too many connected edges.";ORYX.I18N.SyntaxChecker.EPC_NO_CORRECT_CONNECTOR="Node is no correct connector.";ORYX.I18N.SyntaxChecker.EPC_MANY_STARTS="There must be only one start event.";ORYX.I18N.SyntaxChecker.EPC_FUNCTION_AFTER_OR="There must be no functions after a splitting OR/XOR.";ORYX.I18N.SyntaxChecker.EPC_PI_AFTER_OR="There must be no process interface after a splitting OR/XOR.";
ORYX.I18N.SyntaxChecker.EPC_FUNCTION_AFTER_FUNCTION="There must be no function after a function.";ORYX.I18N.SyntaxChecker.EPC_EVENT_AFTER_EVENT="There must be no event after an event.";ORYX.I18N.SyntaxChecker.EPC_PI_AFTER_FUNCTION="There must be no process interface after a function.";ORYX.I18N.SyntaxChecker.EPC_FUNCTION_AFTER_PI="There must be no function after a process interface.";ORYX.I18N.SyntaxChecker.PetriNet||(ORYX.I18N.SyntaxChecker.PetriNet={});
ORYX.I18N.SyntaxChecker.PetriNet_NOT_BIPARTITE="The graph is not bipartite";ORYX.I18N.SyntaxChecker.PetriNet_NO_LABEL="Label not set for a labeled transition";ORYX.I18N.SyntaxChecker.PetriNet_NO_ID="There is a node without id";ORYX.I18N.SyntaxChecker.PetriNet_SAME_SOURCE_AND_TARGET="Two flow relationships have the same source and target";ORYX.I18N.SyntaxChecker.PetriNet_NODE_NOT_SET="A node is not set for a flowrelationship";ORYX.I18N.Edge="Edge";ORYX.I18N.Node="Node";
ORYX.I18N.SyntaxChecker.notice="Move the mouse over a red cross icon to see the error message.";ORYX.I18N.Validator.result="Validation Result";ORYX.I18N.Validator.noErrors="No validation errors found.";ORYX.I18N.Validator.bpmnDeadlockTitle="Deadlock";ORYX.I18N.Validator.bpmnDeadlock="This node results in a deadlock. There are situations where not all incoming branches are activated.";ORYX.I18N.Validator.bpmnUnsafeTitle="Lack of synchronization";ORYX.I18N.Validator.bpmnUnsafe="This model suffers from lack of synchronization. The marked element is activated from multiple incoming branches.";
ORYX.I18N.Validator.bpmnLeadsToNoEndTitle="Validation Result";ORYX.I18N.Validator.bpmnLeadsToNoEnd="The process will never reach a final state.";ORYX.I18N.Validator.syntaxErrorsTitle="Syntax Error";ORYX.I18N.Validator.syntaxErrorsMsg="The process cannot be validated because it contains syntax errors.";ORYX.I18N.Validator.error="Validation failed";ORYX.I18N.Validator.errorDesc='We are sorry, but the validation of your process failed. It would help us identifying the problem, if you sent us your process model via the "Send Feedback" function.';
ORYX.I18N.Validator.epcIsSound="<p><b>The EPC is sound, no problems found!</b></p>";ORYX.I18N.Validator.epcNotSound="<p><b>The EPC is <i>NOT</i> sound!</b></p>";ORYX.I18N.RESIZE||(ORYX.I18N.RESIZE={});ORYX.I18N.RESIZE.tipGrow="Increase canvas size:";ORYX.I18N.RESIZE.tipShrink="Decrease canvas size:";ORYX.I18N.RESIZE.N="Top";ORYX.I18N.RESIZE.W="Left";ORYX.I18N.RESIZE.S="Down";ORYX.I18N.RESIZE.E="Right";ORYX.I18N.PluginLoad||(ORYX.I18N.PluginLoad={});ORYX.I18N.PluginLoad.AddPluginButtonName="Add Plugins";
ORYX.I18N.PluginLoad.AddPluginButtonDesc="Add additional Plugins dynamically";ORYX.I18N.PluginLoad.loadErrorTitle="Loading Error";ORYX.I18N.PluginLoad.loadErrorDesc="Unable to load Plugin. \n Error:\n";ORYX.I18N.PluginLoad.WindowTitle="Add additional Plugins";ORYX.I18N.PluginLoad.NOTUSEINSTENCILSET="Not allowed in this Stencilset!";ORYX.I18N.PluginLoad.REQUIRESTENCILSET="Require another Stencilset!";ORYX.I18N.PluginLoad.NOTFOUND="Pluginname not found!";ORYX.I18N.PluginLoad.YETACTIVATED="Plugin is yet activated!";
ORYX.I18N.Layouting||(ORYX.I18N.Layouting={});ORYX.I18N.Layouting.doing="Layouting...";ORYX.I18N.SyntaxChecker.MULT_ERRORS="Multiple Errors";ORYX.I18N.PropertyWindow||(ORYX.I18N.PropertyWindow={});ORYX.I18N.PropertyWindow.oftenUsed="Common";ORYX.I18N.PropertyWindow.moreProps="Extra";ORYX.I18N.PropertyWindow.simulationProps="Simulation";ORYX.I18N.Bpmn2_0Serialization||(ORYX.I18N.Bpmn2_0Serialization={});ORYX.I18N.Bpmn2_0Serialization.show="Show BPMN 2.0 DI XML";
ORYX.I18N.Bpmn2_0Serialization.showDesc="Show BPMN 2.0 DI XML of the current BPMN 2.0 model";ORYX.I18N.Bpmn2_0Serialization.download="Download BPMN 2.0 DI XML";ORYX.I18N.Bpmn2_0Serialization.downloadDesc="Download BPMN 2.0 DI XML of the current BPMN 2.0 model";ORYX.I18N.Bpmn2_0Serialization.serialFailed="An error occurred while generating the BPMN 2.0 DI XML Serialization.";ORYX.I18N.Bpmn2_0Serialization.group="BPMN 2.0";ORYX.I18N.SyntaxChecker.BPMN2||(ORYX.I18N.SyntaxChecker.BPMN2={});
ORYX.I18N.SyntaxChecker.BPMN2_DATA_INPUT_WITH_INCOMING_DATA_ASSOCIATION="A Data Input must not have any incoming Data Associations.";ORYX.I18N.SyntaxChecker.BPMN2_DATA_OUTPUT_WITH_OUTGOING_DATA_ASSOCIATION="A Data Output must not have any outgoing Data Associations.";ORYX.I18N.SyntaxChecker.BPMN2_EVENT_BASED_TARGET_WITH_TOO_MANY_INCOMING_SEQUENCE_FLOWS="Targets of Event-based Gateways may only have one incoming Sequence Flow.";
ORYX.I18N.SyntaxChecker.BPMN2_EVENT_BASED_WITH_TOO_LESS_OUTGOING_SEQUENCE_FLOWS="An Event-based Gateway must have two or more outgoing Sequence Flows.";ORYX.I18N.SyntaxChecker.BPMN2_EVENT_BASED_EVENT_TARGET_CONTRADICTION="If Message Intermediate Events are used in the configuration, then Receive Tasks must not be used and vice versa.";ORYX.I18N.SyntaxChecker.BPMN2_EVENT_BASED_WRONG_TRIGGER="Only the following Intermediate Event triggers are valid: Message, Signal, Timer, Conditional and Multiple.";
ORYX.I18N.SyntaxChecker.BPMN2_EVENT_BASED_WRONG_CONDITION_EXPRESSION="The outgoing Sequence Flows of the Event Gateway must not have a condition expression.";ORYX.I18N.SyntaxChecker.BPMN2_EVENT_BASED_NOT_INSTANTIATING="The Gateway does not meet the conditions to instantiate the process. Please use a start event or an instantiating attribute for the gateway.";ORYX.I18N.SyntaxChecker.BPMN2_GATEWAYDIRECTION_MIXED_FAILURE="The Gateway must have both multiple incoming and outgoing Sequence Flows.";
ORYX.I18N.SyntaxChecker.BPMN2_GATEWAYDIRECTION_CONVERGING_FAILURE="The Gateway must have multiple incoming but most NOT have multiple outgoing Sequence Flows.";ORYX.I18N.SyntaxChecker.BPMN2_GATEWAYDIRECTION_DIVERGING_FAILURE="The Gateway must NOT have multiple incoming but must have multiple outgoing Sequence Flows.";ORYX.I18N.SyntaxChecker.BPMN2_GATEWAY_WITH_NO_OUTGOING_SEQUENCE_FLOW="A Gateway must have a minimum of one outgoing Sequence Flow.";
ORYX.I18N.SyntaxChecker.BPMN2_RECEIVE_TASK_WITH_ATTACHED_EVENT="Receive Tasks used in Event Gateway configurations must not have any attached Intermediate Events.";ORYX.I18N.SyntaxChecker.BPMN2_EVENT_SUBPROCESS_BAD_CONNECTION="An Event Subprocess must not have any incoming or outgoing Sequence Flow.";ORYX.I18N.SyntaxChecker.BPMN_MESSAGE_FLOW_NOT_CONNECTED="At least one side of the Message Flow has to be connected.";ORYX.I18N.Bpmn2_0Serialization["import"]="Import from BPMN 2.0 DI XML";
ORYX.I18N.Bpmn2_0Serialization.importDesc="Import a BPMN 2.0 model from a file or XML String";ORYX.I18N.Bpmn2_0Serialization.selectFile="Select a (*.bpmn) file or type in BPMN 2.0 DI XML to import it!";ORYX.I18N.Bpmn2_0Serialization.file="File:";ORYX.I18N.Bpmn2_0Serialization.name="Import from BPMN 2.0 DI XML";ORYX.I18N.Bpmn2_0Serialization.btnImp="Import";ORYX.I18N.Bpmn2_0Serialization.progress="Importing BPMN 2.0 DI XML ...";ORYX.I18N.Bpmn2_0Serialization.btnClose="Close";
ORYX.I18N.Bpmn2_0Serialization.error="An error occurred while importing BPMN 2.0 DI XML";ORYX.I18N.SyntaxChecker.BPMN2_TOO_MANY_INITIATING_MESSAGES="A Choreography Activity may only have one initiating message.";ORYX.I18N.SyntaxChecker.BPMN_MESSAGE_FLOW_NOT_ALLOWED="A Message Flow is not allowed here.";ORYX.I18N.SyntaxChecker.BPMN2_EVENT_BASED_WITH_TOO_LESS_INCOMING_SEQUENCE_FLOWS="An Event-based Gateway that is not instantiating must have a minimum of one incoming Sequence Flow.";
ORYX.I18N.SyntaxChecker.BPMN2_TOO_FEW_INITIATING_PARTICIPANTS="A Choreography Activity must have one initiating Participant (white).";ORYX.I18N.SyntaxChecker.BPMN2_TOO_MANY_INITIATING_PARTICIPANTS="A Choreography Acitivity must not have more than one initiating Participant (white).";ORYX.I18N.SyntaxChecker.COMMUNICATION_AT_LEAST_TWO_PARTICIPANTS="The communication must be connected to at least two participants.";ORYX.I18N.SyntaxChecker.MESSAGEFLOW_START_MUST_BE_PARTICIPANT="The message flow's source must be a participant.";
ORYX.I18N.SyntaxChecker.MESSAGEFLOW_END_MUST_BE_PARTICIPANT="The message flow's target must be a participant.";ORYX.I18N.SyntaxChecker.CONV_LINK_CANNOT_CONNECT_CONV_NODES="The conversation link must connect a communication or sub conversation node with a participant.";ORYX.I18N.Bpmn2_0Serialization.xpdlShow="Show XPDL 2.2";ORYX.I18N.Bpmn2_0Serialization.xpdlShowDesc="Shows the XPDL 2.2 based on BPMN 2.0 XML (by XSLT)";ORYX.I18N.Bpmn2_0Serialization.xpdlDownload="Download as XPDL 2.2";
ORYX.I18N.Bpmn2_0Serialization.xpdlDownloadDesc="Download the XPDL 2.2 based on BPMN 2.0 XML (by XSLT)";ORYX.I18N.cpntoolsSupport||(ORYX.I18N.cpntoolsSupport={});ORYX.I18N.cpntoolsSupport.serverConnectionFailed="Connection to server failed.";ORYX.I18N.cpntoolsSupport.importTask="Select an CPN file (.cpn) or type in the CPN XML structure in order to import it!";ORYX.I18N.cpntoolsSupport.File="File:";ORYX.I18N.cpntoolsSupport.cpn="CPN";ORYX.I18N.cpntoolsSupport.title="CPN Oryx";
ORYX.I18N.cpntoolsSupport.importLable="Import";ORYX.I18N.cpntoolsSupport.close="Close";ORYX.I18N.cpntoolsSupport.wrongCPNFile="Not chosen correct CPN - File.";ORYX.I18N.cpntoolsSupport.noPageSelection="No page has been selected.";ORYX.I18N.cpntoolsSupport.group="Export";ORYX.I18N.cpntoolsSupport.importProgress="Importing ...";ORYX.I18N.cpntoolsSupport.exportProgress="Exporting ...";ORYX.I18N.cpntoolsSupport.exportDescription="Export to CPN Tools";ORYX.I18N.cpntoolsSupport.importDescription="Import from CPN Tools";
ORYX.I18N.BPMN2YAWLMapper||(ORYX.I18N.BPMN2YAWLMapper={});ORYX.I18N.BPMN2YAWLMapper.group="Export";ORYX.I18N.BPMN2YAWLMapper.name="YAWL Export";ORYX.I18N.BPMN2YAWLMapper.desc='Map this diagram to YAWL and export it, please ensure "BPMN Subset for mapping to YAWL" is loaded';
